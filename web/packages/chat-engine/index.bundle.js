"use strict";var e=require("react"),t=require("react/jsx-runtime"),s=require("class-variance-authority"),a=require("@radix-ui/react-slot"),n=require("lucide-react"),i=require("@radix-ui/react-dialog"),r=require("isomorphic-dompurify"),o=require("lodash-es"),l=require("next-intl"),d=require("usehooks-ts"),c=require("clsx"),u=require("@radix-ui/react-separator"),p=require("react-use"),m=require("@radix-ui/react-dropdown-menu"),g=require("next/navigation"),f=require("ismobilejs"),h=require("uuid");require("viem");var v=require("@chakra-ui/react"),E=require("next/image"),S=require("react-textarea-autosize"),T=require("@radix-ui/react-tooltip"),_=require("@radix-ui/react-avatar"),b=require("react-virtuoso"),I=require("next/link"),x=require("dayjs"),w=require("zustand"),N=require("immer"),y=require("zustand-computed"),O=require("dayjs/plugin/duration"),C=require("dexie"),M=require("vaul");require("@/styles/md-viewer.scss");var A=require("highlight.js"),P=require("marked"),L=require("marked-gfm-heading-id"),D=require("marked-mangle"),R=require("marked-smartypants"),j=require("marked-xhtml"),k=require("mermaid"),B=require("katex");require("katex/dist/katex.min.css");var U=require("next-themes"),G=require("lottie-web"),F=require("next/dynamic"),z=require("@radix-ui/react-context-menu"),Y=require("hammerjs");require("swiper/css");var V=require("framer-motion"),H=require("axios");require("rxjs");var W=require("react-hot-toast"),$=require("viem/chains"),K=require("tailwind-merge");function q(e){return e&&e.__esModule?e:{default:e}}function X(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(s){if("default"!==s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}})),t.default=e,Object.freeze(t)}var J,Z,Q,ee,te,se,ae,ne,ie,re,oe=X(e),le=X(i),de=q(c),ce=X(u),ue=X(m),pe=q(f),me=q(E),ge=q(S),fe=X(T),he=X(_),ve=q(I),Ee=q(x),Se=q(y),Te=q(O),_e=q(C),be=q(A),Ie=q(k),xe=q(B),we=q(G),Ne=q(F),ye=X(z),Oe=q(Y),Ce=q(H);!function(e){e[e.NORMAL=0]="NORMAL",e[e.SHARE=1]="SHARE"}(J||(J={})),function(e){e[e.TEXT=0]="TEXT",e[e.VOICE=1]="VOICE"}(Z||(Z={})),function(e){e.WAITING="JOB_STATUS_WAITING",e.DOING="JOB_STATUS_DOING",e.DONE="JOB_STATUS_DONE",e.FAILED="JOB_STATUS_FAILED",e.CANCELED="JOB_STATUS_CANCELED"}(Q||(Q={})),function(e){e.UNKNOWN="EMBED_OBJ_STATUS_UNSPECIFIED",e.PENDING="EMBED_OBJ_STATUS_PENDING",e.PROCESSING="EMBED_OBJ_STATUS_PROCESSING",e.DONE="EMBED_OBJ_STATUS_DONE",e.ERROR="EMBED_OBJ_STATUS_ERROR",e.DELETED="EMBED_OBJ_STATUS_DELETED",e.QUEUEING="EMBED_OBJ_STATUS_QUEUEING"}(ee||(ee={})),function(e){e.UNKNOWN="MESSAGE_METADATA_TYPE_UNSPECIFIED",e.IMAGE="MESSAGE_METADATA_TYPE_IMAGE_FILE",e.DOC="MESSAGE_METADATA_TYPE_TEXT_FILE",e.AUDIO="MESSAGE_METADATA_TYPE_AUDIO_FILE",e.VIDEO="MESSAGE_METADATA_TYPE_VIDEO_FILE",e.TEXT_CONTENT="MESSAGE_METADATA_TYPE_TEXT_CONTENT",e.AUDIO_CONTENT="MESSAGE_METADATA_TYPE_USER_AUDIO",e.ALL="MESSAGE_METADATA_TYPE_ALL_FILE"}(te||(te={})),function(e){e.NORMAL="Normal",e.LIKED="Liked",e.DISLIKE="Dislike"}(se||(se={})),function(e){e.UNSPECIFIED="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_UNSPECIFIED",e.AUTO="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_AUTO",e.EN="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_EN",e.ZH="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_ZH",e.JA="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_JA",e.RU="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_RU",e.ES="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_ES",e.KO="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_KO"}(ae||(ae={})),function(e){e.ZERO_POINT_FIVE="BOT_CHAT_SETTING_AUDIO_SPEED_ZERO_POINT_FIVE",e.ZERO_POINT_SEVEN_FIVE="BOT_CHAT_SETTING_AUDIO_SPEED_ZERO_POINT_SEVEN_FIVE",e.ONE="BOT_CHAT_SETTING_AUDIO_SPEED_ONE",e.ONE_POINT_TWENTY_FIVE="BOT_CHAT_SETTING_AUDIO_SPEED_ONE_POINT_TWENTY_FIVE",e.ONE_POINT_FIVE="BOT_CHAT_SETTING_AUDIO_SPEED_ONE_POINT_FIVE"}(ne||(ne={})),exports.MenuFunctionEnum=void 0,(ie=exports.MenuFunctionEnum||(exports.MenuFunctionEnum={}))[ie.REMOVE_FROM_LIST=0]="REMOVE_FROM_LIST",ie[ie.CLEAR_MEMORY=1]="CLEAR_MEMORY",function(e){e.Like="Like",e.Dislike="Dislike",e.Copy_Message="Copy Message",e.Stop_Generating="Stop Generating",e.Regenerate="Regenerate",e.Edit="Edit",e.Translate="Translate",e.Download_Voice="Download Voice",e.Share="Share",e.Delete="Delete",e.Remove_Dislike="Remove Dislike",e.Regenerate_Voice="Regenerate Voice",e.Feedback="Feedback",e.Save_Image="Save Image",e.Copy_Image="Copy Image",e.Copy_Image_Link="Copy Image Link"}(re||(re={}));const Me=e.createContext({type:"bot",entityInfo:{id:"",name:"",energyPerChat:0,pinned:!1},readonly:!1,interactionDisabled:!1,visitorInteroperable:!0,showInteractionCostEnergy:!0,chatSettingDisabled:!1,menuDisabled:!1,menuFunctions:[],getList:async()=>[]}),Ae=()=>{},Pe=e.createContext({messageMap:new Map,messageIdList:[],autoPlayIdQueue:[],sending:!1,interacting:!1,scrollToBottom:0,setDraftMessage:Ae,sendTextMessage:Ae,sendAudioMessage:async()=>{},hasMore:!1,gettingHistory:!1,getHistoryMessage:async()=>[],clearMessageList:Ae}),Le=["en","zh","zh-tw","jp","es","ru","ko"];function De(...e){return K.twMerge(c.clsx(e))}var Re=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const je=s.cva("relative rounded-xl border flex justify-center flex-col md:flex-row md:justify-between items-center gap-3 p-3 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"bg-surface-accent-yellow-subtlest border-icon-warning text-warning-bolder",info:"bg-surface-accent-blue-subtlest border-icon-brand text-brand",error:"bg-surface-accent-red-subtlest border-icon-critical text-critical-bolder"}},defaultVariants:{variant:"default"}}),ke=oe.forwardRef(((e,s)=>{var{className:a,variant:n}=e,i=Re(e,["className","variant"]);return t.jsx("div",Object.assign({ref:s,role:"alert",className:De(je({variant:n}),a)},i))}));ke.displayName="Alert";const Be=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Re(e,["className"]);return t.jsx("h5",Object.assign({ref:s,className:De("mb-1 font-medium leading-none tracking-tight",a)},n))}));Be.displayName="AlertTitle";const Ue=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Re(e,["className"]);return t.jsx("div",Object.assign({ref:s,className:De("text-base [&_p]:leading-relaxed",a)},n))}));Ue.displayName="AlertDescription";var Ge=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const Fe=s.cva("inline-flex shrink-0",{variants:{size:{"2xs":"w-3 h-3",xs:"w-3.5 h-3.5",sm:"w-4 h-4",md:"w-4.5 h-4.5",lg:"w-5 h-5",xl:"w-5.5 h-5.5","2xl":"w-6 h-6","3xl":"w-7 h-7","4xl":"w-8 h-8","5xl":"w-9 h-9","6xl":"w-10 h-10","7xl":"w-12 h-12"},color:{default:"text-default",subtle:"text-subtle",subtlest:"text-subtlest",disabled:"text-disabled",inverse:"text-inverse",static:"text-static",brand:"text-brand",critical:"text-critical",warning:"text-warning",success:"text-success"},rotate:{45:"rotate-45",90:"rotate-90","-45":"-rotate-45","-90":"-rotate-90",180:"rotate-180"}},defaultVariants:{size:"sm",color:"default"}}),ze=oe.forwardRef(((e,s)=>{const{children:a,component:n,size:i,color:r,rotate:o,className:l}=e,d=Ge(e,["children","component","size","color","rotate","className"]),c=n||"span";return t.jsx(c,Object.assign({ref:s},d,{className:De(Fe({size:i,color:r,rotate:o}),l),children:a}))}));ze.displayName="Icon";var Ye=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const Ve=s.cva("relative shrink-0 inline-flex items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors ring-offset-surface-default focus-visible:outline-none focus-visible:shadow-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-1 disabled:pointer-events-none disabled:opacity-30 disabled:shadow-none",{variants:{variant:{primary:"text-static bg-surface-primary-default shadow-button-primary hover:bg-surface-primary-hovered active:bg-surface-primary-pressed",outline:"border hover:bg-surface-hovered active:bg-surface-pressed",static:"bg-static border hover:bg-surface-hoverd-static active:bg-surface-pressed-static",link:"rounded-none font-normal underline-offset-4 hover:underline active:underline",plain:"rounded-md font-medium hover:bg-surface-hovered active:bg-surface-pressed"},color:{default:"",brand:"",warning:"",error:"",gray:""},size:{lg:"",md:"",sm:""}},compoundVariants:[{variant:"primary",size:"lg",className:"h-11 min-w-11 px-6"},{variant:"primary",size:"md",className:"h-9 min-w-9 px-4 text-sm"},{variant:"primary",size:"sm",className:"h-7 min-w-7 px-3 text-sm"},{variant:"primary",color:"default",className:"text-brand bg-surface-search-field border border-default hover:bg-surface-hovered active:bg-surface-pressed active:shadow-button-pressed shadow-button-basic"},{variant:"primary",color:"brand",className:"bg-surface-primary-default hover:bg-surface-primary-hovered active:bg-surface-primary-pressed"},{variant:"primary",color:"warning",className:"bg-surface-warning-default hover:bg-surface-warning-hovered active:bg-surface-warning-pressed"},{variant:"primary",color:"error",className:"bg-surface-critical-default hover:bg-surface-critical-hovered active:bg-surface-critical-pressed"},{variant:"primary",color:"gray",className:"text-subtle bg-surface-search-field border border-default hover:bg-surface-hovered active:bg-surface-pressed shadow-button-basic"},{variant:"static",color:"default",className:"text-static-black"},{variant:"static",color:"brand",className:"text-brand"},{variant:"static",color:"warning",className:"text-warning"},{variant:"static",color:"error",className:"text-critical"},{variant:"static",color:"gray",className:"text-subtler"},{variant:"outline",color:"default",className:"border-default text-subtle shadow-button-basic active:shadow-button-pressed"},{variant:"outline",color:"brand",className:"border-surface-primary-default text-brand"},{variant:"outline",color:"warning",className:"border-surface-warning-default text-warning hover:bg-surface-warning-subtle-hovered active:bg-surface-warning-subtle-pressed"},{variant:"outline",color:"error",className:"border-surface-critical-default text-critical hover:bg-surface-critical-subtle-hovered active:bg-surface-critical-subtle-pressed"},{variant:"outline",color:"gray",className:"text-subtle hover:bg-surface-hovered active:shadow-button-pressed"},{variant:"outline",size:"lg",className:"h-11 min-w-11 px-6"},{variant:"outline",size:"md",className:"h-9 min-w-9 px-4 text-sm"},{variant:"outline",size:"sm",className:"h-7 min-w-7 px-3 text-sm"},{variant:"static",size:"lg",className:"h-11 min-w-11 px-6"},{variant:"static",size:"md",className:"h-9 min-w-9 px-4 text-sm"},{variant:"static",size:"sm",className:"h-7 min-w-7 px-3 text-sm"},{variant:"link",className:"h-fit w-fit min-w-auto px-0.5 py-0.5"},{variant:"link",color:"default",className:"text-default"},{variant:"link",color:"brand",className:"text-brand"},{variant:"link",color:"warning",className:"text-warning"},{variant:"link",color:"error",className:"text-critical"},{variant:"link",color:"gray",className:"text-subtler hover:text-subtler"},{variant:"link",size:"lg",className:"h-fit w-fit px-0.5 py-0.5 text-base"},{variant:"link",size:"md",className:"h-fit w-fit px-0.5 py-0.5 text-sm"},{variant:"plain",className:"h-fit w-fit min-w-auto px-0.5 py-0.5"},{variant:"plain",color:"default",className:"text-default"},{variant:"plain",color:"brand",className:"text-brand"},{variant:"plain",color:"warning",className:"text-warning"},{variant:"plain",color:"error",className:"text-critical"},{variant:"plain",color:"gray",className:"text-subtler hover:text-subtle active:text-subtle"},{variant:"plain",size:"lg",className:"h-fit w-fit px-0.5 py-0.5 text-base"},{variant:"plain",size:"md",className:"h-fit w-fit px-0.5 py-0.5 text-sm"},{variant:"plain",size:"sm",className:"h-fit w-fit px-0.5 py-0.5 text-sm"}],defaultVariants:{variant:"primary",color:"default",size:"lg"}}),He=s.cva("relative shrink-0 text-inherit inline-flex items-center justify-center whitespace-nowrap transition-colors ring-offset-surface-default",{variants:{variant:{primary:"",outline:"",link:"font-normal",plain:"font-medium",static:""},size:{lg:"text-base w-5 h-5",md:"text-sm w-4.5 h-4.5",sm:"text-sm w-4 h-4"}},compoundVariants:[{variant:"plain",size:"lg",className:"text-base w-4.5 h-4.5"},{variant:"plain",size:"md",className:"text-sm w-4 h-4"},{variant:"plain",size:"md",className:"text-sm"}],defaultVariants:{variant:"primary",size:"lg"}}),We=oe.forwardRef(((e,s)=>{var{className:i="",iconClassName:r,variant:o,color:l="brand",icon:d,iconDirection:c="left",size:u,asChild:p=!1,loading:m=!1,noStyle:g=!1,iconOutBox:f=!1,isBlock:h=!1,disabled:v,children:E}=e,S=Ye(e,["className","iconClassName","variant","color","icon","iconDirection","size","asChild","loading","noStyle","iconOutBox","isBlock","disabled","children"]);const T=p?a.Slot:"button",_=v||m;return t.jsxs(T,Object.assign({className:g?i:De(Ve({variant:o,color:l,size:u,className:i}),_&&"cursor-not-allowed !pointer-events-auto",h&&"w-full"),ref:s,disabled:_},S,{children:[m&&t.jsx("span",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:t.jsx(n.Loader2,{className:De(He({variant:o,size:u}),"animate-spin","lg"===u?"w-6 h-6":"md"===u?"w-5 h-5":"w-4.5 h-4.5")})}),d&&f&&"left"===c&&$e(d,"left",{loading:m,noStyle:g,iconClassName:r,variant:o,color:l,size:u}),t.jsxs("span",{className:De("w-full inline-flex items-center justify-center",m?"opacity-0":"opacity-100","plain"===o&&"font-medium"),children:[d&&!f&&"left"===c&&$e(d,"left",{loading:m,noStyle:g,iconClassName:r,variant:o,color:l,size:u}),E,d&&!f&&"right"===c&&$e(d,"right",{loading:m,noStyle:g,iconClassName:r,variant:o,color:l,size:u})]}),d&&f&&"right"===c&&$e(d,"right",{loading:m,noStyle:g,iconClassName:r,variant:o,color:l,size:u})]}))})),$e=(e,s,{loading:a,noStyle:n,iconClassName:i,variant:r="primary",color:o="brand",size:l="lg"})=>t.jsx(ze,{component:e,className:n?i:De(He({variant:r,size:l}),"plain"===r||"link"===r?"left"===s?"mr-0.5":"ml-0.5":"left"===s?"mr-1.5":"ml-1.5",i,a?"opacity-0":"opacity-100")});We.displayName="Button";var Ke=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const qe=le.Root,Xe=le.Portal,Je=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Ke(e,["className"]);return t.jsx(le.Trigger,Object.assign({ref:s,className:De("ring-offset-surface-default focus-visible:outline-none focus-visible:shadow-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-1",a)},n))}));Je.displayName=le.Trigger.displayName;const Ze=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Ke(e,["className"]);return t.jsx(le.Overlay,Object.assign({ref:s,className:De("fixed inset-0 z-50 bg-opacity-90 md:bg-opacity-75 bg-alpha-mask-desktop data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},n))}));Ze.displayName=le.Overlay.displayName;const Qe=oe.forwardRef(((e,s)=>{var{className:a,children:i,hideClose:r=!1,maskClosable:o=!0,overlayClose:l=!0,onClose:d,overlayClassName:c,iconClassName:u}=e,p=Ke(e,["className","children","hideClose","maskClosable","overlayClose","onClose","overlayClassName","iconClassName"]);return t.jsxs(Xe,{children:[t.jsx(Ze,{onClick:()=>{o&&l&&d&&d()},className:c}),t.jsxs(le.Content,Object.assign({ref:s,className:De("fixed left-[50%] top-[50%] z-50 grid w-[90%] rounded-4xl max-w-lg translate-x-[-50%] translate-y-[-50%] bg-surface-default shadow-modal-default duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] ring-offset-surface-default focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-1 focus-visible:outline-0",a)},p,{children:[i,!r&&t.jsxs(le.Close,{className:De("w-9 h-9 absolute right-5 top-3 flex justify-center items-center focus-visible:outline-0 rounded-full hover:bg-surface-hovered",u),onClick:()=>{d&&d()},children:[t.jsx(n.X,{className:"w-6 h-6 text-icon-subtle"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})}));function et(e){var{className:s}=e,a=Ke(e,["className"]);return t.jsx("div",Object.assign({className:De("flex flex-col p-4",s)},a))}function tt(e){var{className:s}=e,a=Ke(e,["className"]);return t.jsx("div",Object.assign({className:De("flex justify-end p-4",s)},a))}Qe.displayName=le.Content.displayName,et.displayName="DialogHeader",tt.displayName="DialogFooter";const st=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Ke(e,["className"]);return t.jsx(le.Title,Object.assign({ref:s,className:De("text-xl font-normal",a)},n))}));st.displayName=le.Title.displayName;const at=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Ke(e,["className"]);return t.jsx(le.Description,Object.assign({ref:s,className:De("text-sm text-subtle p-4",a)},n))}));at.displayName=le.Description.displayName;var nt=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const it={default:"text-default",subtle:"text-subtle",subtler:"text-subtler",subtlest:"text-subtlest",disabled:"text-disabled",inverse:"text-inverse","inverse-primary":"text-inverse-primary","inverse-surface":"text-inverse-surface",static:"text-static","static-black":"text-static-black",brand:"text-brand",critical:"text-critical","critical-bolder":"text-critical-bolder",warning:"text-warning","warning-bolder":"text-warning-bolder",success:"text-success","success-bolder":"text-success-bolder"},rt={1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6"},ot=s.cva("font-semibold",{variants:{size:{"2xl":"text-7xl",xl:"text-5xl",lg:"text-3xl",md:"text-2xl",sm:"text-xl",xs:"text-lg"},color:it,lineClamp:rt},defaultVariants:{size:"lg",color:"default"}}),lt=s.cva("font-medium",{variants:{size:{h1:"text-2xl",h2:"text-xl",h3:"text-lg",h4:"text-base",h5:"text-sm"},color:it,lineClamp:rt},defaultVariants:{size:"h1",color:"default"}}),dt=s.cva("text-default",{variants:{size:{sm:"text-xs",lg:"text-sm"},color:it,lineClamp:rt},defaultVariants:{size:"lg",color:"default"}}),ct=s.cva("",{variants:{size:{xs:"text-xs",sm:"text-sm",lg:"text-base"},weight:{regular:"font-normal",medium:"font-medium",semibold:"font-semibold"},color:it,lineClamp:rt},defaultVariants:{size:"lg",weight:"regular",color:"default"}}),ut=s.cva("",{variants:{size:{lg:"text-xs",sm:"text-2xs"},weight:{regular:"font-normal",medium:"font-medium"},color:it,lineClamp:rt},defaultVariants:{size:"lg",weight:"regular",color:"subtler"}}),pt={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},mt={p:"p",blockquote:"blockquote",span:"span",code:"code",bold:"b",italic:"i",strikethrough:"s",underline:"u"},gt=({underline:e=!1,strikethrough:t=!1,strong:s=!1,italic:a=!1},n="p")=>mt[e&&"underline"||t&&"strikethrough"||s&&"bold"||a&&"italic"||n],ft=e=>r.sanitize(`${e}`,{ADD_ATTR:["target"],FORBID_TAGS:["style","form","input","checkbox","svg"],FORBID_ATTR:["action"]}),ht=oe.forwardRef(((e,s)=>{const{className:a,size:n,color:i,lineClamp:r,children:o,dangerous:l}=e,d=nt(e,["className","size","color","lineClamp","children","dangerous"]),c=pt[n||"h1"],u=l&&ft(`${o}`);return t.jsx(c,Object.assign({ref:s,className:De(lt({size:n,color:i,lineClamp:r}),a)},d,l&&{dangerouslySetInnerHTML:{__html:`${u}`}},{children:l?null:o}))})),vt=oe.forwardRef(((e,s)=>{const{className:a,size:n,lineClamp:i,underline:r,strikethrough:l,strong:d,italic:c,children:u,dangerous:p}=e,m=nt(e,["className","size","lineClamp","underline","strikethrough","strong","italic","children","dangerous"]),g=gt({underline:r,strikethrough:l,strong:d,italic:c},"span"),f=p&&ft(`${u}`);return t.jsx(g,Object.assign({ref:s,className:De(ot({size:n,lineClamp:i}),a)},o.omit(m,"lineClamp"),p&&{dangerouslySetInnerHTML:{__html:`${f}`}},{children:p?null:u}))}));oe.forwardRef(((e,s)=>{const{className:a,size:n,children:i,lineClamp:r}=e,o=nt(e,["className","size","children","lineClamp"]);return t.jsx("p",Object.assign({ref:s,className:De(dt({size:n,lineClamp:r}),a)},o,{children:i}))}));const Et=oe.forwardRef(((e,s)=>{const{className:a,size:n,weight:i,color:r,lineClamp:l,underline:d,strikethrough:c,strong:u,italic:p,children:m,dangerous:g}=e,f=nt(e,["className","size","weight","color","lineClamp","underline","strikethrough","strong","italic","children","dangerous"]),h=gt({underline:d,strikethrough:c,strong:u,italic:p},"span"),v=g&&ft(`${m}`);return t.jsx(h,Object.assign({ref:s,className:De(ct({size:n,weight:i,color:r,lineClamp:l}),a)},o.omit(f,"lineClamp"),g&&{dangerouslySetInnerHTML:{__html:`${v}`}},{children:g?null:m}))}));function St({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}oe.forwardRef(((e,s)=>{const{className:a,size:n,weight:i,color:r,lineClamp:o,underline:l,strikethrough:d,strong:c,italic:u,children:p,dangerous:m}=e,g=nt(e,["className","size","weight","color","lineClamp","underline","strikethrough","strong","italic","children","dangerous"]),f=gt({underline:l,strikethrough:d,strong:c,italic:u},"p"),h=m&&ft(`${p}`);return t.jsx(f,Object.assign({ref:s,className:De(ct({size:n,weight:i,color:r,lineClamp:o}),a)},g,m&&{dangerouslySetInnerHTML:{__html:`${h}`}},{children:m?null:p}))})),oe.forwardRef(((e,s)=>{const{className:a,size:n,weight:i,color:r,lineClamp:l,underline:d,strikethrough:c,strong:u,italic:p,children:m,dangerous:g}=e,f=nt(e,["className","size","weight","color","lineClamp","underline","strikethrough","strong","italic","children","dangerous"]),h=gt({underline:d,strikethrough:c,strong:u,italic:p},"span"),v=g&&ft(`${m}`);return t.jsx(h,Object.assign({ref:s,className:De(ut({size:n,weight:i,color:r,lineClamp:l}),a)},o.omit(f,"lineClamp"),g&&{dangerouslySetInnerHTML:{__html:`${v}`}},{children:g?null:m}))}));const Tt=oe.forwardRef(St);function _t({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const bt=oe.forwardRef(_t);function It({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const xt=oe.forwardRef(It);function wt({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const Nt=oe.forwardRef(wt),yt=process.env.NEXT_PUBLIC_API_URL;process.env.NEXT_PUBLIC_WS_API_URL,process.env.NEXT_PUBLIC_PARTICLE_PROJECT_ID,process.env.NEXT_PUBLIC_PARTICLE_APP_ID,process.env.NEXT_PUBLIC_PARTICLE_CLIENT_ID,process.env.NEXT_PUBLIC_WC_PROJECT_ID,process.env.NEXT_PUBLIC_CDN_URL,process.env.NEXT_PUBLIC_HTML2IMAGE_URL,process.env.NEXT_PUBLIC_TG_BOT_NAME,process.env.NEXT_PUBLIC_DISCORD_CLIENT_ID,process.env.NEXT_PUBLIC_DISCORD_REDIRECT_URL,process.env.NEXT_PUBLIC_TWITTER_CLIENT_ID,process.env.NEXT_PUBLIC_TWITTER_REDIRECT_URL,process.env.NEXT_PUBLIC_TWITTER_CODE_CHALLENGE,process.env.NEXT_PUBLIC_DISABLE_GA,process.env.NEXT_PUBLIC_DISABLE_ADS,process.env.NEXT_PUBLIC_DATAFLUX_RUM_ID,process.env.NEXT_PUBLIC_DISABLE_DATAFLUX_RUM,process.env.NEXT_PUBLIC_DATAFLUX_RUM_ORIGIN,process.env.NEXT_PUBLIC_CAPTCHA_ID,process.env.NEXT_PUBLIC_UPDATE_REPORT_ADDRESS,process.env.NEXT_PUBLIC_DISABLE_SENSORS_TRACK,process.env.NEXT_PUBLIC_DISABLE_ANALYTICS,process.env.NEXT_PUBLIC_SALT,process.env.NEXT_PUBLIC_APP_URL,process.env.NEXT_PUBLIC_SENSORS_URL;const Ot=process.env.NEXT_PUBLIC_NETEASE_ENGINE_APP_ID;process.env.NEXT_PUBLIC_WEB3_API_URL,process.env.NEXT_PUBLIC_CONTRACT_ADDRESS_STAKING,process.env.NEXT_PUBLIC_SENSORS_ABTEST,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_VAPID_KEY,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_APIKEY,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_AUTHDOMAIN,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_PROJECTID,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_STORAGEBUCKET,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_MESSAGINGSENDERID,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_APPID,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_MEASUREMENTID;const Ct=process.env.NEXT_PUBLIC_TRANSLATOR_BOT_ID;var Mt,At,Pt;!function(e){e.RUNNING_ERROR_TYPE_UNSPECIFIED="RUNNING_ERROR_TYPE_UNSPECIFIED",e.RUNNING_ERROR_TYPE_ENGINE_ERROR="RUNNING_ERROR_TYPE_ENGINE_ERROR",e.RUNNING_ERROR_TYPE_INNER_COMPONENT_ERROR="RUNNING_ERROR_TYPE_INNER_COMPONENT_ERROR",e.RUNNING_ERROR_TYPE_ENERGY_INSUFFICIANT="RUNNING_ERROR_TYPE_ENERGY_INSUFFICIANT",e.RUNNING_ERROR_TYPE_LLM_TOKEN_TOO_LONG="RUNNING_ERROR_TYPE_LLM_TOKEN_TOO_LONG"}(Mt||(Mt={})),function(e){e.DONE="DONE",e.PROCESSING="PROCESSING",e.ERROR="ERROR"}(At||(At={})),function(e){e.AUTH_FAIL="auth_fail",e.MSG_ERROR="message_error",e.MSG_SENT="message_sent",e.REPLY_MSG_CREATED="reply_message_created",e.MSG_UPDATED="message_updated",e.MSG_TEXT_STREAM="text_stream",e.MSG_AUDIO_STREAM="audio_stream",e.MSG_REPLIED="message_replied",e.MSG_TRANSLATED="message_translated",e.TRANSLATION_STREAM="translation_stream",e.ENERGY_INFO="energy_info",e.NO_ENOUGH_ENERGY="no_enough_energy",e.EXCEPTION="exception",e.RESET_MEMORY="reset_memory",e.BOT_PROMPT_UPDATED="bot_prompt_updated",e.CONNECTED_TO_DISCORD="connected_to_discord",e.CONNECTED_TO_TWITTER="connected_to_twitter",e.NEED_VERIFY_CAPTCHA="need_verify_captcha",e.VOICE_CALL_END="voice_call_end",e.CHAT_LOGIN_POPUP="chat_login_popup"}(Pt||(Pt={}));var Lt;function Dt(e,t){return(null==e?void 0:e.includes("image/user/avatar"))?function(e){if(!Rt(e)||!(e||"").trim())return e;if(e.startsWith("http"))return e;return`https://image.myshell.ai/${e}`}(e):Rt(e)&&(e||"").trim()?e.startsWith("http")?e:`${t}${e}`:e}function Rt(e){return"string"==typeof e||e instanceof String}function jt(e){return null==e||void 0===e}function kt(){return h.v4()}function Bt(e){if(isNaN(e)||e===1/0)return"";return function(e){const t=Math.floor(e/60),s=e%60;return`${(t<10&&t>0?"0":"")+t}:${s<10?"0":""}${s}`}(Math.floor(e))}function Ut(e){const t=e.split(".");return t.length>1?t[t.length-1].toLowerCase():""}function Gt(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}!function(e){e.UNSPECIFIED="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_UNSPECIFIED",e.AUTO="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_AUTO",e.EN="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_EN",e.ZH="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_ZH",e.JA="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_JA",e.RU="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_RU",e.ES="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_ES",e.KO="BOT_CHAT_SETTING_SPEAKING_LANGUAGE_KO"}(Lt||(Lt={}));const Ft=(e,t)=>{if(!e||!t)return 0;const s=e/t;return s>=1?1:s},zt=e=>!e||0===Object.keys(e).length;function Yt({tProps:e,customProps:s}){const{type:a,title:n,content:i,isClosable:r=!1,translateInToast:o}=s,{visible:d,id:c}=e,u=l.useTranslations(),p=Rt(i)?i:JSON.stringify(i);return t.jsx(t.Fragment,{children:t.jsx(v.ScaleFade,{initialScale:.8,in:d,className:"z-[10000000]",children:t.jsx(v.Alert,{id:c,borderRadius:"12px",bg:"#FAFBFB",backdropFilter:"blur(37px)",border:"1px solid var(--outline)",minH:"44px",w:"fit-content",maxW:{base:"full",md:"560px"},className:"z-[10000000]",children:t.jsxs(v.Flex,{alignItems:"center",w:"full",className:"space-x-3",children:[a&&t.jsxs(v.Flex,{alignItems:"center",flexShrink:0,children:["info"===a&&t.jsx(xt,{className:"text-[#0DA8FC] w-5 h-5"}),"success"===a&&t.jsx(Tt,{className:"text-[#0EE08B] w-5 h-5"}),"warning"===a&&t.jsx(bt,{className:"text-[#FAAC00] w-5 h-5"}),"error"===a&&t.jsx(Nt,{className:"text-[#F1285B] w-5 h-5"})]}),t.jsxs(v.Box,{flexGrow:"1",overflow:"hidden",className:"flex flex-col",children:[n&&t.jsx("div",{className:"text-on-surface",children:n}),t.jsx("div",{className:de.default({"text-sm mt-[2px]":!!n,"text-base text-[#202233]":!n}),children:o?u(p):p})]}),r&&t.jsx(v.CloseButton,{onClick:()=>W.toast.dismiss(c),w:"20px",h:"20px",color:"var(--on-surface-variant)",borderRadius:"full"})]})})})})}function Vt(){const s=e.useCallback(((e,s)=>{e.id&&W.toast.remove(e.id),W.toast.custom((a=>t.jsx(Yt,{tProps:Object.assign(Object.assign({},a),{duration:s}),customProps:e})),{id:e.id})}),[]),a=e.useCallback((e=>s(Object.assign(Object.assign({},e),{type:"success"}))),[]),n=e.useCallback((e=>s(Object.assign(Object.assign({},e),{type:"error"}))),[]),i=e.useCallback((e=>s(Object.assign(Object.assign({},e),{type:"warning"}))),[]),r=e.useCallback(((e,t)=>s(Object.assign(Object.assign({},e),{type:"info"}),t)),[]),o=e.useCallback((e=>{W.toast.dismiss(e)}),[]);return{addToast:s,success:a,error:n,warning:i,info:r,close:o}}class Ht{static _toast(e){e.id&&W.toast.remove(e.id);W.toast.custom((s=>t.jsx(Yt,{tProps:s,customProps:e})),{id:e.id})}static success(e){return this._toast(Object.assign(Object.assign({},e),{type:"success"}))}static error(e){return this._toast(Object.assign(Object.assign({},e),{type:"error"}))}static info(e){return this._toast(Object.assign(Object.assign({},e),{type:"info"}))}static warning(e){return this._toast(Object.assign(Object.assign({},e),{type:"warning"}))}static close(e){W.toast.dismiss(e)}}var Wt=Object.freeze({__proto__:null,Message:Ht,useNotification:Vt});const $t=(e,t,s,a=!0)=>{const[n,i]=d.useCopyToClipboard(),{success:r,error:o}=Vt(),c=l.useTranslations("common");return{onCopy:t=>{let s=e;t&&(s=t),i(s),a&&r({content:c("copied"),id:"text-copied"})},onCopyImage:t=>{let s=e;t&&(s=t);const a=new Image;a.crossOrigin="anonymous",a.src=s,a.onload=()=>{try{const e=document.createElement("canvas");e.width=a.width,e.height=a.height;const t=e.getContext("2d");null==t||t.drawImage(a,0,0),e.toBlob((e=>{if(e){const t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]),r({content:c("copied")})}}))}catch(e){o({content:`${c("copy_failed")} ${null==e?void 0:e.message}`})}}},value:n}};var Kt=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const qt=oe.forwardRef(((e,s)=>{var{className:a,orientation:n="horizontal",decorative:i=!0}=e,r=Kt(e,["className","orientation","decorative"]);return t.jsx(ce.Root,Object.assign({ref:s,decorative:i,orientation:n,className:De("shrink-0 border-default","horizontal"===n?"border-b w-full ":"h-full  border-r",a)},r))}));function Xt({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}qt.displayName=ce.Root.displayName;const Jt=oe.forwardRef(Xt);function Zt({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z",clipRule:"evenodd"}))}const Qt=oe.forwardRef(Zt);function es({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"}))}const ts=oe.forwardRef(es);function ss({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z",clipRule:"evenodd"}))}const as=oe.forwardRef(ss);function ns({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const is=oe.forwardRef(ns);function rs({className:e}){return t.jsxs("svg",{strokeWidth:"0",viewBox:"0 0 24 24",className:e,focusable:"false",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{fill:"none",d:"M0 0h24v24H0V0zm0 0h24v24H0V0z"}),t.jsx("path",{d:"M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z",fill:"currentColor"})]})}var os=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const ls=s.cva("shrink-0 inline-flex items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors ring-offset-surface-default focus-visible:outline-none focus-visible:shadow-none focus-visible:ring-2 focus-visible:ring-brand focus-visible:ring-offset-1 disabled:pointer-events-none disabled:opacity-30 disabled:shadow-none",{variants:{variant:{primary:"bg-surface-primary-default text-static shadow-button-primary hover:bg-surface-primary-hovered active:bg-surface-primary-pressed",outline:"border border-default text-subtle shadow-button-basic hover:bg-surface-hovered focus:bg-surface-pressed active:shadow-button-pressed",ghost:"text-default hover:bg-surface-hovered active:bg-surface-pressed"},color:{default:"",brand:"",warning:"",error:"",gray:""},size:{sm:"h-7 w-7 text-sm",md:"h-9 w-9 text-sm",lg:"h-11 w-11"}},compoundVariants:[{variant:"primary",color:"default",className:"text-brand bg-surface-search-field border border-default hover:bg-surface-hovered active:bg-surface-pressed shadow-button-basic"},{variant:"primary",color:"brand",className:"bg-surface-primary-default hover:bg-surface-primary-hovered active:bg-surface-primary-pressed"},{variant:"primary",color:"warning",className:"bg-surface-warning-default hover:bg-surface-warning-hovered active:bg-surface-warning-pressed"},{variant:"primary",color:"error",className:"bg-surface-critical-default hover:bg-surface-critical-hovered active:bg-surface-critical-pressed"},{variant:"primary",color:"gray",className:"text-subtle bg-surface-search-field border border-default hover:bg-surface-hovered active:bg-surface-pressed shadow-button-basic"},{variant:"outline",color:"default",className:"border-default text-subtle shadow-button-basic active:shadow-button-pressed"},{variant:"outline",color:"brand",className:"border-surface-primary-default text-brand"},{variant:"outline",color:"warning",className:"border-surface-warning-default text-warning hover:bg-surface-warning-subtle-hovered active:bg-surface-warning-subtle-pressed"},{variant:"outline",color:"error",className:"border-surface-critical-default text-critical hover:bg-surface-critical-subtle-hovered active:bg-surface-critical-subtle-pressed"},{variant:"outline",color:"gray",className:"text-subtle hover:bg-surface-hovered active:shadow-button-pressed"},{variant:"ghost",color:"default",className:"text-subtle"},{variant:"ghost",color:"brand",className:"text-brand"},{variant:"ghost",color:"warning",className:"text-warning focus:shadow-rings-warning"},{variant:"ghost",color:"error",className:"text-critical focus:shadow-rings-error"},{variant:"ghost",color:"gray",className:"text-subtler hover:text-subtler"}],defaultVariants:{variant:"primary",color:"brand",size:"lg"}}),ds=oe.forwardRef(((e,s)=>{var{className:i,variant:r,size:o,color:l,asChild:d=!1,loading:c=!1,children:u,icon:p,disabled:m}=e,g=os(e,["className","variant","size","color","asChild","loading","children","icon","disabled"]);const f=d?a.Slot:"button",h=De({"w-4.5 h-4.5":"sm"===o,"w-5.5 h-5.5":"md"===o,"w-6 h-6":"lg"===o}),v=m||c;return t.jsx(f,Object.assign({className:De(ls({variant:r,size:o,color:l}),v&&"cursor-not-allowed !pointer-events-auto",i),ref:s,disabled:v},g,{children:c?t.jsx(n.Loader2,{className:De("animate-spin",h)}):p?t.jsx(p,{className:h}):oe.isValidElement(u)?oe.cloneElement(u,{className:De(h,u.props.className)}):null}))}));function cs({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const us=oe.forwardRef(cs);function ps({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ms=oe.forwardRef(ps);var gs=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const fs=ue.Root,hs=ue.Trigger,vs=oe.forwardRef(((e,s)=>{var{className:a,inset:i,children:r}=e,o=gs(e,["className","inset","children"]);return t.jsxs(ue.SubTrigger,Object.assign({ref:s,className:De("flex cursor-default select-none items-center rounded-lg px-3 py-2 outline-none focus:bg-surface-container-selected-default data-[state=open]:bg-surface-container-selected-default",i&&"pl-8",a)},o,{children:[r,t.jsx(n.ChevronRight,{className:"ml-auto h-4 w-4"})]}))}));vs.displayName=ue.SubTrigger.displayName;const Es=oe.forwardRef(((e,s)=>{var{className:a}=e,n=gs(e,["className"]);return t.jsx(ue.SubContent,Object.assign({ref:s,className:De("z-50 min-w-[8rem] overflow-hidden rounded-xl border border-alpha bg-surface-search-field p-2 text-default shadow-modal-default data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a)},n))}));Es.displayName=ue.SubContent.displayName;const Ss=oe.forwardRef(((e,s)=>{var{className:a,sideOffset:n=4}=e,i=gs(e,["className","sideOffset"]);return t.jsx(ue.Portal,{children:t.jsx(ue.Content,Object.assign({ref:s,sideOffset:n,className:De("z-50 min-w-[8rem] overflow-hidden rounded-xl border border-opaque bg-surface-search-field p-2 text-default shadow-modal-default data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a)},i))})}));Ss.displayName=ue.Content.displayName;const Ts=oe.forwardRef(((e,s)=>{var{className:a,inset:n}=e,i=gs(e,["className","inset"]);return t.jsx(ue.Item,Object.assign({ref:s,className:De("relative flex cursor-default select-none items-center rounded-lg px-3 py-2 outline-none transition-colors focus:bg-surface-container-selected-default data-[disabled]:pointer-events-none data-[disabled]:opacity-30",n&&"pl-8",a)},i))}));Ts.displayName=ue.Item.displayName;const _s=oe.forwardRef(((e,s)=>{var{className:a,children:i,checked:r}=e,o=gs(e,["className","children","checked"]);return t.jsxs(ue.CheckboxItem,Object.assign({ref:s,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-30",a),checked:r},o,{children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(ue.ItemIndicator,{children:t.jsx(n.Check,{className:"h-4 w-4"})})}),i]}))}));_s.displayName=ue.CheckboxItem.displayName;const bs=oe.forwardRef(((e,s)=>{var{className:a,children:i}=e,r=gs(e,["className","children"]);return t.jsxs(ue.RadioItem,Object.assign({ref:s,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",a)},r,{children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(ue.ItemIndicator,{children:t.jsx(n.Circle,{className:"h-2 w-2 fill-current"})})}),i]}))}));bs.displayName=ue.RadioItem.displayName;const Is=oe.forwardRef(((e,s)=>{var{className:a,inset:n}=e,i=gs(e,["className","inset"]);return t.jsx(ue.Label,Object.assign({ref:s,className:De("px-3 py-1 text-sm font-medium",n&&"pl-8",a)},i))}));Is.displayName=ue.Label.displayName;const xs=oe.forwardRef(((e,s)=>{var{className:a}=e,n=gs(e,["className"]);return t.jsx(ue.Separator,Object.assign({ref:s,className:De("h-px bg-border-default",a)},n))}));function ws({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}xs.displayName=ue.Separator.displayName;const Ns=oe.forwardRef(ws),ys=s.cva("animate-spin",{variants:{size:{"2xs":"h-3.5 w-3.5",xs:"h-4 w-4",sm:"h-5 w-5",md:"h-6 w-6",lg:"h-9 w-9"},speed:{slow:"duration-2000",default:"duration-600",fast:"duration-500"},color:{default:"text-default",brand:"text-brand",static:"text-static",warning:"text-warning",success:"text-success"}},defaultVariants:{size:"md",speed:"default",color:"default"}});function Os(e){const{size:s,speed:a,color:i,className:r}=e;return t.jsx(n.Loader2,{className:De(ys({size:s,speed:a,color:i}),r)})}const Cs=new class{constructor(){}getIsKol(){return"1"===localStorage.getItem("kol")}setIsKol(e){localStorage.setItem("kol",e?"1":"0")}setIsFirstToAIpp(e){localStorage.setItem("isFirstToAIpp",e.toString())}getIsFirstToAIpp(){return localStorage.getItem("isFirstToAIpp")||void 0}setIsViewedHowToPlay(e){localStorage.setItem("isViewedHowToPlay",e.toString())}getIsViewedHowToPlay(){return localStorage.getItem("isViewedHowToPlay")||void 0}getMySoulCount(){return Number(localStorage.getItem("mySoulCount"))||0}getUserPublicKey(){return localStorage.getItem("publicKey")}setUserPublicKey(e){localStorage.setItem("publicKey",(e=>{const t=/-----BEGIN RSA PUBLIC KEY-----\n([\s\S]+)\n-----END RSA PUBLIC KEY-----/.exec(e);if(t&&t.length>1)return t[1];throw new Error("Invalid public key format.")})(e))}getLoginMethod(){return localStorage.getItem("loginMethod")}getPrivyToken(){return localStorage.getItem("privy:token")}getToken(){return localStorage.getItem("token")}setToken(e){e?(localStorage.setItem("token",e),document.cookie=`token=${e}; path=/; max-age=31536000`):(localStorage.removeItem("token"),document.cookie="token=; path=/; max-age=0")}getKol(){return localStorage.getItem("kol")}setKol(e){localStorage.setItem("kol",null!=e?e:"")}getChannel(){return localStorage.getItem("Channel")}setChannel(e){localStorage.setItem("Channel",null!=e?e:"")}getLanguage(){return localStorage.getItem("language")}setLanguage(e){localStorage.setItem("language",null!=e?e:"en")}getVersionTip(){return localStorage.getItem("version_tip")}setVersionTip(e){localStorage.setItem("version_tip",null!=e?e:"")}getInviteCode(){return localStorage.getItem("inviteCode")}setInviteCode(e){e?localStorage.setItem("inviteCode",e):localStorage.removeItem("inviteCode")}getPageSearch(e){return sessionStorage.getItem(`${e}-searchparams`)}setPageSearch(e,t){t?sessionStorage.setItem(`${e}-searchparams`,t):sessionStorage.removeItem(`${e}-searchparams`)}getFromWeb3(){return localStorage.getItem("fromWeb3")}setFromWeb3(e){e?localStorage.setItem("fromWeb3",e):localStorage.removeItem("fromWeb3")}getSharingArticleCode(){return localStorage.getItem("sharingArticleCode")}setSharingArticleCode(e){e?localStorage.setItem("sharingArticleCode",e):localStorage.removeItem("sharingArticleCode")}getSharingForumCode(){return localStorage.getItem("sharingForumCode")}setSharingForumCode(e){e?localStorage.setItem("sharingForumCode",e):localStorage.removeItem("sharingForumCode")}getSharingWidgetCode(){return localStorage.getItem("sharingWidgetCode")}setSharingWidgetCode(e){e?localStorage.setItem("sharingWidgetCode",e):localStorage.removeItem("sharingWidgetCode")}getSharingBotCode(){return localStorage.getItem("sharingBotCode")}setSharingBotCode(e){e?localStorage.setItem("sharingBotCode",e):localStorage.removeItem("sharingBotCode")}getSharingBabelBotCode(){return localStorage.getItem("sharingBabelBotCode")}setSharingBabelBotCode(e){e?localStorage.setItem("sharingBabelBotCode",e):localStorage.removeItem("sharingBabelBotCode")}getSharingRoomCode(){return localStorage.getItem("sharingRoomCode")}setSharingRoomCode(e){e?localStorage.setItem("sharingRoomCode",e):localStorage.removeItem("sharingRoomCode")}getSharingBotId(){return localStorage.getItem("sharingBotId")}setSharingBotId(e){e?localStorage.setItem("sharingBotId",e):localStorage.removeItem("sharingBotId")}getRandomVisitorId(){return localStorage.getItem("visitorId")}setRandomVisitorId(e){e?localStorage.setItem("visitorId",e):null===localStorage||void 0===localStorage||localStorage.removeItem("visitorId")}getAnonymousId(){return localStorage.getItem("mix_sc_anonymous_id")}setAnonymousId(e){e?localStorage.setItem("mix_sc_anonymous_id",e):null===localStorage||void 0===localStorage||localStorage.removeItem("mix_sc_anonymous_id")}getSCDeviceId(){return localStorage.getItem("mix_sc_device_id")}setSCDeviceId(e){e?localStorage.setItem("mix_sc_device_id",e):null===localStorage||void 0===localStorage||localStorage.removeItem("mix_sc_device_id")}getUserId(){return localStorage.getItem("userId")}setUserId(e){jt(e)?localStorage.removeItem("userId"):localStorage.setItem("userId",e)}getPublicAddress(){return localStorage.getItem("publicAddress")||null}setPublicAddress(e){jt(e)?localStorage.removeItem("publicAddress"):localStorage.setItem("publicAddress",`${e}`)}getYidunValidate(){var e;return null!==(e=localStorage.getItem("yidun_validate"))&&void 0!==e?e:void 0}setYidunValidate(e){localStorage.setItem("yidun_validate",e)}setShareWidgetLink(e){e?localStorage.setItem("shareWidgetLink",e):localStorage.removeItem("shareWidgetLink")}getShareWidgetLink(){var e;return null!==(e=localStorage.getItem("shareWidgetLink"))&&void 0!==e?e:void 0}setInviteInfo(e){return localStorage.setItem("inviteLink",e)}getInviteInfo(){var e;return null!==(e=localStorage.getItem("inviteLink"))&&void 0!==e?e:void 0}removeInviteInfo(){localStorage.removeItem("inviteLink")}setTgGuid(e){localStorage.setItem("tgGuid",e)}getTgGuid(){var e;return null!==(e=localStorage.getItem("tgGuid"))&&void 0!==e?e:void 0}setAutoEnhanced(e){localStorage.setItem("autoEnhanced",e)}getAutoEnhanced(){var e;return null!==(e=localStorage.getItem("autoEnhanced"))&&void 0!==e?e:void 0}setTryAdvanced(e){localStorage.setItem("tryAdvanced",e)}getTryAdvanced(){var e;return null!==(e=localStorage.getItem("tryAdvanced"))&&void 0!==e?e:void 0}setHasPrivyMarquee(e){const t=localStorage.getItem("userId");localStorage.setItem(`hasPrivyMarquee-${t}`,e)}getHasPrivyMarquee(){var e;const t=localStorage.getItem("userId");return null!==(e=localStorage.getItem(`hasPrivyMarquee-${t}`))&&void 0!==e?e:void 0}setUserGuide(e){const t=localStorage.getItem("userId");localStorage.setItem(`userGuide-${t}`,e)}getChatDrivered(){var e;return null!==(e=localStorage.getItem("handleOpenDrivered"))&&void 0!==e?e:void 0}setChatDrivered(e){localStorage.setItem("handleOpenDrivered",e)}getUserGuide(){var e;const t=localStorage.getItem("userId");return null!==(e=localStorage.getItem(`userGuide-${t}`))&&void 0!==e?e:void 0}clearTgGuid(){localStorage.removeItem("tgGuid")}setNeteaseVisitorId(e){localStorage.setItem("netease-visitor-id",e)}getNeteaseVisitorId(){return localStorage.getItem("netease-visitor-id")}clearInvitationData(){this.removeInviteInfo(),localStorage.removeItem("inviteCode"),localStorage.removeItem("sharingBotCode"),localStorage.removeItem("sharingBotUid"),localStorage.removeItem("sharingBotId"),localStorage.removeItem("sharingWidgetCode"),localStorage.removeItem("sharingArticleCode")}setBlockChainTransactionCalled(e,t,s){let a={};const n=this.getBlockChainTransactionCalled();n&&(a=Object.assign({},JSON.parse(n))),a[`${e}`]={step:t,expireTimeStamp:s},localStorage.setItem("blockChainTransactionCalled",JSON.stringify(a))}clearBlockChainTransactionCalled(e){let t={};const s=this.getBlockChainTransactionCalled();s&&(t=Object.assign({},JSON.parse(s))),delete t[`${e}`],localStorage.setItem("blockChainTransactionCalled",JSON.stringify(t))}getBlockChainTransactionCalled(){return localStorage.getItem("blockChainTransactionCalled")}setBlockChainGuruStep(e,t){let s={};const a=this.getBlockChainGuruStep();a&&(s=Object.assign({},JSON.parse(a))),s[e]=`${t}`,localStorage.setItem("blockChainGuruStep",JSON.stringify(s))}getBlockChainGuruStep(){return localStorage.getItem("blockChainGuruStep")}setBlockChainGuruHash(e,t){let s={};const a=this.getBlockChainGuruHash();a&&(s=Object.assign({},JSON.parse(a))),s[`${e}`]=t,localStorage.setItem("blockChainGuruHash",JSON.stringify(s))}clearBlockChainGuruHash(e){let t={};const s=this.getBlockChainGuruHash();s&&(t=Object.assign({},JSON.parse(s))),delete t[`${e}`],localStorage.setItem("blockChainGuruHash",JSON.stringify(t))}getBlockChainGuruHash(){return localStorage.getItem("blockChainGuruHash")}getLoginPopup(){return localStorage.getItem("loginPopup")}setLoginPopup(e){e?localStorage.setItem("loginPopup",e):localStorage.removeItem("loginPopup")}setTheme(e){localStorage.setItem("theme",e)}getTheme(){return localStorage.getItem("theme")}setTransactionDisplaySet(e){return localStorage.setItem("transactionDisplaySet",JSON.stringify(Array.from(e)))}setWidgetTransactionDisplaySet(e){return localStorage.setItem("widgetTransactionDisplaySet",JSON.stringify(Array.from(e)))}getTransactionDisplaySet(){return jt(localStorage.getItem("transactionDisplaySet"))?new Set:new Set(JSON.parse(localStorage.getItem("transactionDisplaySet")))}getTextInputMap(){const e=localStorage.getItem("textInputMap");return jt(e)?{}:JSON.parse(e)}getWidgetTextInputMap(){const e=localStorage.getItem("widgetTextInputMap");return jt(e)?{}:JSON.parse(e)}setTextInputMap(e){localStorage.setItem("textInputMap",JSON.stringify(e))}setWidgetTextInputMap(e){localStorage.setItem("widgetTextInputMap",JSON.stringify(e))}removeTextInputMap(){localStorage.removeItem("textInputMap")}removeWidgetTextInputMap(){localStorage.removeItem("widgetTextInputMap")}setFilterValues(e){const t=localStorage.getItem("userId");localStorage.setItem(`filterValues_${t}`,JSON.stringify(e))}getFilterValues(){const e=localStorage.getItem("userId"),t=localStorage.getItem(`filterValues_${e}`);return jt(t)?{}:JSON.parse(t)}setChildTagsObj(e){const t=localStorage.getItem("userId");localStorage.setItem(`childTagsObj_${t}`,JSON.stringify(e))}getChildTagsObj(){const e=localStorage.getItem("userId"),t=localStorage.getItem(`childTagsObj_${e}`);return jt(t)?{}:JSON.parse(t)}setCreateDraft(e){const t=localStorage.getItem("userId");null===e&&localStorage.removeItem(`createDraft${t}`),localStorage.setItem(`createDraft${t}`,JSON.stringify(e))}getCreateDraft(){const e=localStorage.getItem("userId"),t=localStorage.getItem(`createDraft${e}`);return jt(t)?null:JSON.parse(t)}clearAll(e){const t=localStorage.getItem("userId");e&&this.clearInvitationData(),localStorage.removeItem("publicAddress"),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("selected_bot_id"),localStorage.removeItem("selected_ugc_bot_id"),localStorage.removeItem("language"),localStorage.removeItem("yidun_validate"),localStorage.removeItem(`filterValues_${t}`),localStorage.removeItem(`childTagsObj_${t}`),localStorage.removeItem("sharingWidgetCode"),localStorage.removeItem("fromWeb3"),localStorage.removeItem("loginMethod"),localStorage.removeItem("mySoulCount"),localStorage.removeItem("publicKey")}};const Ms={en:"en",zh:"zh-CN","zh-tw":"zh-TW",es:"es",jp:"ja",ru:"ru",ko:"ko"};function As(e){if("challenge"===e){const e=window.location.href,t=function(){const{pathname:e}=window.location,t=e.split("/")[1];let s;return Le.includes(t)&&(s=t),s}(),s=Cs.getUserId(),a=Cs.getRandomVisitorId(),n=s?`userId=${s}`:`visitorId=${a}`,i=`${window.location.origin}${t?`/${t}`:""}/cf-captcha?originHref=${e}&${n}`;window.location.href=i}}const Ps={events:{},dispatch(e,t){this.events[e]&&this.events[e].forEach((e=>e(t)))},subscribe(e,t,s){this.events[e]||(this.events[e]=[]);let a=t;s&&(a=s=>{t(s),this.unSubscribe(e)}),this.events[e].push(a)},unSubscribe(e,t){t?this.events[e]&&(this.events[e]=this.events[e].filter((e=>e!==t))):delete this.events[e]}};const Ls=new class{constructor(){}track(e,t){var s;null===(s=null===window||void 0===window?void 0:window.sensors)||void 0===s||s.track(e,Object.assign({},t||{}))}setOnceProfile(e){null===window||void 0===window||window.sensors.setOnceProfile(Object.assign({},e||{}))}setProfile(e){null===window||void 0===window||window.sensors.setProfile(Object.assign({},e||{}))}login(e){null===window||void 0===window||window.sensors.login(e)}},Ds=`${yt}`;Ce.default.create({baseURL:Ds});const Rs=w.createStore((e=>({modalProps:{},openModal:t=>e({modalProps:Object.assign(Object.assign({},t),{onOk:s=>{var a;null===(a=t.onOk)||void 0===a||a.call(t,s),e({modalProps:{}})},onCancel:()=>{var s;null===(s=t.onCancel)||void 0===s||s.call(t),e({modalProps:{open:!1}})}})})}))),js=Rs.getState().openModal,ks={1:"Now 9 language voices and instant English voice cloning are available! With just 20 seconds of English audio, you can simulate any voice you desire. Click 'Mine' to start cloning!",2:"920Mine",3:"920",4:'Maintenant, 9 voix de langage et une clonage instantan de la voix anglaise sont disponibles ! Avec seulement 20 secondes de son anglais, vous pouvez simuler n\'importe quelle voix que vous dsirez. Cliquez sur "Mine" pour commencer le clonage !',5:"  9         !   20        ,   .  Mine,   !",6:'Agora, 9 vozes de idiomas e clonagem instantnea de voz em ingls esto disponveis! Com apenas 20 segundos de udio em ingls, voc pode simular qualquer voz que desejar. Clique em "Mine" para comear a clonagem!',7:'  9      !  20           .   "Mine"  !',8:'Ahora estn disponibles 9 voces de lenguaje y clonacin instantnea de voz en ingls! Con solo 20 segundos de audio en ingls, puede simular cualquier voz que desee. Haga clic en "Mine" para comenzar la clonacin!',9:'Jetzt stehen 9 Sprachstimmen und eine sofortige englische Sprachklonierung zur Verfgung! Mit nur 20 Sekunden englischem Audio knnen Sie jede gewnschte Stimme simulieren. Klicken Sie auf "Mine", um das Klonen zu starten!'},Bs={1:"How do you think about my voice?  If it doesnt sound right to you, hit the report button and we will get our tech team on it.",4:"Que pensez-vous de ma voix ? Si elle ne vous semble pas correcte, appuyez sur le bouton de signalement et notre quipe technique s'en occupera.",8:"Qu opinas de mi voz? Si no te suena bien, presiona el botn de informe y nuestro equipo tcnico lo revisar."},Us={"/v1/shell_coins/exchange_shell_coin_with_season_points":"Redemption","/v1/shell_coins/exchange_shell_coin_with_badges":"Redemption","/v1/season/task/claim":"ClaimTask","/v1/season/task/claim_all_last_season_points":"ClaimTask","/v1/season/task/claim_all":"ClaimTask","/v2/season/task/claim_all":"ClaimTask","/v1/bot/chat/send_message":"SendMessage","/v2/season/reward/redeem":"Redemption","/v1/season/reward/auto_redeem_and_use_season_pass_if_needed":"ClaimPremiumCard"};process.env.NEXT_PUBLIC_BSC_EXPLORE_URL;"production"===process.env.NEXT_PUBLIC_ENV?$.bsc.id:$.bscTestnet.id;var Gs;!function(e){e.Ethereum="Ethereum",e.BSC="BSC",e.OpBNB="opBNB",e.MyShell_Mainnet="MyShell Mainnet",e.MyShell_Testnet="MyShell Testnet",e.Base="Base"}(Gs||(Gs={})),$.mainnet.id,Gs.Ethereum,$.bsc.id,Gs.BSC,$.bscTestnet.id,Gs.BSC,$.opBNB.id,Gs.OpBNB,Gs.Ethereum,$.mainnet.id,Gs.BSC,Gs.OpBNB,$.opBNB.id,Gs.MyShell_Testnet,Gs.Ethereum,Gs.BSC,Gs.OpBNB,Gs.MyShell_Mainnet,Gs.MyShell_Testnet,Gs.Ethereum,Gs.BSC,Gs.OpBNB,Gs.MyShell_Mainnet,Gs.MyShell_Testnet,Gs.Base;var Fs=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const zs=`${yt}`,Ys=async(e,t)=>{var s,a,n,i,r,o,l;const d=(null==t?void 0:t.production)?`https://api.myshell.ai${e}`:`${zs}${e}`,c=(null==t?void 0:t.params)?`${d}${t.params}`:`${d}`,{body:u,adapter:p,isGoLang:m,hideErrorToast:g,withMyShellSecurityToken:f,allowAnonymous:h,timeout:v,serverContext:E}=t,S=Fs(t,["body","adapter","isGoLang","hideErrorToast","withMyShellSecurityToken","allowAnonymous","timeout","serverContext"]),T=u?u instanceof FormData?{body:u}:{body:JSON.stringify(u)}:{},_=Object.assign({},(null==t?void 0:t.headers)?t.headers:(null==t?void 0:t.body)&&t.body instanceof FormData?{}:{"Content-Type":"application/json"});if(m&&(_["myshell-service-name"]="organics-api"),"undefined"!=typeof window&&!h){const e=Cs.getToken();if(e&&e.trim())_.Authorization=`Bearer ${e}`;else{const e=kt().replace(/-/g,"");let t;const a=null!==(s="undefined"!=typeof window&&Cs.getRandomVisitorId())&&void 0!==s?s:"";t=a||kt(),t&&t.trim()&&(_["visitor-id"]=t);let n=Cs.getSCDeviceId();if(n)n&&n.trim()&&(_["sc-cookie-id"]=n);else{const t=Cs.getAnonymousId();t?n=t:(Cs.setAnonymousId(e),n=e),_["sc-device-id"]=n}}}if("undefined"!=typeof window&&f)try{const e=await(async()=>{null==Ls||Ls.track("ReadyForYiDunToken");const e=(new Date).valueOf();try{const t=createNEGuardian({appId:Ot,timeout:1e4}),{code:s,token:a}=await t.getToken(),n=(new Date).valueOf()-e;if(null==Ls||Ls.track("ObtainYiDunToken",{result:200===s||201===s,time_spent:n}),200===s||201===s)return a;throw new Error("getNeteaseEngineToken Error")}catch(t){const s=(new Date).valueOf()-e;throw null==Ls||Ls.track("ObtainYiDunToken",{result:!1,time_spent:s}),console.error(t),new Error("getNeteaseEngineToken Error")}})();_["myshell-security-token"]=e}catch(e){}_.platform="web",_.version="1.0.0";const b=("undefined"!=typeof window?Cs.getLanguage():(null==E?void 0:E.locale)||(e=>{const t=e.get("accept-language");if(!t||"*"===t)return;const s=t.indexOf("-");if(-1===s)return;return t.substring(0,s)||void 0})(E.headers))||"en";if(_["Accept-Language"]=Ms[b],console.log("api fetch language",Ms[b]),"undefined"==typeof window){if(_["x-call-from"]="myshell-ssr",!_.Authorization){const e=null===(n=null===(a=null==E?void 0:E.cookies)||void 0===a?void 0:a.get("token"))||void 0===n?void 0:n.value;e&&(_.Authorization=`Bearer ${e}`)}_.Authorization||(_["sc-device-id"]||(_["sc-device-id"]="node-server"),_["visitor-id"]||(_["visitor-id"]="node-server"))}_["myshell-client-version"]="v1.5.4",_.timestamp=function(e){const t=(e-e%10)/10;let s=!1,a=0,n=t;for(;n;){const e=n%10;a+=(s?5:2)*e,n=(n-e)/10,s=!s}return 10*t+a%10}((new Date).getTime());const I=v||("undefined"!=typeof window?15e3:5e3),x=new AbortController,w=(null==t?void 0:t.signal)||(I?x.signal:void 0);let N;try{I&&setTimeout((()=>x.abort()),I),N=await fetch(c,Object.assign(Object.assign(Object.assign({},T),S),{headers:_,credentials:"include",signal:w,cache:"no-store"}));const s=N.headers.get("content-type"),a=N.headers.get("content-disposition"),n=!s||-1===s.indexOf("application/json")&&-1===s.indexOf("text/plain")?-1!==(null==a?void 0:a.indexOf("attachment"))?await N.blob():N:await N.json();if(N.status>=200&&N.status<300){if("undefined"!=typeof window){const e=Cs.getToken(),t=N.headers.get("refreshed-auth-token");t&&t!==e&&Cs.setToken(t)}return{success:!0,data:"function"==typeof p?p(n,{lang:b}):n}}if(400===N.status&&"ERROR_REASON_SAFETY_NEED_VERIFY_CAPTCHA"===n.reason)return await new Promise((t=>js({open:!0,onOk:()=>t(),triggerScene:Us[e]}))),await Ys(e,t);if(400!==N.status||g){if(429===N.status&&Ht.error({content:"request.error.rateLimit",translateInToast:!0,id:"request-429"}),403===N.status){As(N.headers.get("cf-mitigated"))}throw{status:N.status,data:n}}throw Ht.error({content:n.message,translateInToast:!0,id:"request-400"}),{status:N.status,data:Object.assign(Object.assign({},n),{reason:"request-400"}),message:n.message}}catch(e){const s=JSON.stringify({url:c,message:(null==e?void 0:e.message)?null==e?void 0:e.message:e,requestId:null===(i=null==N?void 0:N.headers)||void 0===i?void 0:i.get("X-Request-Id"),headers:_});console.error(s),"undefined"!=typeof window&&(async(e,t)=>{let s="request.error.common",a=!0;if(401===(null==e?void 0:e.status)&&Ps.dispatch("Unauthorized",null),null==e?void 0:e.data){const{data:t}=e;(null==t?void 0:t.message)?(s=Array.isArray(t.message)?t.message.join("; "):t.message,a=!1):s="request.error.common"}if(null==t?void 0:t.popupError){Rt(s)||(s="request.error.common");const{Message:e}=await Promise.resolve().then((function(){return Wt}));e.error({content:s,id:s,translateInToast:a})}})(e,Object.assign({url:c},t));let a=(null==e?void 0:e.message)||e;return(null==e?void 0:e.data)&&(a=Array.isArray(null==e?void 0:e.data.message)?e.data.message.join("; "):e.data.message),{success:!1,msg:a,reason:(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.reason)||(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.message),metadata:null===(l=null==e?void 0:e.data)||void 0===l?void 0:l.metadata}}},Vs={get:async(e,t)=>Ys(e,Object.assign(Object.assign({},t),{method:"GET"})),post:async(e,t)=>Ys(e,Object.assign(Object.assign({},t),{method:"POST"})),put:async(e,t)=>Ys(e,Object.assign(Object.assign({},t),{method:"PUT"})),patch:async(e,t)=>Ys(e,Object.assign(Object.assign({},t),{method:"PATCH"})),delete:async(e,t)=>Ys(e,Object.assign(Object.assign({},t),{method:"DELETE"}))};function Hs(e){return Vs.post("/v1/async_job/get_info",{body:{jobId:e},isGoLang:!0})}function Ws(e){return Vs.post("/v1/bot/chat/remove_bot_from_chat_list",{body:{botId:e},isGoLang:!0})}function $s(e){return Vs.post(`/v1/channel/chat/list/delete/${e}`,{isGoLang:!0})}var Ks,qs,Xs,Js,Zs,Qs,ea,ta;function sa(e){return Vs.post("/v1/widget/chat/remove_widget_from_chat_list",{body:{widgetId:e},isGoLang:!0})}!function(e){e.TYPE_NORMAL_TITLE="TYPE_NORMAL_TITLE",e.TYPE_SLIDER="TYPE_SLIDER",e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED"}(Ks||(Ks={})),function(e){e.MEDIA_TYPE_VIDEO="MEDIA_TYPE_VIDEO",e.MEDIA_TYPE_IMAGE="MEDIA_TYPE_IMAGE",e.MEDIA_TYPE_UNSPECIFIED="MEDIA_TYPE_UNSPECIFIED"}(qs||(qs={})),function(e){e.STATUS_UNSPECIFIED="STATUS_UNSPECIFIED",e.STATUS_PUBLIC="STATUS_PUBLIC",e.STATUS_PRIVATE="STATUS_PRIVATE"}(Xs||(Xs={})),function(e){e.BOT_CHAT_PANEL_TYPE_UNSPECIFIED="BOT_CHAT_PANEL_TYPE_UNSPECIFIED",e.BOT_CHAT_PANEL_TYPE_IM="BOT_CHAT_PANEL_TYPE_IM",e.BOT_CHAT_PANEL_TYPE_IMAGE_GEN="BOT_CHAT_PANEL_TYPE_IMAGE_GEN",e.BOT_CHAT_PANEL_TYPE_COMPONENT="BOT_CHAT_PANEL_TYPE_COMPONENT"}(Js||(Js={})),function(e){e.BOT_IM_SLASH_PARAM_TYPE_UNSPECIFIED="BOT_IM_SLASH_PARAM_TYPE_UNSPECIFIED",e.BOT_IM_SLASH_PARAM_TYPE_NUMBER="BOT_IM_SLASH_PARAM_TYPE_NUMBER",e.BOT_IM_SLASH_PARAM_TYPE_STRING="BOT_IM_SLASH_PARAM_TYPE_STRING"}(Zs||(Zs={})),function(e){e.MESSAGE_METADATA_TYPE_UNSPECIFIED="MESSAGE_METADATA_TYPE_UNSPECIFIED",e.MESSAGE_METADATA_TYPE_IMAGE_FILE="MESSAGE_METADATA_TYPE_IMAGE_FILE",e.MESSAGE_METADATA_TYPE_TEXT_FILE="MESSAGE_METADATA_TYPE_TEXT_FILE",e.MESSAGE_METADATA_TYPE_ALL_FILE="MESSAGE_METADATA_TYPE_ALL_FILE",e.MESSAGE_METADATA_TYPE_AUDIO_FILE="MESSAGE_METADATA_TYPE_AUDIO_FILE",e.MESSAGE_METADATA_TYPE_VIDEO_FILE="MESSAGE_METADATA_TYPE_VIDEO_FILE",e.MESSAGE_METADATA_TYPE_TEXT_CONTENT="MESSAGE_METADATA_TYPE_TEXT_CONTENT",e.MESSAGE_METADATA_TYPE_USER_AUDIO="MESSAGE_METADATA_TYPE_USER_AUDIO",e.MESSAGE_METADATA_TYPE_COMPONENT_INPUT="MESSAGE_METADATA_TYPE_COMPONENT_INPUT",e.MESSAGE_METADATA_TYPE_ASYNC_JOB_INFO="MESSAGE_METADATA_TYPE_ASYNC_JOB_INFO"}(Qs||(Qs={})),function(e){e.BOT_IM_COMPONENT_INPUT_TYPE_UNSPECIFIED="BOT_IM_COMPONENT_INPUT_TYPE_UNSPECIFIED",e.BOT_IM_COMPONENT_INPUT_TYPE_FILE_UPLOAD="BOT_IM_COMPONENT_INPUT_TYPE_FILE_UPLOAD",e.BOT_IM_COMPONENT_INPUT_TYPE_VIDEO_UPLOAD="BOT_IM_COMPONENT_INPUT_TYPE_VIDEO_UPLOAD",e.BOT_IM_COMPONENT_INPUT_TYPE_IMAGE_UPLOAD="BOT_IM_COMPONENT_INPUT_TYPE_IMAGE_UPLOAD",e.BOT_IM_COMPONENT_INPUT_TYPE_TEXT_UPLOAD="BOT_IM_COMPONENT_INPUT_TYPE_TEXT_UPLOAD",e.BOT_IM_COMPONENT_INPUT_TYPE_TEXT_INPUT="BOT_IM_COMPONENT_INPUT_TYPE_TEXT_INPUT",e.BOT_IM_COMPONENT_INPUT_TYPE_TEXT_SELECTOR="BOT_IM_COMPONENT_INPUT_TYPE_TEXT_SELECTOR",e.BOT_IM_COMPONENT_INPUT_TYPE_NUMBER_INPUT="BOT_IM_COMPONENT_INPUT_TYPE_NUMBER_INPUT",e.BOT_IM_COMPONENT_INPUT_TYPE_INTEGER_INPUT="BOT_IM_COMPONENT_INPUT_TYPE_INTEGER_INPUT",e.BOT_IM_COMPONENT_INPUT_TYPE_CHECKBOX="BOT_IM_COMPONENT_INPUT_TYPE_CHECKBOX",e.BOT_IM_COMPONENT_INPUT_TYPE_NUMBER_SELECTOR="BOT_IM_COMPONENT_INPUT_TYPE_NUMBER_SELECTOR",e.BOT_IM_COMPONENT_INPUT_TYPE_CODE_EDITOR="BOT_IM_COMPONENT_INPUT_TYPE_NUMBER_SELECTOR"}(ea||(ea={})),function(e){e.WIDGET_CHAT_CALLER_TYPE_UNSPECFIED="WIDGET_CHAT_CALLER_TYPE_UNSPECFIED",e.WIDGET_CHAT_CALLER_TYPE_PROMPT="WIDGET_CHAT_CALLER_TYPE_PROMPT",e.WIDGET_CHAT_CALLER_TYPE_VOICE="WIDGET_CHAT_CALLER_TYPE_VOICE",e.WIDGET_CHAT_CALLER_TYPE_COMPONENT="WIDGET_CHAT_CALLER_TYPE_COMPONENT"}(ta||(ta={}));const aa=()=>{const t=g.usePathname()||"",s=e.useMemo((()=>{let e="en",s=t;const a=function(e){return e.split("/")}(t),n=a[1];return Le.includes(n)&&(e=n,s=[a[0],...a.slice(2)].join("/")),{defaultLocale:"en",locale:e,pathname:s,isMobile:t.includes("/m/")}}),[t]);return s};function na(e,t,s){const a=g.useRouter(),{isMobile:n,locale:i}=aa(),[r,o]=p.useToggle(!1);return{removing:r,remove:async()=>{try{o(!0);const{success:r}=await(()=>{let t;switch(e){case"bot":default:t=Ws;break;case"widget":t=sa;break;case"room":t=$s}return t})()(t);if(!r)throw new Error;(t=>{if(n){let t;switch(e){case"bot":default:t=`/${i}/m/chat`;break;case"widget":t=`/${i}/m/workshop`}return void a.replace(t)}let s;switch(e){case"bot":default:s=t.length?`/${i}/chat/${t[0].id}`:`/${i}/explore`;break;case"widget":s=t.length?`/${i}/robot-workshop/widget/${t[0].id}`:`/${i}/robot-workshop`;break;case"room":s=t.length?`/${i}/room/${t[0].channelId}`:`/${i}/explore`}a.replace(s)})(await s("remove"))}catch(e){throw console.error(e),new Error}finally{o(!1)}}}}function ia({type:s,id:a,disabled:n=!1,onSuccess:i}){const{getList:r}=e.useContext(Me),o=l.useTranslations("chat"),{removing:d,remove:c}=na(s,a,r);return t.jsxs(Ts,{disabled:n||d,className:"cursor-pointer flex items-center gap-3 relative",onSelect:e=>e.preventDefault(),onClick:async()=>{try{await c(),i()}catch(e){console.error(e)}},children:[d?t.jsx(Os,{size:"sm"}):t.jsx(Ns,{className:"size-5"}),o("remove_from_list")]})}var ra=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const oa=e=>{var{src:s,className:a}=e,n=ra(e,["src","className"]);const i={MaskImage:`url(${s})`,MaskPosition:"center",MaskSize:"contain",MaskRepeat:"no-repeat",WebkitMaskImage:`url(${s})`,WebkitMaskPosition:"center",WebkitMaskSize:"contain",WebkitMaskRepeat:"no-repeat",display:"block",overflow:"hidden"};return t.jsx("span",Object.assign({style:i,className:a},n))};function la(){const s=p.useMedia("(min-width: 768px)"),[a,n]=p.useToggle(!1),{type:i,entityInfo:r,menuDisabled:o,menuFunctions:l,customMenuFunction:d}=e.useContext(Me),{id:c}=r,{clearMessageList:u}=e.useContext(Pe),m=()=>{n(!1)};return t.jsxs(fs,{open:a,children:[t.jsx(hs,{asChild:!0,children:t.jsx(ds,{variant:"ghost",color:"brand",size:"md",icon:a?ms:us,className:"data-[state=open]:bg-surface-hovered",onClick:()=>n(!a),disabled:o||!l.length&&!(null==d?void 0:d.length)})}),t.jsxs(Ss,{className:"w-[calc(100vw-32px)] md:w-fit",side:"top",align:"start",sideOffset:s?8:56,collisionPadding:{left:16,right:16},onInteractOutside:()=>n(!1),onCloseAutoFocus:e=>e.preventDefault(),children:[l.map((s=>t.jsxs(e.Fragment,{children:[s.menuFunction===exports.MenuFunctionEnum.REMOVE_FROM_LIST&&t.jsx(ia,{type:i,id:c,onSuccess:m}),s.menuFunction===exports.MenuFunctionEnum.CLEAR_MEMORY&&t.jsxs(Ts,{className:"cursor-pointer flex items-center gap-3 relative",onSelect:e=>e.preventDefault(),onClick:()=>{u()},children:[t.jsx(oa,{src:"/icons/brush.svg",className:"mr-2 w-5 h-5 bg-icon"})," Clear memory"]})]},s.menuFunction))),(null!=d?d:[]).map(((s,a)=>{const n=e.cloneElement(s,{onSuccess:m});return t.jsx(e.Fragment,{children:n},a)}))]})]})}function da(){const s=v.useToast(),a=e.useRef(null),n=e.useRef(null);return e.useEffect((()=>{let e=10;return n.current=s({position:"top",title:"Warning!",description:`Stop recording after ${e} s`,status:"warning",duration:1e4,isClosable:!0}),a.current=setInterval((()=>{e>=0&&n.current&&(e--,s.update(n.current,{position:"top",title:"Warning!",description:`Stop recording after ${e} s`,status:"warning",duration:1e4,isClosable:!0}))}),1e3),()=>{clearInterval(a.current)}}),[]),t.jsx(t.Fragment,{})}var ca;!function(e){e.DELETE_MEMORY="DELETE_MEMORY",e.SHOW_BOT_MODAL="SHOW_BOT_MODAL",e.SHOW_BOT_POPUP="SHOW_BOT_POPUP",e.AWAIT_RECORD_COMPLETE="AWAIT_RECORD_COMPLETE",e.TRANSLATE="TRANSLATE",e.SHOW_WIDGET_MODAL="SHOW_WIDGET_MODAL",e.SHOW_WIDGET_POPUP="SHOW_WIDGET_POPUP",e.DELETE_WIDGET_MEMORY="DELETE_WIDGET_MEMORY"}(ca||(ca={}));const ua=90;var pa,ma;!function(e){e.Idle="Idle",e.Recording="Recording",e.Stopped="Stopped",e.Playing="Playing",e.Completed="Completed",e.CallUping="CallUping"}(pa||(pa={})),function(e){e.INIT="INIT",e.SET_RECORDER="SET_RECORDER",e.SET_TIME="SET_TIME",e.SET_TIME_UPDATE="SET_TIME_UPDATE"}(ma||(ma={}));const ga={status:pa.Idle,timeLeft:ua,duration:0,recordBlob:null,recordBlobDataURI:"",recorder:null,chunks:[],audioUrl:"",callUping:!1,timeUpdate:0,mimeType:""},fa=(e,t)=>{const{type:s,payload:a={}}=t;switch(s){case ma.INIT:return Object.assign({},ga);case pa.CallUping:return Object.assign(Object.assign({},e),a);case pa.Recording:return Object.assign(Object.assign(Object.assign({},e),{chunks:[],status:pa.Recording}),a);case pa.Stopped:return Object.assign(Object.assign(Object.assign({},e),{status:pa.Stopped}),a);case pa.Playing:return Object.assign(Object.assign(Object.assign({},e),{status:pa.Playing}),a);case pa.Completed:return Object.assign(Object.assign(Object.assign({},e),{status:pa.Completed}),a);case ma.SET_RECORDER:return Object.assign(Object.assign({},e),a);case ma.SET_TIME:{const t=e.timeLeft-1,s=0===t?pa.Stopped:e.status;return Object.assign(Object.assign({},e),{duration:e.duration+1,status:s,timeLeft:t})}case ma.SET_TIME_UPDATE:return Object.assign(Object.assign({},e),a);default:return e}};function ha({onChangePlayingAudio:t,onChangeInputType:s,onRecordEnd:a}){const n=p.useMedia("(max-width: 768px)"),i=l.useTranslations("common"),{error:r}=Vt(),[o,d]=e.useReducer(fa,ga),[c,u]=e.useState(""),m=e.useRef(),g=e.useRef(!1),f=e.useRef(o.timeLeft);e.useMemo((()=>{f.current=o.timeLeft}),[o.timeLeft]),e.useEffect((()=>{u(function(){const e=["audio/mp4","audio/mpeg","audio/wav","audio/webm","audio/webm;codecs=opus","audio/webm;codecs=pcm","audio/ogg","audio/ogg;codecs=opus","audio/ogg;codecs=vorbis"];let t="";try{for(const s of e)if(MediaRecorder.isTypeSupported(s)){t=s;break}}catch(e){}return t}())}),[]);const h=e.useCallback((async()=>{if(o.recorder&&"recording"===o.recorder.state)return new Promise((e=>{if(o.recorder){o.recorder.stop(),o.recorder.stream.getTracks().forEach((e=>{e.stop()}));const t=t=>{d({type:pa.Stopped,payload:{recorder:null}}),e(t)};Ps.subscribe(ca.AWAIT_RECORD_COMPLETE,t,!0)}}))}),[o.recorder]),v=e.useCallback((async()=>{g.current=!1,o.recorder&&await h(),d({type:pa.CallUping,payload:{callUping:!0,status:n?pa.Recording:pa.Idle}}),setTimeout((()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||window.MediaRecorder?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((e=>{try{d(c?{type:ma.SET_RECORDER,payload:{recorder:new MediaRecorder(e,{mimeType:c}),mimeType:c}}:{type:ma.SET_RECORDER,payload:{recorder:new MediaRecorder(e)}})}catch(e){r({content:"The browser doesn't support mediaRecorder",id:"mediaRecorder"}),d({type:pa.CallUping,payload:{callUping:!1}})}}),(e=>{r({content:JSON.stringify(e.message),id:JSON.stringify(e.message)}),d({type:pa.CallUping,payload:{callUping:!1}}),h()})):(d({type:pa.CallUping,payload:{callUping:!1}}),r({content:i("not_support_record"),id:i("not_support_record")}))}))}),[h,r,o.recorder,c,n]),E=e.useCallback((async()=>h()),[h]);e.useEffect((()=>{o.recorder&&o.recorder.start()}),[o.recorder]),e.useEffect((()=>{n&&v()}),[n]),e.useEffect((()=>{o.recorder&&(o.recorder.ondataavailable=e=>{o.chunks.push(e.data)})}),[o.recorder,o.chunks]),e.useEffect((()=>{o.recorder&&(o.recorder.onstop=async()=>{clearInterval(m.current);const e=new Blob(o.chunks,{type:c}),t={timeLeft:ua,chunks:[],recordBlob:e,audioUrl:URL.createObjectURL(e),mimeType:c};d({type:pa.Completed,payload:t}),Ps.dispatch(ca.AWAIT_RECORD_COMPLETE,t)})}),[o.chunks,o.recorder,c]),e.useEffect((()=>{o.recorder&&(o.recorder.onerror=e=>{r({content:e.toString(),id:e.toString()}),h()})}),[h,r,o.recorder]);const S=e.useCallback((()=>{s("audio"),t(),d({type:pa.Recording}),m.current&&clearInterval(m.current),m.current=window.setInterval((()=>{if(f.current){0===f.current-1&&E()}d({type:ma.SET_TIME})}),1e3)}),[s,t,E]);e.useEffect((()=>{o.recorder&&(o.recorder.onstart=()=>{S()})}),[o.recorder,S]);const T=e.useCallback((async()=>(g.current=!0,await E(),new Promise((e=>{setTimeout((()=>{d({type:ma.INIT}),e(!0)}),50)})))),[o.recorder,E]);return e.useEffect((()=>{const e=async e=>{if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName){if("Space"===e.code){if(e.preventDefault(),o.status===pa.Idle&&v(),o.status===pa.Recording){const e=await E();await a(e)}o.status===pa.Stopped&&await a(o)}"Enter"===e.code&&(e.preventDefault(),o.status===pa.Completed&&await a(o)),"Escape"===e.code&&(e.preventDefault(),o.status===pa.Recording&&E(),T())}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[T,o,a]),{supportedType:c,startRecording:v,stopRecording:E,clearRecord:T,state:o,dispatch:d}}function va({interacting:s=!1,disabled:a=!1,exitAudioInput:n,scrollLayoutToTop:i,onSend:r,onChangeType:o}){const d=l.useTranslations("chat"),c=e.useRef(null),u=p.useMedia("(max-width: 768px)"),[m,g]=e.useState(!1),{clearRecord:f,state:h,startRecording:v,stopRecording:E,dispatch:S}=ha({onChangeInputType:()=>{},onRecordEnd:async e=>{},onChangePlayingAudio:()=>{}}),T=async()=>{try{u&&o("TEXT"),await f()}catch(e){console.error(e)}},_=e.useCallback((()=>{if(c.current){const{currentTime:e}=c.current;S({type:ma.SET_TIME_UPDATE,payload:{timeUpdate:e}})}}),[S]),b=()=>{S({type:pa.Stopped})},I=()=>{c.current&&(c.current.addEventListener("timeupdate",_),c.current.play(),S({type:pa.Playing}))},x=()=>{var e;c.current&&(c.current.removeEventListener("timeupdate",_),null===(e=c.current)||void 0===e||e.pause(),b())},w=()=>{const{recordBlob:e,mimeType:t}=h;e&&(r(e,t),f())},N=async()=>{g(!0);const e=await E(),{recordBlob:t,mimeType:s}=e;t&&(r(t,s),f(),g(!1),o("TEXT"))},y=()=>{v()};return e.useEffect((()=>{h.status===pa.Recording&&(null==i||i())}),[i,h.status]),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"w-full flex space-x-2 items-center justify-between h-18",children:[h.status===pa.CallUping&&t.jsx("div",{children:"111"}),h.status===pa.Idle&&t.jsxs(t.Fragment,{children:[t.jsx(la,{}),t.jsx("div",{className:de.default("w-full px-4 py-2 bg-surface-default text-center text-primary text-sm leading-6 border border-outline-variant rounded-xl hover:bg-surface-container-low cursor-pointer",{"cursor-not-allowed":a}),onClick:y,children:d("record_top")}),t.jsx(ds,{variant:"ghost",size:"md",color:"brand",onClick:()=>{null==n||n()},children:t.jsx(rs,{className:"w-6 h-6 text-primary"})})]}),h.status===pa.Recording&&t.jsxs("div",{className:"w-full flex items-center flex-col md:flex-row gap-x-2",children:[t.jsx(ds,{variant:"primary",color:"default",size:"md",icon:is,className:"hidden md:inline-flex",onClick:T}),t.jsxs("div",{className:"relative w-full px-4 py-2 flex flex-row justify-between text-white text-sm leading-6 rounded-xl cursor-pointer overflow-hidden bg-[#F2F4FE] md:dark:bg-[#292C38] md:bg-[#FFF4F4] md:dark:bg-[#382A29]",onClick:()=>!u&&E(),children:[t.jsx("span",{className:"z-10 rounded-xl px-2 py-[2px] text-sm leading-[24px] bg-[#CCD4FF] dark:bg-[#2B3561] text-[#3E5CFA] dark:text-[#5974FF]  md:text-[#EC2F0D] md:dark:text-[#FD5749] md:bg-[#FED3D1] md:dark:bg-[#612E2B]",children:Bt(h.duration)}),m?t.jsx("span",{className:"text-[#414345] dark:text-[#B8BCCF] text-sm z-10 self-center",children:d("sending")}):t.jsxs("span",{className:"text-sm self-center justify-center z-10 text-[#3E5CFA] dark:text-[#5974FF] md:text-[#EC2F0D] md:dark:text-[#FD5749]",children:[d("recording"),"..."]}),t.jsx("div",{className:"z-10 rounded-full bg-[#FED3D1] dark:bg-[#612E2B] w-7 h-7 md:flex justify-center items-center hidden",onClick:E,children:t.jsx(as,{className:"w-4 h-4 text-[#EC2F0D] dark:text-[#FD5749]"})}),t.jsx(ds,{className:"md:hidden",variant:"primary",size:"sm",icon:Jt,loading:s,onClick:N})]}),t.jsx(ds,{variant:"primary",color:"default",size:"sm",icon:is,className:"mt-2 md:hidden",onClick:T})]}),(h.status===pa.Completed||h.status===pa.Stopped)&&t.jsxs(t.Fragment,{children:[t.jsx(ds,{variant:"primary",color:"default",size:"md",icon:is,className:"hidden md:inline-flex",onClick:T}),t.jsxs("div",{className:"relative w-full px-4 py-2 flex flex-row justify-between text-white text-sm leading-6 rounded-xl cursor-pointer overflow-hidden bg-[#F2F4FE] md:bg-[#EDEEEF] md:dark:bg-[#42434A]",onClick:E,children:[t.jsx("span",{className:"z-10 rounded-xl px-2 py-[2px] text-sm leading-[24px] bg-[#CCD4FF] dark:bg-[#2B3561] text-[#3E5CFA] dark:text-[#5974FF] md:text-[#414345] md:dark:text-[#B8BCCF] md:bg-[#DBDDDF] md:dark:bg-[#54565E]",children:Bt(h.duration)}),t.jsx(ds,{variant:"ghost",size:"md",onClick:I,className:"text-primary  z-10 bg-[#DBDDDF] dark:bg-[#54565E] w-7 h-7 rounded-full hidden md:flex md:justify-center md:items-center",children:t.jsx(ts,{className:"w-4 h-4"})}),h.timeUpdate>0&&t.jsx("div",{className:"absolute z-0 top-0 left-0 h-full bg-[#E0E0E0] dark:bg-[#595A63] opacity-60 rounded-l-xl",style:{width:100*Ft(h.timeUpdate,h.duration)+"%"}})]}),t.jsx(ds,{variant:"primary",size:"md",icon:Jt,loading:s,onClick:w})]}),h.status===pa.Playing&&t.jsxs(t.Fragment,{children:[t.jsx(ds,{variant:"primary",color:"default",size:"md",icon:is,className:"hidden md:inline-flex",onClick:T}),t.jsxs("div",{className:"relative w-full px-4 py-2 flex flex-row justify-between text-white text-sm leading-6 rounded-xl cursor-pointer overflow-hidden bg-[#F2F4FE] md:bg-[#EDEEEF] md:dark:bg-[#42434A]",children:[t.jsx("span",{className:"z-10 rounded-xl px-2 py-[2px] text-sm leading-[24px] bg-[#CCD4FF] dark:bg-[#2B3561] text-[#3E5CFA] dark:text-[#5974FF] md:text-[#414345] md:dark:text-[#B8BCCF] md:bg-[#DBDDDF] md:dark:bg-[#54565E]",children:Bt(h.duration)}),t.jsx(ds,{variant:"ghost",size:"md",onClick:x,className:"text-primary  z-10 bg-[#DBDDDF] dark:bg-[#54565E] w-7 h-7 rounded-full hidden md:flex md:justify-center md:items-center",children:t.jsx(Qt,{className:"w-4 h-4"})}),h.timeUpdate>0&&t.jsx("div",{className:"absolute z-0 top-0 left-0 h-full w-full bg-[#E0E0E0] dark:bg-[#595A63] opacity-60 rounded-l-xl",style:{width:100*Ft(h.timeUpdate,h.duration)+"%"}})]}),t.jsx(ds,{variant:"primary",size:"md",icon:Jt,onClick:w,loading:m})]})]}),h.audioUrl&&t.jsx("audio",{ref:c,src:h.audioUrl,onEnded:b}),h.timeLeft<=10&&t.jsx(da,{})]})}function Ea({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const Sa=oe.forwardRef(Ea);function Ta({onStart:e,disabled:s=!1}){return t.jsx(ds,{onClick:e,variant:"ghost",color:"brand",size:"md",disabled:s,icon:Sa})}function _a({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const ba=oe.forwardRef(_a);function Ia({loading:e=!1,disabled:s=!1,onSend:a,energyPerChat:n,showEnergyCostIcon:i}){return t.jsxs(We,{loading:e,disabled:s,variant:"primary",size:"md",onClick:a,className:"w-fit rounded-lg shrink-0",children:[t.jsx(ba,{className:"w-4.5 h-4.5"}),i&&t.jsxs(t.Fragment,{children:[t.jsx("hr",{className:"h-3 border-l-[0.5px] mx-1.5 border-[#FFFFFF33]"}),t.jsxs("div",{className:"space-x-[2px] items-center flex",children:[t.jsx(me.default,{alt:"energy icon",src:"/icons/thunder.svg",width:13.59,height:13.59}),t.jsx("span",{className:"text-xs font-medium",children:null!=n?n:1})]})]})]})}var xa=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const wa=fe.Provider,Na=fe.Trigger,ya=fe.Arrow,Oa=oe.forwardRef(((e,s)=>{var{open:a,defaultOpen:n}=e,i=xa(e,["open","defaultOpen"]);return t.jsx(wa,{children:t.jsx(fe.Root,Object.assign({},i,{open:a,defaultOpen:n,children:i.children}))})}));Oa.displayName=fe.Root.displayName;const Ca=oe.forwardRef(((e,s)=>{var{className:a,type:n="default",align:i="center",side:r="top",sideOffset:o=4,showArrow:l=!0}=e,d=xa(e,["className","type","align","side","sideOffset","showArrow"]);return t.jsxs(fe.Content,Object.assign({ref:s,sideOffset:o,className:De("w-fit max-w-70 max-h-44 overflow-y-auto z-50 rounded-lg shadow-modal-bolder border border-opaque mx-4 px-3 py-2 text-sm fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l?"":"animate-in","default"===n?"bg-surface-search-field text-subtle":"bg-surface-accent-yellow-subtle text-warning-bolder",a),side:r,align:i},d,{children:[d.children,l&&t.jsx(ya,{className:De("default"===n?"fill-surface-search-field":"fill-surface-accent-yellow-subtle"),width:16,height:6})]}))}));Ca.displayName=fe.Content.displayName;var Ma=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const Aa=e.forwardRef(((s,a)=>{var{value:n,disabled:i,disabledReason:r,onChange:o,onSend:l,placeholder:d,style:c,className:u,rows:p,autoFocus:m}=s,g=Ma(s,["value","disabled","disabledReason","onChange","onSend","placeholder","style","className","rows","autoFocus"]);const f=e.useRef(null);e.useImperativeHandle(a,(()=>({focus:()=>{var e;null===(e=f.current)||void 0===e||e.focus()},blur:()=>{var e;null===(e=f.current)||void 0===e||e.blur()}})));const h=e.useCallback((e=>{var t;"insertLineBreak"!==(null===(t=null==e?void 0:e.nativeEvent)||void 0===t?void 0:t.inputType)&&(null==o||o(e))}),[o]),v=e.useCallback((e=>{var t;if((null===(t=e.target)||void 0===t?void 0:t.value)&&"Enter"===e.key)if(e.shiftKey){const{value:t,selectionStart:s,selectionEnd:a}=e.target,n=t.slice(0,s),i=t.slice(a);null==o||o({target:{value:`${n}\n${i}`}});const r=s+1;setTimeout((()=>{(e=>{var t;null===(t=null==f?void 0:f.current)||void 0===t||t.setSelectionRange(e,e)})(r)}))}else e.preventDefault(),null==l||l(n)}),[o,l,n]);return t.jsxs(Oa,{children:[t.jsx(Na,{asChild:!0,children:t.jsx(ge.default,Object.assign({ref:f,className:De("flex w-full resize-none p-2 bg-surface-default text-sm placeholder:text-subtlest focus-visible:outline-none disabled:cursor-not-allowed disabled:placeholder:text-disabled max-h-full overflow-auto",u),rows:p||1,disabled:i,value:n,onChange:h,autoFocus:null==m||m,onKeyDown:v,placeholder:d||"Write a message"},g))}),i&&r&&t.jsx(Ca,{side:"top",align:"start",sideOffset:8,alignOffset:8,type:"info",showArrow:!1,children:r})]})}));function Pa({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}Aa.displayName="TextInput";const La=oe.forwardRef(Pa);function Da({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Ra=oe.forwardRef(Da);var ja=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const ka=s.cva("relative flex shrink-0 overflow-hidden bg-surface-container-hovered",{variants:{size:{xs:"w-5 h-5 rounded",sm:"w-6 h-6 rounded-md",md:"w-8 h-8 rounded-lg",lg:"w-9 h-9 rounded-lg",xl:"w-12 h-12 rounded-xl","2xl":"w-14 h-14 rounded-xl","3xl":"w-16 h-16 rounded-xl","4xl":"w-18 h-18 rounded-2xl","5xl":"w-21 h-21 rounded-2xl","6xl":"w-30 h-30 rounded-4xl"}},defaultVariants:{size:"md"}}),Ba=oe.forwardRef(((e,s)=>{var{className:a,size:n="md"}=e,i=ja(e,["className","size"]);return t.jsx(he.Root,Object.assign({ref:s,className:De(ka({size:n}),a)},i))}));Ba.displayName=he.Root.displayName;const Ua=oe.forwardRef(((e,s)=>{var{className:a}=e,n=ja(e,["className"]);return t.jsx(he.Image,Object.assign({ref:s,className:De("aspect-square h-full w-full object-cover",a)},n))}));Ua.displayName=he.Image.displayName;const Ga=oe.forwardRef(((e,s)=>{var{className:a}=e,n=ja(e,["className"]);return t.jsx(he.Fallback,Object.assign({ref:s,className:De("flex h-full w-full items-center justify-center bg-surface-container-pressed",a)},n))}));Ga.displayName=he.Fallback.displayName;const Fa=oe.forwardRef(((e,s)=>{var{className:a,size:n,src:i,variant:r="bot"}=e,o=ja(e,["className","size","src","variant"]);const l="user"===r?"https://image.myshell.ai/cdn-cgi/image/quality=40,format=webp/image/user/avatar/default/20240715/avatar.png":"https://image.myshell.ai/cdn-cgi/image/quality=40,format=webp/image/bot/logo/20240106/default.png";return t.jsxs(Ba,{size:n,className:a,children:[t.jsx(Ua,Object.assign({ref:s},o,{src:i||l})),t.jsx(Ga,{})]})}));function za({showMobileDetail:s}){const{entityInfo:a}=e.useContext(Me),{name:n,logoUrl:i}=a;return t.jsxs("div",{className:"flex items-center gap-[6px]",onClick:()=>null==s?void 0:s(),children:[t.jsx(Fa,{src:i,size:"md",className:"shrink-0"}),t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("span",{className:"line-clamp-1 break-all",children:n}),t.jsx(Ra,{className:"size-[18px] text-brand"})]})]})}Fa.displayName="Avatar";var Ya=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const Va=e.forwardRef(((s,a)=>{var{value:n,disabled:i,disabledReason:r,onChange:o,onSend:l,placeholder:d,style:c,className:u,rows:m,autoFocus:g,showMobileDetail:f,audioInputSlot:h,loading:v,interactingDisabled:E,energyPerChat:S,showEnergyCostIcon:T}=s,_=Ya(s,["value","disabled","disabledReason","onChange","onSend","placeholder","style","className","rows","autoFocus","showMobileDetail","audioInputSlot","loading","interactingDisabled","energyPerChat","showEnergyCostIcon"]);const b=e.useRef(null),I=e.useRef(null),x=e.useRef(!1),w=(n||"").trim().split("\n")[0].slice(0,100),[N,y]=e.useState("display");p.useClickAway(I,(()=>{y("display")}));(({minKeyboardHeight:t=300,defaultValue:s=!1,callback:a})=>{const[n,i]=e.useState(s),r=e.useRef(a),o=e.useRef(n);e.useEffect((()=>{r.current=a}),[a]),e.useEffect((()=>{const e=()=>{const e=window.visualViewport.height,s=window.screen.height,a=s-t>e;o.current!==a&&(i(a),o.current=a,r.current&&r.current(a,s,e))};return"undefined"!=typeof visualViewport&&window.visualViewport.addEventListener("resize",e),()=>{"undefined"!=typeof visualViewport&&window.visualViewport.removeEventListener("resize",e)}}),[])})({callback:e=>{e||y("display")}});const O=e=>{var t;null===(t=null==b?void 0:b.current)||void 0===t||t.setSelectionRange(e,e)};e.useImperativeHandle(a,(()=>({focus:()=>{var e;null===(e=b.current)||void 0===e||e.focus()},blur:()=>{var e;null===(e=b.current)||void 0===e||e.blur()}})));const C=e.useCallback((e=>{var t;"insertLineBreak"!==(null===(t=null==e?void 0:e.nativeEvent)||void 0===t?void 0:t.inputType)&&(null==o||o(e))}),[o]),M=e.useCallback((e=>{var t;if((null===(t=e.target)||void 0===t?void 0:t.value)&&"Enter"===e.key){const{value:t,selectionStart:s,selectionEnd:a}=e.target,n=t.slice(0,s),i=t.slice(a);null==o||o({target:{value:`${n}\n${i}`}});const r=s+1;setTimeout((()=>{O(r)}))}}),[o]);return"display"===N?t.jsxs("div",{className:"px-4 flex flex-col gap-2",children:[t.jsxs(Oa,{children:[t.jsx(Na,{children:i?t.jsxs("div",{className:"p-2 w-full h-10 overflow-hidden border border-default rounded-lg shadow-textarea flex items-center gap-2",children:[t.jsx("p",{className:de.default("grow truncate h-6 text-sm leading-6 text-start",w.length?"text-default":"text-subtlest"),children:w||d||"Write a message"}),t.jsx(ds,{icon:La,variant:"ghost",size:"md",className:"shrink-0",disabled:!0})]}):t.jsxs("div",{className:"p-2 w-full h-10 overflow-hidden border border-default rounded-lg shadow-textarea flex items-center gap-2",onClick:()=>y("input"),children:[t.jsx("p",{className:de.default("grow truncate h-6 text-sm leading-6 text-start",w.length?"text-default":"text-subtlest"),children:w||d||"Write a message"}),t.jsx(ds,{icon:La,variant:"ghost",size:"md",className:"shrink-0",disabled:!0})]})}),i&&r&&t.jsx(Ca,{side:"top",align:"start",sideOffset:8,alignOffset:8,type:"info",showArrow:!1,children:r})]}),t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsx("div",{className:"shrink-0",children:t.jsx(za,{showMobileDetail:f})}),h]})]}):t.jsxs("div",{className:"w-full bg-surface-default flex flex-col gap-2",ref:I,children:[t.jsx(qt,{className:"w-full bg-[var(--border)]"}),t.jsx("div",{className:"px-4",children:t.jsx(ge.default,Object.assign({ref:b,className:"flex w-full resize-none bg-surface-default text-sm leading-6 placeholder:text-subtlest focus-visible:outline-none disabled:cursor-not-allowed disabled:placeholder:text-disabled h-fit max-h-[144px] focus:overflow-auto",rows:m||1,disabled:i,value:n,onCompositionStart:()=>{console.log("flag true"),x.current=!0},onCompositionEnd:()=>{console.log("flag false"),x.current=!1},onChange:C,onFocus:e=>{const{value:t}=e.target,s=t.length;setTimeout((()=>{O(s)}))},onKeyDown:M,autoFocus:null==g||g,placeholder:d||"Write a message"},_))}),t.jsxs("div",{className:"w-full flex justify-between items-center pl-2 pr-4",children:[t.jsx("div",{className:"shrink-0",children:t.jsx(ds,{icon:La,variant:"ghost",size:"md",disabled:!0})}),t.jsx(Ia,{loading:v,disabled:E,onSend:()=>{null==l||l(n),y("display")},energyPerChat:S,showEnergyCostIcon:T&&!!n})]})]})}));function Ha({editorContainerRef:s,textareaRef:a,scrollLayoutToTop:n,showMobileDetail:i,customMenuIconSlot:r}){const{interactionDisabled:o,imTextDisabled:l,imAudioDisabled:d,disabledReason:c,entityInfo:u,showInteractionCostEnergy:m}=e.useContext(Me),{sendTextMessage:g,sendAudioMessage:f,sending:h,interacting:v}=e.useContext(Pe),{energyPerChat:E}=u,S=p.useMedia("(min-width: 768px)"),[T,_]=e.useState("TEXT"),b=()=>{_("AUDIO"),null==n||n()},[I,x]=e.useState(""),w=e.useCallback((()=>{null==n||n(),g(I),x("")}),[n,g,I]);return t.jsxs("div",{ref:s,className:de.default("px-0 md:px-6 py-3 md:py-4 flex flex-col gap-2 md:gap-1 w-full h-fit shrink-0 top-0 left-0 z-10 bg-surface-default md:rounded-b-3xl overflow-hidden"),children:["TEXT"===T&&(S?t.jsxs(t.Fragment,{children:[t.jsx(Aa,{className:"w-full min-h-9 max-h-[156px]",onSend:w,autoFocus:!0,value:I,ref:a,onChange:e=>x(e.target.value),disabled:o||l,disabledReason:c,onFocus:()=>{null==n||n()}}),t.jsx("div",{className:"w-full flex items-center justify-between",children:t.jsxs("div",{className:"flex w-full justify-between items-center",children:[t.jsxs("div",{className:"flex gap-1",children:[t.jsx(la,{}),r]}),I?t.jsx(Ia,{loading:h,disabled:o||l,onSend:w,energyPerChat:E,showEnergyCostIcon:m}):t.jsx(Ta,{onStart:b,disabled:o||d})]})})]}):t.jsx(Va,{onSend:w,value:I,ref:a,onChange:e=>x(e.target.value),disabled:o||l,disabledReason:c,showMobileDetail:i,audioInputSlot:t.jsx(Ta,{onStart:b,disabled:o||d}),loading:h,interactingDisabled:o,energyPerChat:E,showEnergyCostIcon:m})),"AUDIO"===T&&t.jsx(va,{exitAudioInput:()=>{_("TEXT")},onSend:f,interacting:h,disabled:o,scrollLayoutToTop:n,onChangeType:e=>_(e)})]})}function Wa({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}Va.displayName="MobileTextInput";const $a=oe.forwardRef(Wa),Ka=e.createContext({}),qa=()=>e.useContext(Ka),Xa=e=>t.jsx(Ka.Provider,{value:{message:e.message,actions:e.actions},children:e.children});var Ja=e.createContext(void 0);function Za(){return function(){var t=e.useContext(Ja);if(!t)throw new Error("production"!==process.env.NODE_ENV?"No intl context found. Have you configured the provider?":void 0);return t}().locale}const Qa="locale";function en(){let e;const t=g.useParams();return e="string"==typeof(null==t?void 0:t[Qa])?t[Qa]:Za(),e}function tn(e){if("object"==typeof e)return null==e.host&&null==e.hostname;return!/^[a-z]+:/i.test(e)}function sn(e,t){let s;return"string"==typeof e?s=an(t,e):(s={...e},e.pathname&&(s.pathname=an(t,e.pathname))),s}function an(e,t){let s="/"+e;return"/"!==t&&(s+=t),s}var nn=e.forwardRef((function({href:t,locale:s,prefetch:a,...n},i){const r=g.usePathname(),o=en(),l=s!==o,[d,c]=e.useState((()=>tn(t)&&s?sn(t,s):t));return e.useEffect((()=>{r&&c(function(e,t,s=t,a){if(!tn(e)||function(e){const t="object"==typeof e?e.pathname:e;return null!=t&&!t.startsWith("/")}(e))return e;const n=t!==s,i=null==t||function(e,t){const s=`/${e}`;return t===s||t.startsWith(`${s}/`)}(t,a);return(i||n)&&null!=t?sn(e,t):e}(t,s,o,null!=r?r:void 0))}),[o,t,s,r]),l&&(a&&"production"!==process.env.NODE_ENV&&console.error("The `prefetch` prop is currently not supported when using the `locale` prop on `Link` to switch the locale.`"),a=!1),oe.default.createElement(ve.default,{ref:i,href:d,prefetch:a,...n})}));var rn,on,ln,dn,cn,un,pn,mn,gn,fn=e.forwardRef((function({locale:e,...t},s){const a=en();return oe.default.createElement(nn,{ref:s,locale:e||a,...t})})),hn=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};function vn(e){var{className:s,href:a,scroll:n=!1,replace:i=!1,prefetch:r=!0,children:o,onClick:l}=e,d=hn(e,["className","href","scroll","replace","prefetch","children","onClick"]);const c=/^(https?:\/\/)/.test("string"==typeof a?a:`${a.pathname}`),u=c?ve.default:fn;return t.jsx(u,Object.assign({href:a,scroll:n,replace:i,prefetch:r,onClick:l,className:De(s),rel:c?"nofollow,noreferrer":"dofollow"},d,{children:o}))}function En(e){const t=e.match(/\d+/);return(null==t?void 0:t.length)?t[(null==t?void 0:t.length)-1]:""}!function(e){e.SEASON_TASK_TYPE_UNSPECIFIED="SEASON_TASK_TYPE_UNSPECIFIED",e.SEASON_TASK_TYPE_DAILY_MESSAGE="SEASON_TASK_TYPE_DAILY_MESSAGE",e.SEASON_TASK_TYPE_DC_INTERACTION="SEASON_TASK_TYPE_DC_INTERACTION",e.SEASON_TASK_TYPE_BLOCKCHAIN_INTERACTION="SEASON_TASK_TYPE_BLOCKCHAIN_INTERACTION",e.SEASON_TASK_TYPE_USE_VOICE_VIDEO="SEASON_TASK_TYPE_USE_VOICE_VIDEO",e.SEASON_TASK_TYPE_CREATE_BOT="SEASON_TASK_TYPE_CREATE_BOT",e.SEASON_TASK_TYPE_USE_VOICE_CLONE="SEASON_TASK_TYPE_USE_VOICE_CLONE",e.SEASON_TASK_TYPE_USE_AUTO_PROMPT="SEASON_TASK_TYPE_USE_AUTO_PROMPT",e.SEASON_TASK_TYPE_TALK_TO_GPT4_BOT="SEASON_TASK_TYPE_TALK_TO_GPT4_BOT",e.SEASON_TASK_TYPE_TALK_TO_BOTS="SEASON_TASK_TYPE_TALK_TO_BOTS",e.SEASON_TASK_TALK_TO_BOT_WITH_TAG="SEASON_TASK_TALK_TO_BOT_WITH_TAG",e.SEASON_TASK_TYPE_BOT_MASTER="SEASON_TASK_TYPE_BOT_MASTER",e.SEASON_TASK_TYPE_MODEL_MASTER="SEASON_TASK_TYPE_MODEL_MASTER",e.SEASON_TASK_TYPE_INVITEE_MESSAGE_LV1="SEASON_TASK_TYPE_INVITEE_MESSAGE_LV1",e.SEASON_TASK_TYPE_INVITEE_MESSAGE_LV2="SEASON_TASK_TYPE_INVITEE_MESSAGE_LV2",e.SEASON_TASK_TYPE_FANS_KEY="SEASON_TASK_TYPE_FANS_KEY",e.SEASON_TASK_TYPE_STAKING_EXPERIENCE="SEASON_TASK_TYPE_STAKING_EXPERIENCE",e.SEASON_TASK_TYPE_EXPERIENCE_IMAGE_BOTS="SEASON_TASK_TYPE_EXPERIENCE_IMAGE_BOTS",e.SEASON_TASK_TYPE_PUBLIC_VOICE_INCOME="SEASON_TASK_TYPE_PUBLIC_VOICE_INCOME",e.SEASON_TASK_TYPE_BIND_DC_ACCOUNT="SEASON_TASK_TYPE_BIND_DC_ACCOUNT",e.SEASON_TASK_TYPE_PATRON_BADGE="SEASON_TASK_TYPE_PATRON_BADGE",e.SEASON_TASK_TYPE_TWEET_SHARE="SEASON_TASK_TYPE_TWEET_SHARE",e.SEASON_TASK_TYPE_SOCIAL_MEDIA_SHARE="SEASON_TASK_TYPE_SOCIAL_MEDIA_SHARE",e.SEASON_TASK_TOP_CURVE_HOLDERS_DAILY_INCOME="SEASON_TASK_TOP_CURVE_HOLDERS_DAILY_INCOME",e.SEASON_TASK_TYPE_LUCKY_STAR="SEASON_TASK_TYPE_LUCKY_STAR",e.SEASON_TASK_TYPE_CURVE_PROFIT_SHARE="SEASON_TASK_TYPE_CURVE_PROFIT_SHARE"}(rn||(rn={})),function(e){e.SEASON_TASK_ITEM_STATUS_UNSPECIFIED="SEASON_TASK_ITEM_STATUS_UNSPECIFIED",e.SEASON_TASK_ITEM_STATUS_IN_PROGRESS="SEASON_TASK_ITEM_STATUS_IN_PROGRESS",e.SEASON_TASK_ITEM_STATUS_CLAIMABLE="SEASON_TASK_ITEM_STATUS_CLAIMABLE",e.SEASON_TASK_ITEM_STATUS_CLAIMED="SEASON_TASK_ITEM_STATUS_CLAIMED",e.SEASON_TASK_ITEM_STATUS_UNAVAILABLE="SEASON_TASK_ITEM_STATUS_UNAVAILABLE",e.SEASON_TASK_ITEM_STATUS_MONTHLY_LIMIT_REACHED="SEASON_TASK_ITEM_STATUS_MONTHLY_LIMIT_REACHED"}(on||(on={})),function(e){e.standardBattlePass="standardBattlePass",e.genesisPass="genesisPass",e.seasonBadge="seasonBadge",e.energyPack="energyPack",e.shellCoin="shellCoin"}(ln||(ln={})),function(e){e.BACKPACK_ITEM_STATUS_UNSPECIFIED="BACKPACK_ITEM_STATUS_UNSPECIFIED",e.BACKPACK_ITEM_STATUS_COMING_SOON="BACKPACK_ITEM_STATUS_COMING_SOON",e.BACKPACK_ITEM_STATUS_DISABLED="BACKPACK_ITEM_STATUS_DISABLED"}(dn||(dn={})),function(e){e.BACKPACK_ITEM_STATUS_UNSPECIFIED="BACKPACK_ITEM_STATUS_UNSPECIFIED",e.BACKPACK_ITEM_STATUS_COMING_SOON="BACKPACK_ITEM_STATUS_COMING_SOON",e.BACKPACK_ITEM_STATUS_DISABLED="BACKPACK_ITEM_STATUS_DISABLED"}(cn||(cn={})),function(e){e.ORDER_SOURCE_TYPE_UNSPECIFIED="ORDER_SOURCE_TYPE_UNSPECIFIED",e.ORDER_SOURCE_TYPE_SEASON_POINT_EXCHANGE="ORDER_SOURCE_TYPE_SEASON_POINT_EXCHANGE",e.ORDER_SOURCE_TYPE_BADGE_EXCHANGE="ORDER_SOURCE_TYPE_BADGE_EXCHANGE",e.ORDER_SOURCE_TYPE_BUY_SHARE_KEY="ORDER_SOURCE_TYPE_BUY_SHARE_KEY",e.ORDER_SOURCE_TYPE_SELL_SHARE_KEY="ORDER_SOURCE_TYPE_SELL_SHARE_KEY"}(un||(un={})),function(e){e.ORDER_STATUS_UNSPECIFIED="ORDER_STATUS_UNSPECIFIED",e.ORDER_STATUS_WAITING_PAY="ORDER_STATUS_WAITING_PAY",e.ORDER_STATUS_PAID="ORDER_STATUS_PAID",e.ORDER_STATUS_CANCELED="ORDER_STATUS_CANCELED"}(pn||(pn={})),function(e){e.SEASON_STATUS_UNSPECIFIED="SEASON_STATUS_UNSPECIFIED",e.SEASON_STATUS_ON_GOING="SEASON_STATUS_ON_GOING",e.SEASON_STATUS_PREPARING_FOR_REWARDS="SEASON_STATUS_PREPARING_FOR_REWARDS",e.SEASON_STATUS_REWARDS_REDEMPTION="SEASON_STATUS_REWARDS_REDEMPTION",e.SEASON_STATUS_FINISHED="SEASON_STATUS_FINISHED"}(mn||(mn={})),function(e){e.USER_POINT_TYPE_GENERAL="USER_POINT_TYPE_GENERAL",e.USER_POINT_TYPE_ADVOCATOR="USER_POINT_TYPE_ADVOCATOR",e.USER_POINT_TYPE_CREATOR="USER_POINT_TYPE_CREATOR",e.USER_POINT_TYPE_INVESTOR="USER_POINT_TYPE_INVESTOR"}(gn||(gn={}));const Sn=new Map,Tn=e=>{const t=Sn.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((([e,t])=>[e,t.getState()]))):{}},_n=(e,t={})=>(s,a,n)=>{const{enabled:i,anonymousActionType:r,store:o,...l}=t;let d;try{d=(null==i||i)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!d)return i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(s,a,n);const{connection:c,...u}=((e,t,s)=>{if(void 0===e)return{type:"untracked",connection:t.connect(s)};const a=Sn.get(s.name);if(a)return{type:"tracked",store:e,...a};const n={connection:t.connect(s),stores:{}};return Sn.set(s.name,n),{type:"tracked",store:e,...n}})(o,d,l);let p=!0;n.setState=(e,t,i)=>{const d=s(e,t);if(!p)return d;const u=void 0===i?{type:r||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===o?(null==c||c.send(u,a()),d):(null==c||c.send({...u,type:`${o}/${u.type}`},{...Tn(l.name),[o]:n.getState()}),d)};const m=(...e)=>{const t=p;p=!1,s(...e),p=t},g=e(n.setState,a,n);if("untracked"===u.type?null==c||c.init(g):(u.stores[u.store]=n,null==c||c.init(Object.fromEntries(Object.entries(u.stores).map((([e,t])=>[e,e===u.store?g:t.getState()]))))),n.dispatchFromDevtools&&"function"==typeof n.dispatch){let e=!1;const t=n.dispatch;n.dispatch=(...s)=>{"__setState"!==s[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...s)}}return c.subscribe((e=>{var t;switch(e.type){case"ACTION":return"string"!=typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):bn(e.payload,(e=>{if("__setState"!==e.type)n.dispatchFromDevtools&&"function"==typeof n.dispatch&&n.dispatch(e);else{if(void 0===o)return void m(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const t=e.state[o];if(null==t)return;JSON.stringify(n.getState())!==JSON.stringify(t)&&m(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return m(g),void 0===o?null==c?void 0:c.init(n.getState()):null==c?void 0:c.init(Tn(l.name));case"COMMIT":return void 0===o?void(null==c||c.init(n.getState())):null==c?void 0:c.init(Tn(l.name));case"ROLLBACK":return bn(e.state,(e=>{if(void 0===o)return m(e),void(null==c||c.init(n.getState()));m(e[o]),null==c||c.init(Tn(l.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return bn(e.state,(e=>{void 0!==o?JSON.stringify(n.getState())!==JSON.stringify(e[o])&&m(e[o]):m(e)}));case"IMPORT_STATE":{const{nextLiftedState:s}=e.payload,a=null==(t=s.computedStates.slice(-1)[0])?void 0:t.state;if(!a)return;return m(void 0===o?a:a[o]),void(null==c||c.send(null,s))}case"PAUSE_RECORDING":return p=!p}return}})),g},bn=(e,t)=>{let s;try{s=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==s&&t(s)},In=e=>(t,s,a)=>(a.setState=(e,s,...a)=>{const n="function"==typeof e?N.produce(e):e;return t(n,s,...a)},e(a.setState,s,a));var xn;!function(e){e.light="light",e.dark="dark\t"}(xn||(xn={}));const wn={theme:xn.light,sideBarVisible:!0,screenWidth:1e3,profileVisible:!1,isToInviteArea:!1,isOpenLoginModal:!1,cantCloseLogin:!1,cantCloseMigrationModals:!0,guiding:!1,isOpenTwitterBindModal:!1,emailConnectLoading:!1,isOpenInvalidModal:!1,isOpenInviteCodeModal:!1,isOpenEmailBindingModal:!1,isOpenLoginTypeTipModal:!1,isOpenMigrationTipModal:!1,showForumSide:!1,showChatBotRecommend:!1,isOpenRecoveryFailModal:!1,isOpenStartNewCoinModal:!1,inviteCodeStep:1,loadingCount:0,language:"en",createAutoPromptTaskResult:null,noEnergyWithUsablePropModalVisible:!1,twitterChecker:null,onboarding:!1,migrationTipModalDisplayed:!0},Nn=w.create()(Se.default(In(_n((e=>Object.assign(Object.assign({},wn),{screenWidth:1e3,toggleTheme(t){e({theme:t},!1,"toggleTheme")},toggleSideBar(t){e({sideBarVisible:t},!1,"toggleSideBar")},setWidth(t){e({screenWidth:t},!1,"setWidth")},toggleProfile(t){e({profileVisible:t},!1,"toggleProfile")},goToInviteArea(t){e({profileVisible:!0,isToInviteArea:t},!1,"goToInviteArea")},globalLoading(){e((e=>{e.loadingCount++}),!1,"globalLoading")},globalLoaded(){e((e=>{const t=e.loadingCount-1;e.loadingCount=t<0?0:t}),!1,"globalLoaded")},toggleLoginModal(t){e((e=>{e.isOpenLoginModal=t,t||(e.cantCloseLogin=!1)}),!1,"toggleLoginModal")},toggleTwitterBindModal(t){e({isOpenTwitterBindModal:t},!1,"toggleTwitterBindModal")},setCantCloseLogin(t){e({cantCloseLogin:t},!1,"setCantCloseLogin")},setCantCloseMigrationModals(t){e({cantCloseMigrationModals:t},!1,"setCantCloseMigrationLogin")},setGuiding(t){e({guiding:t},!1,"setGuiding")},toggleEmailBindingModal(t){e({isOpenEmailBindingModal:t},!1,"toggleEmailBindingModal")},toggleLoginTypeTipModal(t){e({isOpenLoginTypeTipModal:t},!1,"toggleLoginTypeTipModal")},toggleMigrationTipModal(t){e({isOpenMigrationTipModal:t},!1,"toggleMigrationTipModal")},setShowForumSide(t){e({showForumSide:t},!1,"setShowForumSide")},setShowChatBotRecommend(t){e({showChatBotRecommend:t},!1,"setShowChatBotRecommend")},setEmailConnectLoading(t){e({emailConnectLoading:t},!1,"setEmailConnectLoading")},toggleInvalidModal(t){e({isOpenInvalidModal:t},!1,"toggleInvalidModal")},toggleInvitecodeModal(t){e({isOpenInviteCodeModal:t},!1,"toggleInvitecodeModal")},toggleRecoveryFailModal(t){e({isOpenRecoveryFailModal:t},!1,"toggleInvitecodeModal")},toggleStartNewCoinModal(t){e({isOpenStartNewCoinModal:t},!1,"toggleStartNewCoinModal")},setInviteCodeStep(t){e({inviteCodeStep:t},!1,"setInviteCodeStep")},setAutoPromptTaskResult(t){e({createAutoPromptTaskResult:t},!1,"setAutoPromptTaskResult")},setLanguage(t){e((e=>{e.language=t,Cs.setLanguage(t)}),!1,"setLanguage")},setNoEnergyWithUsablePropModalVisible(t){e((e=>{e.noEnergyWithUsablePropModalVisible=t}),!1,"setNoEnergyWithUsablePropModalVisible")},setTwitterChecker(t){e((e=>{e.twitterChecker=t}),!1,"setTwitterChecker")},showOnboarding(t){e((e=>{e.onboarding=t}),!1,"showOnboarding")},setNeteaseRequestToken(t){e((e=>{e.neteaseRequestToken=t}),!1,"setNeteaseRequestToken")}})),{store:"global"})),(e=>({isMd:e.screenWidth<=768,isGlobalLoading:e.loadingCount>0}))));var yn,On,Cn,Mn,An,Pn,Ln,Dn,Rn,jn;!function(e){e.LAST_SEASON="lastSeason",e.LANGUAGE="language",e.SHOW_NSFW="showNsfw",e.FLAG_ICON_REWARD="flagIconReward",e.FLAG_ICON_FORUM="flagIconForum",e.FLAG_LLM_MODEL_CONFIG="flagLlmModelConfig",e.FLAG_NSFW_CONFIRMED="flagNsfwConfirmed",e.FLAG_VOICE_CALL_USED="flagVoiceCallUsed",e.FLAG_VIDEO_CALL_USED="flagVideoCallUsed",e.FLAG_ETH_LINEA_TRANSFERRED="flagEthLineaTransferred",e.DEDUCTION_CONFIRMED="flagDeductionConfirmed",e.FLAG_COMPLETED_OPBNB_CHAIN_TASK="flagCompletedOpBnbChainTask",e.FLAG_SILENT_PERIOD_CONFIRMED="flagSilentPeriodConfirmed",e.FLAG_stake_earn_VIEWED="flagSubscribingEarnViewed",e.FLAG_SHARE_KEY_EARN_POPUP_CONFIRMED="flagShareKeyEarnPopupConfirmed",e.TIME_ZONE="timezone",e.NOTIFICATION="receiveAutoPush"}(yn||(yn={})),function(e){e[e.INIT=0]="INIT",e[e.YES=1]="YES",e[e.NO=2]="NO"}(On||(On={})),function(e){e[e.INIT=0]="INIT",e[e.OPEN=1]="OPEN",e[e.CLOSE=2]="CLOSE"}(Cn||(Cn={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.TYPE_NORMAL="TYPE_NORMAL",e.TYPE_PREMIUM="TYPE_PREMIUM",e.TYPE_GENESIS_WITH_GENESIS_CARD="TYPE_GENESIS_WITH_GENESIS_CARD",e.TYPE_GENESIS_WITH_PASS_CARD="TYPE_GENESIS_WITH_PASS_CARD"}(Mn||(Mn={})),function(e){e.APKPURE_BANNER="apkpure_banner",e.MYSHELL="myshell",e.VISITOR="visitor"}(An||(An={})),function(e){e.FOLLOW_STATUS_UNSPECIFIED="FOLLOW_STATUS_UNSPECIFIED",e.FOLLOWED="FOLLOWED",e.NOT_FOLLOWED="NOT_FOLLOWED",e.NOT_AVAILABLE="NOT_AVAILABLE"}(Pn||(Pn={})),function(e){e.LOGIN_TYPE_UNSPECIFIED="LOGIN_TYPE_UNSPECIFIED",e.LOGIN_TYPE_EMAIL="LOGIN_TYPE_EMAIL",e.LOGIN_TYPE_GOOGLE="LOGIN_TYPE_GOOGLE",e.LOGIN_TYPE_APPLE="LOGIN_TYPE_APPLE",e.LOGIN_TYPE_FACEBOOK="LOGIN_TYPE_FACEBOOK",e.LOGIN_TYPE_PUBLIC_ADDRESS="LOGIN_TYPE_PUBLIC_ADDRESS"}(Ln||(Ln={})),function(e){e.BIND_TYPE_UNSPECIFIED="BIND_TYPE_UNSPECIFIED",e.BIND_TYPE_EVM_ADDRESS="BIND_TYPE_EVM_ADDRESS",e.BIND_TYPE_TWITTER="BIND_TYPE_TWITTER",e.BIND_TYPE_DISCORD="BIND_TYPE_DISCORD",e.BIND_TYPE_TG="BIND_TYPE_TG"}(Dn||(Dn={})),function(e){e.Privy="Privy",e.Particle="Particle",e.Other="Other"}(Rn||(Rn={})),function(e){e.CreatorPass="CreatorPass",e.MYSOUL="MYSOUL",e.ETH="ETH_MAINNET",e.ETH_MYSHELL="ETH_MYSHELL",e.BNB_OP="BNB_OP",e.BNB_BSC="BNB_BSC",e.testETH="testETH",e.HER="HER",e.PIC="PIC",e.LLM="LLM",e.SD="SD",e.TTS="TTS"}(jn||(jn={}));const kn={seasons:null,seasonIndex:0,taskList:[],newlyPropsCount:0,points:[],claimedPoints:0,exchangePoints:[],myProps:[],deductionPoints:null,seasonPassUseSuccessModalVisible:!1,holdBadges:[],txHash:void 0,blockChainInteractionState:"not_start",rewardList:[],rewardQuerying:!0,myPropsQuerying:!0},Bn=w.create()(Se.default(In(_n((e=>Object.assign(Object.assign({},kn),{setUnclaimedPoints(t){e({unclaimedPoints:t},!1,"setUnclaimedPoints")},setExchangePoints(t){e({exchangePoints:t},!1,"setExchangePoints")},setSeasons(t,s){e({seasons:[t,s]},!1,"setSeasons")},setSeasonIndex(t){e({seasonIndex:t},!1,"setSeasonIndex")},setTaskList(t){e({taskList:t},!1,"setTaskList")},setPoints(t,s=!1){e({points:t},!1,"setPoints")},clearClaimedPoints(){e({claimedPoints:0},!1,"clearClaimedPoints")},setMyProps(t){e({myProps:t},!1,"setMyProps")},setNewlyPropsCount(t){e({newlyPropsCount:t},!1,"setNewlyPropsCount")},setDeductionPoints(t){e({deductionPoints:t},!1,"setDeductionPoints")},setSeasonPassUseSuccessModalVisible(t){e({seasonPassUseSuccessModalVisible:t},!1,"setSeasonPassUseSuccessModalVisible")},setHoldBadges(t){e((e=>{e.holdBadges=t}),!1,"setHoldBadges")},setTxHash(t){e({txHash:t},!1,"setTxHash")},setBlockChainInteractionState(t){e({blockChainInteractionState:t},!1,"setBlockChainInteractionState")},setRewardList(t){e({rewardList:t},!1,"setRewardList")},setRewardQuerying(t){e({rewardQuerying:t},!1,"setRewardQuering")},setMyPropsQuerying(t){e({myPropsQuerying:t},!1,"setMyPropsQuerying")}})),{store:"task"})),(e=>{var t,s,a,n,i,r,o,l,d,c,u,p,m,g,f,h,v;return{seasonId:e.seasons?null===(t=e.seasons[e.seasonIndex])||void 0===t?void 0:t.id:null,seasonName:e.seasons?null===(s=e.seasons[e.seasonIndex])||void 0===s?void 0:s.name:null,isBeta:e.seasons?null===(a=e.seasons[e.seasonIndex])||void 0===a?void 0:a.isBate:null,seasonBanners:e.seasons?[null===(n=e.seasons[e.seasonIndex])||void 0===n?void 0:n.bannerPcLight,null===(i=e.seasons[e.seasonIndex])||void 0===i?void 0:i.bannerPcDark,null===(r=e.seasons[e.seasonIndex])||void 0===r?void 0:r.bannerMobileLight,null===(o=e.seasons[e.seasonIndex])||void 0===o?void 0:o.bannerMobileDark]:null,seasonStartDate:e.seasons&&null!==(d=null===(l=e.seasons[e.seasonIndex])||void 0===l?void 0:l.startDate)&&void 0!==d?d:null,seasonEndDate:e.seasons&&null!==(u=null===(c=e.seasons[e.seasonIndex])||void 0===c?void 0:c.endDate)&&void 0!==u?u:null,claimableStartDate:e.seasons&&null!==(m=null===(p=e.seasons[e.seasonIndex])||void 0===p?void 0:p.claimableStart)&&void 0!==m?m:null,claimableEndDate:e.seasons&&null!==(f=null===(g=e.seasons[e.seasonIndex])||void 0===g?void 0:g.claimableEnd)&&void 0!==f?f:null,silentPeriodEndDate:e.seasons&&null!==(v=null===(h=e.seasons[e.seasonIndex])||void 0===h?void 0:h.silentPeriodEnd)&&void 0!==v?v:null,hasClaimableTask:e.taskList.some((e=>e.status===on.SEASON_TASK_ITEM_STATUS_CLAIMABLE)),seasonPoints:Array.isArray(e.points)?e.points[e.seasonIndex]:void 0}}))),Un={user:null,token:null,inviteCode:"",invitationCount:0,validInvitationCount:0,tgValidInvitationCount:0,inviteLink:"",retriveEnergySuccess:!1,energy:0,dailyEnergy:0,isEnergyOverflow:!1,tgInfo:null,connectedAccounts:null,userSettingsInfo:[{name:yn.FLAG_ICON_REWARD,value:"1"},{name:yn.FLAG_ICON_FORUM,value:"1"},{name:yn.FLAG_LLM_MODEL_CONFIG,value:"1"},{name:yn.SHOW_NSFW,value:"0"},{name:yn.FLAG_NSFW_CONFIRMED,value:"0"},{name:yn.FLAG_VOICE_CALL_USED,value:"0"},{name:yn.FLAG_VIDEO_CALL_USED,value:"0"},{name:yn.LAST_SEASON,value:"0"},{name:yn.FLAG_stake_earn_VIEWED,value:"1"},{name:yn.FLAG_SHARE_KEY_EARN_POPUP_CONFIRMED,value:"0"},{name:yn.NOTIFICATION,value:"0"}],rewardsCenterVisited:!1,forumVisited:!1,modelConfigClicked:!1,showNsfw:Cn.INIT,nsfwConfirmed:!1,nsfwSwitch:!0,isVisitor:On.INIT,shellCoins:null,frozenShellCoins:null,shareKeysBotMap:new Map,myStakeData:[],topEarnData:[],soarBotData:[],hotBotData:[],potentialData:[],turnoverData:[],stakeDetail:[],earningDetail:null,earningChartData:[],loginMethod:void 0},Gn=w.create()(Se.default(In(_n((e=>Object.assign(Object.assign({},Un),{setUser(t){e((e=>({user:t,isVisitor:e.token&&(null==t?void 0:t.source)!==An.VISITOR?On.NO:On.YES})),!1,"setUser")},setUserInviteCode(t){e({inviteCode:t},!1,"setUserInviteCode")},setInvitationCount(t){e({invitationCount:t},!1,"setInvitationCount")},setValidInvitationCount(t){e({validInvitationCount:t},!1,"setValidInvitationCount")},setTgValidInvitationCount(t){e({tgValidInvitationCount:t},!1,"setTgValidInvitationCount")},setInviteLink(t){e({inviteLink:t},!1,"setInviteLink")},setEnergyInfo(t){e((e=>{e.energy=t.energy,e.dailyEnergy=t.dailyEnergy||e.dailyEnergy,e.retriveEnergySuccess=!0}),!1,"setEnergyInfo")},setTgInfo(t){e({tgInfo:t},!1,"setTgInfo")},setConnectedAccounts(t){e({connectedAccounts:t},!1,"setConnectedAccounts")},setUserSettingsInfo(t){e({userSettingsInfo:t},!1,"setUserSettingsInfo")},clearUser(){e(Un,!1,"clearUser")},setIsVisitor(t){e({isVisitor:t},!1,"setIsVisitor")},setShowNsfw(t){e({showNsfw:t},!1,"setShowNsfw")},setToken(t){e((e=>{e.token=t,e.isVisitor=t?On.NO:On.YES,Cs.setToken(t)}))},setShellCoins(t){e((e=>{e.shellCoins=t}),!1,"setShellCoins")},setFrozenShellCoins(t){e((e=>{e.frozenShellCoins=t}),!1,"setFrozenShellCoins")},setBotShareKeyInfo(t,s){e((e=>{e.shareKeysBotMap.set(t,s)}),!1,"setBotShareKeyInfo")},setMyStakeData(t){e({myStakeData:t},!1,"setMyStakeData")},appendMyStakeData(t){e((e=>{e.myStakeData=[...e.myStakeData,...t]}),!1,"appendMyStakeData")},setTopEarnData(t){e({topEarnData:t},!1,"setTopEarnData")},setSoarBotData(t){e({soarBotData:t},!1,"setSoarBotData")},setHotBotData(t){e({hotBotData:t},!1,"setHotBotData")},setPotentialData(t){e({potentialData:t},!1,"setPotentialData")},setTurnoverData(t){e({turnoverData:t},!1,"setTurnoverData")},setStakeDetail(t){e({stakeDetail:t},!1,"setStakeDetail")},appendStakeDetail(t){e((e=>{e.stakeDetail=[...e.stakeDetail,...t]}),!1,"appendStakeDetail")},setEarningDetail(t){e({earningDetail:t},!1,"setEarningDetail")},setEarningChartData(t){e({earningChartData:t},!1,"setEarningChartData")},setLoginMethod(t){e({loginMethod:t},!1,"setLoginMethod")}})),{store:"user"})),(e=>{var t,s,a;return{userId:null===(t=e.user)||void 0===t?void 0:t.id,premiumInfo:e.user?e.user.premiumInfo:{level:0,totalExp:0,nextLevelNeedExp:0,currentLevelExp:5},isEnergyOverflow:e.energy>e.dailyEnergy,rewardsCenterVisited:e.userSettingsInfo.some((e=>e.name===yn.FLAG_ICON_REWARD&&"1"===e.value)),forumVisited:e.userSettingsInfo.some((e=>e.name===yn.FLAG_ICON_FORUM&&"1"===e.value)),modelConfigClicked:e.userSettingsInfo.some((e=>e.name===yn.FLAG_LLM_MODEL_CONFIG)),nsfwConfirmed:e.userSettingsInfo.some((e=>e.name===yn.FLAG_NSFW_CONFIRMED&&"1"===e.value)),voiceCallUsed:e.userSettingsInfo.some((e=>e.name===yn.FLAG_VOICE_CALL_USED&&"1"===e.value)),videoCallUsed:e.userSettingsInfo.some((e=>e.name===yn.FLAG_VIDEO_CALL_USED&&"1"===e.value)),blockChainGuruTaskOnceCompleted:e.userSettingsInfo.some((e=>e.name===yn.FLAG_COMPLETED_OPBNB_CHAIN_TASK&&"1"===e.value)),silentPeriodConfirmed:e.userSettingsInfo.find((e=>e.name===yn.FLAG_SILENT_PERIOD_CONFIRMED))?e.userSettingsInfo.some((e=>{var t;return e.name===yn.FLAG_SILENT_PERIOD_CONFIRMED&&e.value!==(null===(t=Bn.getState().seasons)||void 0===t?void 0:t[1].id)})):null,deductionConfirmed:e.userSettingsInfo.find((({name:e})=>"flagDeductionConfirmed"===e))?e.userSettingsInfo.some((e=>{var t;return e.name===yn.DEDUCTION_CONFIRMED&&e.value!==(null===(t=Bn.getState().seasons)||void 0===t?void 0:t[1].id)})):null,subscribingEarnViewed:e.userSettingsInfo.some((e=>e.name===yn.FLAG_stake_earn_VIEWED&&"1"===e.value)),shareKeyEarnPopupConfirmed:e.userSettingsInfo.some((e=>e.name===yn.FLAG_SHARE_KEY_EARN_POPUP_CONFIRMED&&"0"===e.value))||e.userSettingsInfo.some((e=>e.name===yn.FLAG_SHARE_KEY_EARN_POPUP_CONFIRMED&&"0"!==e.value&&Ee.default().isBefore(Ee.default(Number(e.value))))),nsfwSwitch:e.nsfwSwitch,timezone:null===(s=e.userSettingsInfo.find((e=>e.name===yn.TIME_ZONE)))||void 0===s?void 0:s.value,notification:"1"===(null===(a=e.userSettingsInfo.find((e=>e.name===yn.NOTIFICATION)))||void 0===a?void 0:a.value)}})));var Fn,zn,Yn,Vn,Hn,Wn,$n,Kn,qn,Xn,Jn,Zn,Qn,ei;async function ti({scenario:e,contentType:t,file:s,onProgress:a,cancelToken:n}){const i=await(r={scenario:e,contentType:t||zn.ALL,fileName:s.name,contentLength:String(s.size)},Vs.post("/v1/resource/get_put_object_pre_sign_url",{body:{fileInfo:r},isGoLang:!0}));var r;const o=await new Promise(((e,t)=>{const r=new XMLHttpRequest;n&&n((()=>{r.abort()})),r.timeout=12e4,r.open("PUT",i.data.uploadUrl),r.setRequestHeader("expires",i.data.expiresAt),r.setRequestHeader("Content-Type",i.data.contentType),r.upload.onprogress=e=>{if(e.lengthComputable){const t=Math.round(100*e.loaded/e.total);a(t)}},r.onerror=()=>{t({success:!1,msg:"upload error",code:400})},r.onabort=()=>{t({success:!1,msg:"the request has been aborted"})},r.upload.onabort=()=>{t({success:!1,msg:"the request has been aborted"})},r.onload=()=>{200===r.status&&e({success:!0,msg:"upload success"})},r.ontimeout=e=>{t({success:!1,msg:"timeout"})},r.send(s)})).catch((e=>(console.error(e),{success:!1,msg:"something is wrong!",code:400})));return o.success?Object.assign(Object.assign({},i.data),{success:!0}):{objectKey:"",objectAccessUrl:"",success:!1,code:o.code}}!function(e){e.SCENARIO_BOT_PHOTO="SCENARIO_BOT_PHOTO",e.SCENARIO_BOT_REPLY_TTS_VOICE="SCENARIO_BOT_REPLY_TTS_VOICE",e.SCENARIO_USER_BOT_CHAT_VOICE="SCENARIO_USER_BOT_CHAT_VOICE",e.SCENARIO_USER_AVATAR="SCENARIO_USER_AVATAR",e.SCENARIO_USER_BACKGROUND="SCENARIO_USER_BACKGROUND",e.SCENARIO_BOT_VOICE="SCENARIO_BOT_VOICE",e.SCENARIO_BOT_LOGO="SCENARIO_BOT_LOGO",e.SCENARIO_BOT_VOICE_SAMPLE_AUDIO="SCENARIO_BOT_VOICE_SAMPLE_AUDIO",e.SCENARIO_BOT_VOICE_LOGO="SCENARIO_BOT_VOICE_LOGO",e.SCENARIO_IM_CHAT="SCENARIO_IM_CHAT"}(Fn||(Fn={})),function(e){e.PNG="CONTENT_TYPE_IMAGE_PNG",e.JPEG="CONTENT_TYPE_IMAGE_JPEG",e.JPG="CONTENT_TYPE_IMAGE_JPG",e.APNG="CONTENT_TYPE_IMAGE_APNG",e.GIF="CONTENT_TYPE_IMAGE_GIF",e.TIFF="CONTENT_TYPE_IMAGE_TIFF",e.TIF="CONTENT_TYPE_IMAGE_TIFF",e.BMP="CONTENT_TYPE_IMAGE_BMP",e.MP3="CONTENT_TYPE_MP3",e.WAV="CONTENT_TYPE_AUDIO_WAV",e.OGG="CONTENT_TYPE_AUDIO_OGG",e.FLAC="CONTENT_TYPE_AUDIO_FLAC",e.APE="CONTENT_TYPE_AUDIO_APE",e.WMA="CONTENT_TYPE_AUDIO_WMA",e.TXT="CONTENT_TYPE_TEXT_TXT",e.DOC="CONTENT_TYPE_TEXT_DOC",e.DOCX="CONTENT_TYPE_TEXT_DOCX",e.PDF="CONTENT_TYPE_TEXT_PDF",e.MARKDOWN="CONTENT_TYPE_TEXT_MARKDOWN",e.MD="CONTENT_TYPE_TEXT_MARKDOWN",e.RTF="CONTENT_TYPE_TEXT_RTF",e.MP4="CONTENT_TYPE_VIDEO_MP4",e.AVI="CONTENT_TYPE_VIDEO_AVI",e.MOV="CONTENT_TYPE_VIDEO_MOV",e.WMV="CONTENT_TYPE_VIDEO_WMV",e.FLV="CONTENT_TYPE_VIDEO_FLV",e.ALL="CONTENT_TYPE_ALL"}(zn||(zn={})),function(e){e.UNKNOWN="MESSAGE_METADATA_TYPE_UNSPECIFIED",e.IMAGE="MESSAGE_METADATA_TYPE_IMAGE_FILE",e.DOC="MESSAGE_METADATA_TYPE_TEXT_FILE",e.AUDIO="MESSAGE_METADATA_TYPE_AUDIO_FILE",e.VIDEO="MESSAGE_METADATA_TYPE_VIDEO_FILE",e.TEXT_CONTENT="MESSAGE_METADATA_TYPE_TEXT_CONTENT",e.AUDIO_CONTENT="MESSAGE_METADATA_TYPE_USER_AUDIO",e.ALL="MESSAGE_METADATA_TYPE_ALL_FILE"}(Yn||(Yn={})),function(e){e.UNKNOWN="EMBED_OBJ_STATUS_UNSPECIFIED",e.PENDING="EMBED_OBJ_STATUS_PENDING",e.PROCESSING="EMBED_OBJ_STATUS_PROCESSING",e.DONE="EMBED_OBJ_STATUS_DONE",e.ERROR="EMBED_OBJ_STATUS_ERROR",e.DELETED="EMBED_OBJ_STATUS_DELETED",e.QUEUEING="EMBED_OBJ_STATUS_QUEUEING"}(Vn||(Vn={})),function(e){e.BIZ_TYPE_FEATURE_PAGE="BIZ_TYPE_FEATURE_PAGE",e.BIZ_TYPE_BOT="BIZ_TYPE_BOT",e.BIZ_TYPE_WIDGET="BIZ_TYPE_WIDGET",e.BIZ_TYPE_UNSPECIFIED="BIZ_TYPE_UNSPECIFIED",e.BIZ_TYPE_FORUM_POST="BIZ_TYPE_FORUM_POST"}(Hn||(Hn={})),function(e){e.PENDING="PENDING",e.PROCESSING="PROCESSING",e.DONE="DONE",e.ERROR="ERROR",e.CANCELING="CANCELING",e.CANCELED="CANCELED"}(Wn||(Wn={})),function(e){e.TEXT="TEXT",e.VOICE="VOICE",e.REPLY="REPLY",e.RESET="RESET",e.PROMPT_UPDATED="PROMPT_UPDATED",e.GREETING="GREETING",e.MORE_BOT_TO_EXPLORE="MORE_BOT_TO_EXPLORER",e.NEED_TO_REGISTER="NEED_TO_REGISTER",e.VOICE_CALL_END="VOICE_CALL_END",e.RECOMMEND_BOT="RECOMMEND_BOT",e.VOICE_CALL_TEXT="VOICE_CALL_TEXT",e.VOICE_CALL_VOICE="VOICE_CALL_VOICE",e.VOICE_CALL_REPLY="VOICE_CALL_REPLY",e.LLM_MODERATION_REQUEST="LLM_MODERATION_REQUEST",e.EMBED_OBJ_STATUS_QUEUEING="EMBED_OBJ_STATUS_QUEUEING",e.BUTTON_INTERACTION="BUTTON_INTERACTION",e.WIDGET_PROMPT_UPDATED="WIDGET_PROMPT_UPDATED"}($n||($n={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(Kn||(Kn={})),function(e){e.EMBED_OBJ_STATUS_QUEUEING="EMBED_OBJ_STATUS_QUEUEING",e.EMBED_OBJ_STATUS_PROCESSING="EMBED_OBJ_STATUS_PROCESSING",e.EMBED_OBJ_STATUS_DONE="EMBED_OBJ_STATUS_DONE",e.EMBED_OBJ_STATUS_ERROR="EMBED_OBJ_STATUS_ERROR"}(qn||(qn={})),function(e){e.ROW="BOT_MESSAGE_COMPONENTS_TYPE_ROW",e.BUTTON="BOT_MESSAGE_COMPONENTS_TYPE_BUTTON",e.CONTAINER="BOT_MESSAGE_COMPONENTS_TYPE_CONTAINER"}(Xn||(Xn={})),function(e){e.LEFT="BOT_MESSAGE_COMPONENTS_BUTTON_CONTENT_DIRECTION_LEFT",e.RIGHT="BOT_MESSAGE_COMPONENTS_BUTTON_CONTENT_DIRECTION_RIGHT"}(Jn||(Jn={})),function(e){e.JUMP_LINK="MESSAGE_COMPONENTS_BUTTON_ACTION_TYPE_JUMP_LINK",e.POP_UP_FORM="MESSAGE_COMPONENTS_BUTTON_ACTION_TYPE_POP_UP_FORM",e.INTERACTION="MESSAGE_COMPONENTS_BUTTON_ACTION_TYPE_INTERACTION"}(Zn||(Zn={})),function(e){e.TEXT="BOT_MESSAGE_COMPONENTS_BUTTON_ACTION_INTERACTION_INPUT_DISPLAY_TYPE_TEXT",e.SLASH_COMMAND="BOT_MESSAGE_COMPONENTS_BUTTON_ACTION_INTERACTION_INPUT_DISPLAY_TYPE_SLASH_COMMAND",e.NOTHING="BOT_MESSAGE_COMPONENTS_BUTTON_ACTION_INTERACTION_INPUT_DISPLAY_TYPE_NOTHING"}(Qn||(Qn={})),function(e){e.UserReject="rejected the request",e.OnWrongChain="does not match the target chain"}(ei||(ei={})),Ee.default.extend(Te.default);const si=e=>{const{widgetName:t,status:s,endTimeTimestamp:a,startTimeTimestamp:n}=e;return`${t} (${(e=>{const t=Ee.default.duration(e,"seconds"),s=Math.floor(t.asMinutes()),a=t.seconds();return s>0?`${s}min${a}s`:`${a}s`})("PROCESSING"===s?Ee.default().valueOf()/1e3-Number(n):Number(a)-Number(n))})`},ai=e=>{let t=[],s=0;const a=async(e,a,n)=>{s++;const i=(async()=>e(...n))();a(i);try{await i}catch(e){}s--,t.length>0&&t.shift()()},n=(n,...i)=>new Promise((r=>{((n,i,r)=>{t.push(a.bind(void 0,n,i,r)),(async()=>{await Promise.resolve(),s<e&&t.length>0&&t.shift()()})()})(n,r,i)}));return Object.defineProperties(n,{activeCount:{get:()=>s},pendingCount:{get:()=>t.length},clearQueue:{value(){t=[]}}}),n};const ni=new class{constructor(){this.db=new _e.default("chatHisDB"),this.db.version(2).stores({chats:"[userId+botId]"}),this.chats=this.db.table("chats")}async storeChat(e,t,s){if(t)try{const a=s.filter((t=>Number(t.userId)===e));await this.chats.put({userId:e,botId:t,chatList:JSON.stringify(a)})}catch(e){console.error("Error storing chat:",e)}}async getChat(e,t){try{const s=await this.chats.get([e,t]);return(s?JSON.parse(null==s?void 0:s.chatList):[]).filter((t=>Number(t.userId)===e))}catch(e){return console.error("Error getting chat:",e),null}}async deleteChat(e,t){try{await this.chats.where([e,t]).delete()}catch(e){console.error("Error deleting chat:",e)}}},ii={isAutopushOn:!0,isAudioOn:!1,isAudioPlayOn:!1,isTranscriptionOn:!0,isTranslationOn:!0,speakingLanguage:Lt.AUTO,audioSpeed:"BOT_CHAT_SETTING_AUDIO_SPEED_ONE"};N.enableMapSet();const ri={updatingBotList:!1,botList:[],botLastMessageMap:new Map,selectedBotList:[],filterBot:[],tagList:[],ugcBotList:[],ownUgcBotList:[],selectedBotId:"",selectedUgcBotId:"",activeType:"all",name:"",pageToken:"0",dataPush:!1,filters:null,checkedFiltersSet:new Set,isFromLandingPage:!1,kolInfo:null,recommend:{banners:[],list:[]},tagFilters:[],searchList:[],botChatSettingMap:new Map,homeData:null,includeTagIds:[]},oi=()=>{if("undefined"!=typeof window){return!!new URLSearchParams(window.location.search).get("apkpure_vid")}return!1},li=w.create()(Se.default(In(_n((e=>Object.assign(Object.assign({},ri),{selectedBotId:"",isFromLandingPage:oi(),setUpdatingBotList(t){e({updatingBotList:t},!1,"setUpdatingBotList")},setBotList(t){e({botList:t},!1,"setBotList")},setSelectedBotList(t){e({selectedBotList:t},!1,"setSelectedBotList")},setFilterBot(t){e({filterBot:t},!1,"setFilterBot")},setTagList(t){e({tagList:t},!1,"setTagList")},setUgcBotList(t){e({ugcBotList:t},!1,"setUgcBotList")},setOwnUgcBotList(t){e({ownUgcBotList:t},!1,"setOwnUgcBotList")},setSelectedBotId(t){e({selectedBotId:t},!1,"setSelectedBotId"),t?localStorage.setItem("selected_bot_id",t):localStorage.removeItem("selected_bot_id")},setSelectedUgcBotId(t){e({selectedUgcBotId:t},!1,"setSelectedUgcBotId"),t?localStorage.setItem("selected_ugc_bot_id",t):localStorage.removeItem("selected_ugc_bot_id")},setTempSelectedUgcBotId(t){e((e=>{t&&e.ownUgcBotList.length>0?e.selectedUgcBotId=e.ownUgcBotList[0].id:e.selectedUgcBotId=""}),!1,"setTempSelectedUgcBotId")},batchSetBotLastMessage(t){e((e=>{for(const s of t)if(s.lastMessage){const t=Object.assign(Object.assign({},s.lastMessage),{createdDate:new Date(s.lastMessage.createdDate).getTime()});e.botLastMessageMap.set(String(s.id),t)}}))},setBotLastMessage(t,s){e((e=>{if(s){const a=Object.assign(Object.assign({},s),{createdDate:new Date(s.createdDate||Number(s.createdDateUnix)).getTime()});e.botLastMessageMap.set(t,a);const n=e.botList.find((e=>e.id===t));if(n){const s=e.botList.filter((e=>e.id!==t));if(n.pinned)e.botList=[n,...s];else{const t=s.filter((e=>e.pinned)),a=s.filter((e=>!e.pinned));e.botList=[...t,n,...a]}}}else e.botLastMessageMap.delete(t)}),!1,"setBotLastMessage")},reset(){e(ri,!1,"reset")},setKolInfo(t){e({kolInfo:t},!1,"setKolInfo")},setRecommend(t){e({recommend:t},!1,"setRecommend")},setTagFilters(t){e({tagFilters:t},!1,"setTagFilters")},setSearchList(t){e({searchList:t},!1,"setSearchList")},setHomeData(t){e({homeData:t},!1,"setHomeData")},setName(t){e({name:t},!1,"setName")},setIncludeTagIds(t){e({includeTagIds:t},!1,"setIncludeTagIds")},setPageToken(t){e({pageToken:t},!1,"setPageToken")},setDataPush(t){e({dataPush:t},!1,"setDataPush")},setActiveType(t){e({activeType:t},!1,"setActiveType")},setFilters(t){e((e=>{e.filters=t;const s=[...e.checkedFiltersSet].sort(((e,t)=>e.id-t.id>0?1:-1));if(s.length){e.checkedFiltersSet.clear();for(const a of s){const s=Object.values(null!=t?t:{}).flat().find((e=>e.id===a.id&&e.name===a.name));e.checkedFiltersSet.add(s)}}}),!1,"setFilters")},setCheckedFilters(t,s){e((e=>{if(s){if("1719340128612126729"==t.id)[...e.checkedFiltersSet.keys()].forEach((t=>{e.checkedFiltersSet.delete(t)}));else{const t=Array.from(e.checkedFiltersSet.keys()).find((e=>"1719340128612126729"==e.id));t&&e.checkedFiltersSet.delete(t)}e.checkedFiltersSet.add(t)}else e.checkedFiltersSet.delete(t);e.includeTagIds=[...e.checkedFiltersSet].map((e=>e.id))}),!1,"setCheckedFilters")},clearCheckedFilters(){e((e=>{e.checkedFiltersSet.clear(),e.includeTagIds=[]}),!1,"clearCheckedFilters")},setBotChatSetting(t,s){e((e=>{e.botChatSettingMap.set(t,s)}),!1,"setBotChatSetting")},clearBotChatSetting(){e((e=>{e.botChatSettingMap.clear()}),!1,"clearBotChatSetting")},updateBotEnergyPerChat(t,s,a){e((e=>{const n=e.botList.find((e=>e.id==t));(null==n?void 0:n.energyPerChat)&&(n.energyPerChat=s),(null==n?void 0:n.llmModel)&&(n.llmModel.energyPerLevelByPass=a)}),!1,"updateBotEnergyPerChat")},setSSECtrl(t){e({sseCtrl:t},!1,"setSSECtrl")}})),{store:"bot"})),(e=>{var t,s,a,n,i,r,o,l,d,c,u,p,m,g,f,h,v,E,S,T;return{selectedBot:null!==(t=e.botList.find((t=>t.id===e.selectedBotId)))&&void 0!==t?t:null,isMyBot:(()=>{var t,s,a,n;const i=null!==(t=e.botList.find((t=>t.id===e.selectedBotId)))&&void 0!==t?t:null;return(null==i?void 0:i.userId)===(null===(s=Gn.getState().user)||void 0===s?void 0:s.id)||(null===(a=null==i?void 0:i.author)||void 0===a?void 0:a.id)===`${null===(n=Gn.getState().user)||void 0===n?void 0:n.id}`})(),selectedUgcBot:null!==(s=[...e.ownUgcBotList,...e.ugcBotList].find((t=>t.id===e.selectedUgcBotId)))&&void 0!==s?s:null,isMyUgcBot:(()=>{var t,s,a,n;const i=null!==(t=[...e.ownUgcBotList,...e.ugcBotList].find((t=>t.id===e.selectedUgcBotId)))&&void 0!==t?t:null;return(null==i?void 0:i.userId)===(null===(s=Gn.getState().user)||void 0===s?void 0:s.id)||(null===(a=null==i?void 0:i.author)||void 0===a?void 0:a.id)===`${null===(n=Gn.getState().user)||void 0===n?void 0:n.id}`})(),allBotLastMessage:(()=>{const t=e.botList.filter((e=>null==e?void 0:e.lastInteractionDate));if(t.length){return t.sort(((e,t)=>new Date(null==t?void 0:t.lastInteractionDate).getTime()-new Date(null==e?void 0:e.lastInteractionDate).getTime()))[0]}})(),checkedFilters:[...e.checkedFiltersSet].sort(((e,t)=>e.id-t.id>0?1:-1)),all:(null!==(n=null===(a=e.filters)||void 0===a?void 0:a.type)&&void 0!==n?n:[]).some((t=>-2==t.id&&e.checkedFiltersSet.has(t))),tgSupported:(null!==(r=null===(i=e.filters)||void 0===i?void 0:i.type)&&void 0!==r?r:[]).some((t=>-1==t.id&&e.checkedFiltersSet.has(t))),featured:(null!==(l=null===(o=e.filters)||void 0===o?void 0:o.type)&&void 0!==l?l:[]).some((t=>-3==t.id&&e.checkedFiltersSet.has(t))),voiceCall:(null!==(c=null===(d=e.filters)||void 0===d?void 0:d.type)&&void 0!==c?c:[]).some((t=>-4==t.id&&e.checkedFiltersSet.has(t))),videoCall:(null!==(p=null===(u=e.filters)||void 0===u?void 0:u.type)&&void 0!==p?p:[]).some((t=>-5==t.id&&e.checkedFiltersSet.has(t))),imageGen:(null!==(g=null===(m=e.filters)||void 0===m?void 0:m.type)&&void 0!==g?g:[]).some((t=>-6==t.id&&e.checkedFiltersSet.has(t))),official:(null!==(h=null===(f=e.filters)||void 0===f?void 0:f.type)&&void 0!==h?h:[]).some((t=>-7==t.id&&e.checkedFiltersSet.has(t))),languageId:(null!==(E=null===(v=e.filters)||void 0===v?void 0:v.language)&&void 0!==E?E:[]).filter((t=>e.checkedFiltersSet.has(t))).map((e=>e.id)).join(","),tagId:(null!==(T=null===(S=e.filters)||void 0===S?void 0:S.function)&&void 0!==T?T:[]).filter((t=>e.checkedFiltersSet.has(t))).map((e=>e.id)).join(","),botChatSetting:(()=>{const t=e.botList.find((t=>t.id===e.selectedBotId));return t&&t.id&&e.botChatSettingMap.has(t.id)?e.botChatSettingMap.get(t.id):ii})(),sumUnReadMessageCount:e.botList.reduce(((e,t)=>e+t.unreadMessageCount),0)}})));N.enableMapSet();const di=ai(1),ci={multiBotMap:{},sharedChatIDList:[],selectedDeleteChatList:[],playingAudio:null,audioQueue:[],sending:!1,startJobIds:[],inputType:"text",lastInputType:"text",lastInputMethod:"DirectInput",triggerRender:0,botDetailOpen:!1,sentMsgIdList:[],textInputMap:{},driverChatId:"",isChatDriving:!1,isOpenContextmenu:!1,copyText:"",loginPopVisible:!1,addedFriendFlag:null,chatBodyType:"",isKol:!1,transactionDisplaySet:new Set,imageParams:{},imagePanelParams:{},fileUpload:{uploading:null,filesMap:{},deletedList:[],alert:{},dragModal:!1},reEditTriggerred:!1,errorMsgList:{},computed:{get currentBotId(){var e;return String((null===(e=li.getState().selectedBot)||void 0===e?void 0:e.id)||"")},get currentBotUid(){var e;return String((null===(e=li.getState().selectedBot)||void 0===e?void 0:e.id)||"")},get currentUserId(){return Gn.getState().userId},get screenWidth(){return Nn.getState().screenWidth}},errorChatRecordList:[]};var ui,pi,mi,gi,fi;w.create()(Se.default(In(_n(((e,t)=>Object.assign(Object.assign({},ci),{textInputMap:"undefined"!=typeof window?Cs.getTextInputMap():{},transactionDisplaySet:"undefined"!=typeof window?Cs.getTransactionDisplaySet():new Set,generateMultiBotMap(t){e((e=>{for(const s of t)e.multiBotMap[String(s.id)]||(e.multiBotMap[String(s.id)]={chatList:[],chatDic:new Map});li.getState().batchSetBotLastMessage(t)}),!1,"generateMultiBotMap")},removeBotMap(t){e((e=>{e.multiBotMap[t]&&delete e.multiBotMap[t]}),!1,"removeBotMap")},clearChatRecord(){e((e=>{e.multiBotMap={}}),!1,"clearChatRecord")},setInputType(t){e((e=>{["share","delete"].includes(t)&&["audio","text"].includes(e.inputType)?e.lastInputType=e.inputType:e.lastInputType=t,e.inputType=t}),!1,"setInputType")},setLastInputMethod(t){e({lastInputMethod:t},!1,"setLastInputMethod")},chatScrollToBottom(e){},setSending(t){e((e=>{e.sending=t}),!1,"setSending")},setStartJobIds(t,s){e((e=>{e.startJobIds=s?[...e.startJobIds||[],t]:e.startJobIds.filter((e=>e!=t))}),!1,"setStartJobIds")},pushAudioIdToQueue(t){e((e=>{e.audioQueue.push(t),e.audioQueue=Array.from(new Set(e.audioQueue))}),!1,"pushAudioIdToQueue")},setErrorMsg(t,s){e((e=>{e.errorMsgList||(e.errorMsgList={}),e.errorMsgList[t]=s}),!0,"setErrorMsg")},removePlayedAudio(t){e((e=>{e.audioQueue=e.audioQueue.filter((e=>e!==t))}),!1,"removePlayedAudio")},clearAudioQueue(){e((e=>{e.audioQueue=[],e.playingAudio=null,e.sentMsgIdList=[]}),!1,"clearAudioQueue")},changePlayingAudio(t){e((e=>{e.playingAudio=null!=t?t:null}),!1,"changePlayingAudio")},addTextStream(s){var a;const n=t().multiBotMap[String(s.replyMessage.botId)];n&&(null===(a=null==n?void 0:n.chatDic)||void 0===a?void 0:a.has(s.replyMessage.id))||t().addHistoryRecord(s.replyMessage),e((e=>{var t;const a=e.multiBotMap[String(s.replyMessage.botId)].chatDic.get(s.replyMessage.id);a.textStream=null!==(t=a.textStream)&&void 0!==t?t:[],a.textStream.push(s),a.text=a.textStream.sort(((e,t)=>e.index>t.index?1:-1)).map((e=>e.text)).join(""),e.multiBotMap[String(s.replyMessage.botId)].chatDic.set(s.replyMessage.id,Object.assign({},a)),e.multiBotMap[String(s.replyMessage.botId)].chatList=[...e.multiBotMap[String(s.replyMessage.botId)].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"addTextStream")},replaceRegeneratedVoice(t,s,a,n){e((e=>{e.multiBotMap[String(t.botId)].chatDic.set(t.id,Object.assign(Object.assign({},t),{voiceUrl:s,voiceFileDurationSeconds:a,audioSpeed:n})),e.multiBotMap[String(t.botId)].chatList=[...e.multiBotMap[String(t.botId)].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}))},addSSeTextStream(t){e((e=>{var s,a,n,i,r,o,l;const d=e.multiBotMap[String(t.replyMessage.botId)].chatDic.get(t.replyMessage.id);d.status!==Wn.CANCELING&&d.status!==Wn.CANCELED&&(t.isJob?d.text=t.text:d.text+=t.text,d.asyncJobInfo=Object.assign(Object.assign({},(null===(s=null==t?void 0:t.replyMessage)||void 0===s?void 0:s.asyncJobInfo)||{}),{status:null!==(a=t.modelStatus)&&void 0!==a?a:""}),d.embedObjs=(null===(n=null==t?void 0:t.replyMessage)||void 0===n?void 0:n.embedObjs)||[],d.extraInfo=(null===(i=null==t?void 0:t.replyMessage)||void 0===i?void 0:i.extraInfo)||{},d.runningError=null===(r=null==t?void 0:t.replyMessage)||void 0===r?void 0:r.runningError,d.componentContainer=null===(o=null==t?void 0:t.replyMessage)||void 0===o?void 0:o.componentContainer,e.multiBotMap[String(t.replyMessage.botId)].chatDic.set(t.replyMessage.id,Object.assign(Object.assign({},d),{inputSetting:null===(l=null==t?void 0:t.replyMessage)||void 0===l?void 0:l.inputSetting})),e.multiBotMap[String(t.replyMessage.botId)].chatList=[...e.multiBotMap[String(t.replyMessage.botId)].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1)))}),!1,"addSSeTextStream")},receiveVoiceUrlFromSSe(t,s,a){e((e=>{const n=e.multiBotMap[a].chatDic.get(s);n.voiceUrl=t,n.audioStream=[],e.multiBotMap[a].chatDic.set(s,Object.assign({},n)),e.multiBotMap[a].chatList=[...e.multiBotMap[a].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"receiveVoiceUrlFromSSe")},addAudioStream(s){var a;const n=t().multiBotMap[String(s.replyMessage.botId)];n&&(null===(a=null==n?void 0:n.chatDic)||void 0===a?void 0:a.has(s.replyMessage.id))||t().addHistoryRecord(s.replyMessage),e((e=>{var t;const a=e.multiBotMap[String(s.replyMessage.botId)].chatDic.get(s.replyMessage.id);a.audioStream=[...null!==(t=a.audioStream)&&void 0!==t?t:[],s],e.multiBotMap[String(s.replyMessage.botId)].chatDic.set(s.replyMessage.id,Object.assign({},a))}),!1,"addAudioStream")},addSSeAudioStream(t){e((e=>{var s;const a=e.multiBotMap[String(t.replyMessage.botId)].chatDic.get(t.replyMessage.id);a.status!==Wn.CANCELING&&a.status!==Wn.CANCELED&&(a.audioStream=[...null!==(s=a.audioStream)&&void 0!==s?s:[],t],e.multiBotMap[String(t.replyMessage.botId)].chatDic.set(t.replyMessage.id,Object.assign({},a)))}),!1,"addSSeAudioStream")},addSSEImageStream(t){e((e=>{var s,a,n;const i=e.multiBotMap[String(t.replyMessage.botId)].chatDic.get(t.replyMessage.id);i.status!==Wn.CANCELING&&i.status!==Wn.CANCELED&&(i.imageGenMessageResponse=Object.assign(Object.assign(Object.assign({},null!==(s=null==i?void 0:i.imageGenMessageResponse)&&void 0!==s?s:{}),(null==t?void 0:t.imageGenMessageResponse)||{}),{metadata:(null===(a=null==i?void 0:i.imageGenMessageResponse)||void 0===a?void 0:a.metadata)||(null===(n=t.imageGenMessageResponse)||void 0===n?void 0:n.metadata),genStatus:t.genStatus}),e.multiBotMap[String(t.replyMessage.botId)].chatDic.set(t.replyMessage.id,Object.assign({},i)),e.multiBotMap[String(t.replyMessage.botId)].chatList=[...e.multiBotMap[String(t.replyMessage.botId)].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1)))}),!1,"addSSeAudioStream")},addTranslationStreamNew(s,a){var n;const i=t().multiBotMap[s.botId];i&&(null===(n=null==i?void 0:i.chatDic)||void 0===n?void 0:n.has(s.id))||t().addHistoryRecord(s),e((e=>{const t=e.multiBotMap[s.botId].chatDic.get(s.id);t.translation+=a,e.multiBotMap[s.botId].chatDic.set(s.id,Object.assign({},t)),e.multiBotMap[s.botId].chatList=[...e.multiBotMap[s.botId].chatDic.values()].filter((t=>t.userId===e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"addTranslationStreamNew")},addTranslationStream(s){if(s.isFinal)return;t().multiBotMap[String(s.message.botId)].chatDic.has(s.message.id)||t().addHistoryRecord(s.message),e((e=>{const t=e.multiBotMap[String(s.message.botId)].chatDic.get(s.message.id);t.translationStream=t.translationStream||[],t.translationStream.push(s),t.translation=t.translationStream.sort(((e,t)=>e.index>t.index?1:-1)).map((e=>e.text)).join(""),e.multiBotMap[String(s.message.botId)].chatDic.set(s.message.id,Object.assign({},t)),e.multiBotMap[String(s.message.botId)].chatList=[...e.multiBotMap[String(s.message.botId)].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"addTranslationStream")},setMessageHandled({botId:t,msgId:s}){e((e=>{!function(e){Vs.post("/v1/bot/chat/set_message_handled",{body:{msgId:e},isGoLang:!0})}(s);const a=e.multiBotMap[String(t)].chatDic.get(s);e.multiBotMap[String(t)].chatDic.set(s,Object.assign(Object.assign({},a),{handled:!0})),e.multiBotMap[String(t)].chatList=[...e.multiBotMap[String(t)].chatDic.values()]}),!1,"setMessageHandled")},setTranslatedText(t){e((e=>{const s=e.multiBotMap[String(t.botId)].chatDic.get(t.id);s.translation=t.translation,e.multiBotMap[String(t.botId)].chatDic.set(t.id,Object.assign({},s))}),!1,"setTranslatedText")},updateMessage(e){t().addHistoryRecord(e)},pushChatRecord(e){t().addHistoryRecord(e)},addHistoryRecord(t){console.log("add History Record",t);const s=new Map,a=Array.isArray(t)?t:[t],n=new Set(a.map((e=>String(e.botId))));for(const e of a)s.has(String(e.botId))||s.set(String(e.botId),[]),s.get(String(e.botId)).push(e);e((e=>{for(const t of[...s.keys()]){e.multiBotMap[t]||(e.multiBotMap[t]={chatList:[],chatDic:new Map});const a=e.multiBotMap[t],i=s.get(t);for(const s of i){if(s.replaceLocalSend){const e=[...a.chatDic.values()].find((e=>e.isLocalSend));e&&a.chatDic.delete(e.localId)}if(s.replaceLocalReply){const e=[...a.chatDic.values()].find((e=>e.isLocalReply));e&&(s.status===Wn.CANCELING||s.status===Wn.CANCELED?a.chatDic.set(e.localId,Object.assign(Object.assign({},e),{status:s.status})):a.chatDic.delete(e.localId))}if(s.deleteId&&a.chatDic.delete(s.deleteId),!s.deleteId){const n=a.chatDic.get(s.id);if("CANCELED"===(null==n?void 0:n.status)||"CANCELING"===(null==n?void 0:n.status)&&"CANCELED"!==s.status)return;e.multiBotMap[t].chatDic.set(s.localId||s.id,Object.assign(Object.assign({},s),{audioStream:(null==n?void 0:n.audioStream)?null==n?void 0:n.audioStream:s.audioStream,textStream:(null==n?void 0:n.textStream)?null==n?void 0:n.textStream:s.textStream,imageGenMessageResponse:(null==n?void 0:n.imageGenMessageResponse)?null==n?void 0:n.imageGenMessageResponse:s.imageGenMessageResponse,translationStream:(null==n?void 0:n.translationStream)?null==n?void 0:n.translationStream:s.translationStream}))}const i=[...e.multiBotMap[t].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)),r=i.filter((e=>e.isLocalSend||e.isLocalReply)).sort(((e,t)=>e.isLocalSend&&!t.isLocalSend||t.localReply&&!e.localReply?-1:0)),o=i.filter((e=>!e.isLocalSend&&!e.isLocalReply)).sort(((e,t)=>BigInt(e.id||e.localId||0)-BigInt(t.id||t.localId||0)>=0?1:-1)),l=[...o,...r];e.multiBotMap[t].chatList=l,n.has(t)&&e.computed.currentUserId&&ni.storeChat(Number(e.computed.currentUserId),t,l.slice(-10))}}}),!1,"addHistoryRecord")},clearAndAddHistoryRecords(t,s){e((e=>{const a=s.filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1));e.multiBotMap[t]&&(e.multiBotMap[t].chatList=a,e.multiBotMap[t].chatDic.clear(),a.forEach((s=>{e.multiBotMap[t].chatDic.set(s.id,s)}))),e.computed.currentUserId&&ni.storeChat(Number(e.computed.currentUserId),t,a.slice(-10))}))},removeHistoryRecord(t){const s=new Map,a=Array.isArray(t)?t:[t],n=new Set(a.map((e=>String(e.botId))));for(const e of a)s.has(String(e.botId))||s.set(String(e.botId),[]),s.get(String(e.botId)).push(e);e((e=>{for(const t of[...s.keys()]){e.multiBotMap[t]||(e.multiBotMap[t]={chatList:[],chatDic:new Map});const a=s.get(t);for(const s of a){e.multiBotMap[t].chatDic.delete(s.id);const a=[...e.multiBotMap[t].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1));e.multiBotMap[t].chatList=a,n.has(t)&&e.computed.currentUserId&&ni.storeChat(Number(e.computed.currentUserId),t,a.slice(-10))}}}),!1,"removeHistoryRecord")},removeHistoryRecordExceptSpecifiedMessages(t,s){e((e=>{if(!e.multiBotMap[t])return;const a=e.multiBotMap[t].chatList.filter((e=>s.some((t=>t===e.id)))),n=a.filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1));e.multiBotMap[t].chatList=[...n],e.computed.currentUserId&&ni.storeChat(Number(e.computed.currentUserId),t,n.slice(-10)),e.multiBotMap[t].chatDic.clear();for(const s of a)e.multiBotMap[t].chatDic.set(s.id,s)}),!1,"removeHistoryRecordExceptSpecifiedMessages")},getBotLastValidInteractionMessage(e){const{chatList:s}=t().multiBotMap[e],a=s.filter((e=>(e.type===$n.REPLY||e.type===$n.TEXT||e.type===$n.VOICE)&&e.status===Wn.DONE));return a[a.length-1]},addChatID(s){t().sharedChatIDList.includes(s)||e((e=>{e.sharedChatIDList.push(s)}),!1,"addChatID")},removeChatID(t){e((e=>{e.sharedChatIDList=e.sharedChatIDList.filter((e=>e!==t))}),!1,"removeChatID")},clearChatID(){e((e=>{e.sharedChatIDList=[]}),!1,"clearChatID")},addDeleteChat(s){t().selectedDeleteChatList.some((e=>e.id===s.id))||e((e=>{e.selectedDeleteChatList.push(s)}),!1,"addDeleteChat")},removeDeleteChat(t){e((e=>{e.selectedDeleteChatList=e.selectedDeleteChatList.filter((e=>e.id!==t.id))}),!1,"removeDeleteChat")},toggleAllDeleteChat(t,s){e((e=>{const a=e.multiBotMap[t];if(s){const t=a.chatList.filter((e=>e.status===Wn.DONE||e.status===Wn.ERROR)).filter((e=>e.type===$n.REPLY||e.type===$n.VOICE_CALL_REPLY||e.type===$n.GREETING));t.length===e.selectedDeleteChatList.length?e.selectedDeleteChatList=[]:e.selectedDeleteChatList=t}else a.chatList.filter((e=>e.status===Wn.DONE||e.status===Wn.ERROR)).length===e.selectedDeleteChatList.length?e.selectedDeleteChatList=[]:e.selectedDeleteChatList=a.chatList.filter((e=>e.status===Wn.DONE||e.status===Wn.ERROR))}),!1,"toggleAllDeleteChat")},clearDeleteChat(){e((e=>{e.selectedDeleteChatList=[]}),!1,"clearDeleteChat")},pushErrorChatRecord(s,a){const n=t().computed.currentUserId,i=`errChatRecord-${a}-${n}`,r=localStorage.getItem(i)?JSON.parse(localStorage.getItem(i)):[];r.push(Object.assign(Object.assign({},s),{userId:n})),localStorage.setItem(i,JSON.stringify(r)),e((e=>{e.errorChatRecordList=r||[]}),!1,"pushErrorChatRecord")},removeErrorChatRecord(s,a){const n=`errChatRecord-${a}-${t().computed.currentUserId}`,i=(localStorage.getItem(n)?JSON.parse(localStorage.getItem(n)):[]).filter((e=>e.id!==s));localStorage.setItem(n,JSON.stringify(i)),e((e=>{e.errorChatRecordList=i}),!1,"removeErrorChatRecord")},setBotDetailOpen(t){e((e=>{e.botDetailOpen=t}),!1,"setBotDetailOpen")},replaceStreamWithNormalMessage(t=!1){e((e=>{for(const s in e.multiBotMap)(t||s!==e.computed.currentBotId)&&(e.multiBotMap[s].chatList=e.multiBotMap[s].chatList.map((e=>(e.type!==$n.REPLY&&e.type!==$n.GREETING||!(e.audioStream&&0!==e.audioStream.length||e.textStream&&0!==e.textStream.length)||e.status!==Wn.DONE&&e.status!==Wn.ERROR||(e.audioStream=[],e.textStream=[]),e))))}),!1,"replaceStreamWithNormalMessage")},pushMsgIdtoList(s){t().sentMsgIdList.includes(s)||e((e=>{e.sentMsgIdList.push(s)}),!1,"pushMsgIdtoList")},setTextInput(t,s){e((e=>{e.textInputMap[t]=s,Cs.setTextInputMap(e.textInputMap)}),!1,"setTextInput")},setDriverChatId(t){e((e=>{e.driverChatId=t}),!1,"setDriverChatId")},setIsChatDriving(t){e((e=>{e.isChatDriving=t}),!1,"setIsChatDriving")},clearTextInput(){e((e=>{e.textInputMap={},Cs.removeTextInputMap()}),!1,"clearTextInput")},openContextmenu(){e((e=>{e.isOpenContextmenu=!0}),!1,"openContextmenu")},closeContextmenu(){e((e=>{e.isOpenContextmenu=!1}),!1,"closeContextmenu")},setCopyText(t){e((e=>{e.copyText=t}),!1,"setCopyText")},setLoginPopVisible(t){e((e=>{e.loginPopVisible=t}),!1,"setLoginPopVisible")},setAddedFriendFlag(t){e((e=>{e.addedFriendFlag=t}),!1,"setAddedFriendFlag")},setChatBodyType(t){e((e=>{e.chatBodyType=t}),!1,"setChatBodyType")},setIsKol(t){e((e=>{e.isKol=t}),!1,"setIsKol")},setTransactionDisplayItem(t){e((e=>{e.transactionDisplaySet.add(t),Cs.setTransactionDisplaySet(e.transactionDisplaySet)}),!1,"setTransactionDisplayItem")},async pollingChatMsg(e){var s,a,n,i,r;const l=t().multiBotMap[String(e.botId)].chatDic.get(e.id);if((null==l?void 0:l.status)===Wn.CANCELING||(null==l?void 0:l.status)===Wn.CANCELED||"JOB_STATUS_CANCELED"===(null===(s=e.asyncJobInfo)||void 0===s?void 0:s.status))return!0;const{imageGenMessageResponse:d,asyncJobInfo:c}=e,u=(null==d?void 0:d.jobId)||(null==c?void 0:c.jobId)||"";if(!u||"0"===u)return!0;try{t().setSending(!0);const s=await Hs(u),l=null==s?void 0:s.data,d=(null===(a=null==l?void 0:l.data)||void 0===a?void 0:a.message)||{},c=d.asyncJobInfo;if(l&&(null==c?void 0:c.jobId)){const{imageGenMessageResponse:e,message:s}=null==l?void 0:l.data;if(!e){const e=o.last(null===(n=null==s?void 0:s.extraInfo)||void 0===n?void 0:n.runningWidgetInfo)||{};"JOB_STATUS_DOING"===(null==l?void 0:l.status)&&e.widgetName&&(s.text=si(e)),li.getState().setBotLastMessage(s.botId,s)}return t().addSSeTextStream({index:0,isFinal:!1,text:null!==(i=null==d?void 0:d.text)&&void 0!==i?i:"",replyMessage:d,modelStatus:null==c?void 0:c.status,isJob:!0}),((null==c?void 0:c.status)===qn.EMBED_OBJ_STATUS_DONE||(null==c?void 0:c.status)===qn.EMBED_OBJ_STATUS_ERROR)&&(t().setSending(!1),!0)}if(s.success&&"JOB_STATUS_FAILED"===(null==l?void 0:l.status))return t().setSending(!1),!0;if(s.success&&"JOB_STATUS_DONE"===(null==l?void 0:l.status)){const{imageGenMessageResponse:s,message:a}=null==l?void 0:l.data;return s?t().addSSEImageStream({imageGenMessageResponse:s,replyMessage:e,genStatus:At.DONE}):li.getState().setBotLastMessage(a.botId,a),!0}return!s.success&&(t().addSSeTextStream({index:0,isFinal:!1,text:null!==(r=null==d?void 0:d.text)&&void 0!==r?r:"",replyMessage:d,modelStatus:qn.EMBED_OBJ_STATUS_ERROR}),t().setSending(!1),!0)}catch(e){return t().setSending(!1),!0}},async getImageFormParamsAsync(){if(0===Object.keys(t().imageParams||{}).length){const t=await Vs.post("/v1/bot/image_gen_param",{body:{},isGoLang:!0,adapter:e=>{var t;const{imageSamplerNameList:s,imageSize:a,sdModel:n}=e;return Object.assign(Object.assign({},e),{sdModel:(n||[]).map((e=>Object.assign(Object.assign({},e),{label:e.modelName,value:e.modelId}))),imageSize:Object.assign(Object.assign({},a),{imageSizePreset:(null!==(t=null==a?void 0:a.imageSizePreset)&&void 0!==t?t:[]).concat({presetName:"other",width:a.sizeWidthMin,height:a.sizeHeightMin}).map(((e,t)=>Object.assign(Object.assign({},e),{label:e.presetName,value:e.presetName})))}),imageSamplerNameList:(s||[]).map((e=>({label:e,value:e})))})}});t.success&&e((e=>{e.imageParams=t.data}))}},toggleImagePanelOpen(t){e((e=>{e.imagePanelParams=t}))},async uploadFiles(s,a,n){e((e=>{const t=e.fileUpload.filesMap[s]||[];if(n){const n=t.map((e=>e.id===a[0].id?a[0]:e));e.fileUpload.filesMap[s]=[...n]}else e.fileUpload.filesMap[s]=[...t,...a]}));for(const n of a)di((async()=>{const{deletedList:a}=t().fileUpload;if(a.includes(n.id))return void e((e=>{e.fileUpload.deletedList=e.fileUpload.deletedList.filter((e=>e!==n.id))}));e((e=>{e.fileUpload.uploading=n}));const i=await ti({scenario:Fn.SCENARIO_IM_CHAT,contentType:n.uiData.contentType,onProgress:t=>{e((e=>{e.fileUpload.uploading=Object.assign(Object.assign({},n),{progress:t})}))},file:n.file,cancelToken:t=>{e((e=>{const a=(e.fileUpload.filesMap[s]||[]).map((e=>e.id===n.id?Object.assign(Object.assign({},e),{cancelToken:{cancel:t}}):e));e.fileUpload.filesMap[s]=a}))}});t().fileUpload.deletedList.includes(n.id)?e((e=>{e.fileUpload.deletedList=e.fileUpload.deletedList.filter((e=>e!==n.id)),e.fileUpload.uploading=null})):e((e=>{0===di.pendingCount&&(e.fileUpload.uploading=null);const{deletedList:t}=e.fileUpload;t.includes(n.id)&&(e.fileUpload.uploading=null);const a=(e.fileUpload.filesMap[s]||[]).map((e=>e.id===n.id?Object.assign(Object.assign({},e),{status:(null==i?void 0:i.objectAccessUrl)?"completed":"error",url:null==i?void 0:i.objectAccessUrl}):e));e.fileUpload.filesMap[s]=a}))}))},deleteUploadFiles(t,s){e((e=>{const a=e.fileUpload.filesMap[t]||[];if(s){e.fileUpload.filesMap[t]=a.filter((e=>e.id!==s));const n=a.filter((e=>e.id===s))[0];n.cancelToken.cancel&&n.cancelToken.cancel(),e.fileUpload.deletedList=[...e.fileUpload.deletedList,s]}else e.fileUpload.filesMap[t]=[]}))},setFileAlert(t){e((e=>{console.log(t),e.fileUpload.alert=t}))},showDragModal(t){e((e=>{e.fileUpload.dragModal=t}))},setReEditTriggerred(t){e((e=>{e.reEditTriggerred=t}))},setNetworkError(t,s){e((e=>{e.multiBotMap[t].networkError=s}))}})),{store:"chat"})),(e=>{var t,s,a,n,i;return{chatList:e.computed.currentBotId&&null!==(s=null===(t=e.multiBotMap[e.computed.currentBotId])||void 0===t?void 0:t.chatList)&&void 0!==s?s:[],networkError:!!e.computed.currentBotId&&(null===(a=e.multiBotMap[e.computed.currentBotId])||void 0===a?void 0:a.networkError),botLastMessage:null===(n=e.multiBotMap[e.computed.currentBotId])||void 0===n?void 0:n.chatList.at(-1),botLastValidMessage:null===(i=e.multiBotMap[e.computed.currentBotId])||void 0===i?void 0:i.chatList.reduceRight(((e,t)=>e||(t.type===$n.REPLY&&t.status===Wn.DONE?t:null)||(t.type===$n.GREETING&&t.status===Wn.DONE?t:null)),null)}}))),function(e){e.BOT_STATUS_UNSPECIFIED="BOT_STATUS_UNSPECIFIED",e.Public="Public",e.Active="Active",e.Inactive="Inactive"}(ui||(ui={})),function(e){e.Pending="pending",e.Processing="processing",e.Failed="failed",e.Done="done"}(pi||(pi={})),function(e){e.BACKGROUND="BACKGROUND",e.OTHER="OTHER"}(mi||(mi={})),function(e){e.BOT_CHAT_MODEL_CATEGORY_UNSPECIFIED="BOT_CHAT_MODEL_CATEGORY_UNSPECIFIED",e.BOT_CHAT_MODEL_CATEGORY_CLOSESOURCE="BOT_CHAT_MODEL_CATEGORY_CLOSESOURCE",e.BOT_CHAT_MODEL_CATEGORY_OPENSOURCE="BOT_CHAT_MODEL_CATEGORY_OPENSOURCE",e.BOT_CHAT_MODEL_CATEGORY_SELFDEVELOP="BOT_CHAT_MODEL_CATEGORY_SELFDEVELOP"}(gi||(gi={})),function(e){e.BOT_CHAT_MODEL_STATUS_UNSPECIFIED="BOT_CHAT_MODEL_STATUS_UNSPECIFIED",e.BOT_CHAT_MODEL_STATUS_ACTIVE="BOT_CHAT_MODEL_STATUS_ACTIVE",e.BOT_CHAT_MODEL_STATUS_INVISIBLE="BOT_CHAT_MODEL_STATUS_INVISIBLE",e.BOT_CHAT_MODEL_STATUS_DISABLE="BOT_CHAT_MODEL_STATUS_DISABLE"}(fi||(fi={}));const hi=new class{constructor(){this.db=new _e.default("widgetChatHisDB"),this.db.version(1).stores({chats:"[userId+widgetId]"}),this.chats=this.db.table("chats")}async storeChat(e,t,s){if(t)try{const a=s.filter((t=>t.userId===e));await this.chats.put({userId:e,widgetId:t,chatList:JSON.stringify(a)})}catch(e){console.error("Error storing chat:",e)}}async getChat(e,t){try{const s=await this.chats.get([e,t]);return(s?JSON.parse(null==s?void 0:s.chatList):[]).filter((t=>t.userId===e))}catch(e){return console.error("Error getting chat:",e),null}}};N.enableMapSet();const vi=ai(1),Ei={languageList:[],ttsList:[],myVoiceList:[],noCodeCheckPassed:!1,pendingVoiceIds:new Set,uncheckedSet:new Set,selectedTTSId:"",oriForm:null,currentForm:null,editNotSave:!1,ttsContentMap:new Map,widgetList:[],cardWidgetList:[],widgetFilters:[],widgetName:"",filterValues:{},widgetPageToken:"0",widgetDataPush:!1,gettingChatWidgetList:!1,chatWidgetHasMore:!1,chatWidgetPageToken:"0",sidebarWidgetList:null,gettingChatBotList:!1,sidebarMyBotList:null,sidebarToolboxList:null,draftBotIds:new Set,widgetStateMap:{},fileUpload:{uploading:null,filesMap:{},deletedList:[],alert:{},dragModal:!1},widgetErrorChatRecordList:[],widgetInputType:"text",lastWidgetInputType:"text",widgetSending:!1,selectedWidgetDeleteChatList:[],sentWidgetMsgIdList:new Set,widgetTextInputMap:{},childTagsObj:{},selectedWidgetId:null,removeWidgetId:null,selectedBotId:null,initializeScrolled:!1,poped:!1,newlyAdded:!1,widgetLastMessageMap:new Map,widgetDriverChatId:"",widgetStartJobIds:[],recommend:{banners:[],list:[]},tagFilters:[],searchList:[],computed:{get currentUserId(){return Gn.getState().userId}}};w.create()(Se.default(In(_n(((e,t)=>Object.assign(Object.assign({},Ei),{setNoCodeCheckPassed(t){e({noCodeCheckPassed:t},!1,"setNoCodeCheckPassed")},setRecommend(t){e({recommend:t},!1,"setRecommend")},setTagFilters(t){e({tagFilters:t},!1,"setTagFilters")},setSearchList(t){e({searchList:t},!1,"setSearchList")},setCardWidgetList(t){e({cardWidgetList:t},!1,"setCardWidgetList")},setWidgetSearchList(t){e({widgetList:t},!1,"setWidgetSearchList")},setWidgetFilters(t){e({widgetFilters:t},!1,"setWidgetFilters")},setWidgetName(t){e({widgetName:t},!1,"setWidgetName")},setFilterValues(t){e((e=>{e.filterValues=t,Cs.setFilterValues(t)}),!1,"setFilterValues")},getFilterValues:()=>zt(t().filterValues)?Cs.getFilterValues():t().filterValues,setChildTagsObj(t){e((e=>{e.childTagsObj=t,Cs.setChildTagsObj(t)}),!1,"setFilterValues")},getChildTagsObj:()=>zt(t().childTagsObj)?Cs.getChildTagsObj():t().childTagsObj,setWidgetPageToken(t){e({widgetPageToken:t},!1,"setWidgetPageToken")},setWidgetDataPush(t){e({widgetDataPush:t},!1,"setWidgetDataPush")},setLanguageList(t){e({languageList:t},!1,"setLanguageList")},setTTSList(t){e({ttsList:t},!1,"setTTSList")},setMyVoiceList(t){e((e=>{e.myVoiceList=t,t.forEach((t=>{const s=`${t.id}`;t.status===pi.Pending||t.status===pi.Processing?e.pendingVoiceIds.has(s)||e.pendingVoiceIds.add(s):e.pendingVoiceIds.has(s)&&(e.pendingVoiceIds.delete(s),t.status===pi.Done&&e.uncheckedSet.add(s))}))}),!1,"setMyVoiceList")},removeItemFromUncheckedSet(t){e((e=>{e.uncheckedSet.delete(t)}),!1,"removeItemFromUncheckedSet")},clearUncheckedSet(){e((e=>{e.uncheckedSet.clear()}),!1,"clearUncheckedSet")},removeDeletedVoiceIdFromSet(t){e((e=>{e.pendingVoiceIds.delete(t),e.uncheckedSet.delete(t)}),!1,"removeDeletedVoiceIdFromSet")},setSelectedTTSId(t){e({selectedTTSId:t||""},!1,"setSelectedTTSId")},setOriForm(t){e({oriForm:t||null},!1,"setOriForm")},setCurrentForm(t){e({currentForm:t||null},!1,"setCurrentForm")},setCurrentFormItem(t,s){e((e=>{e.currentForm[t]=s}),!1,"setCurrentFormItem")},setEditNotSave(){e((e=>{const t=e.oriForm||{},s=e.currentForm||{},a=Object.keys(t)||[];if(a.length<=0)return!1;e.editNotSave=!a.every((e=>{var a,n,i,r;return("string"==typeof(null==t?void 0:t[e])?null===(n=null===(a=null==t?void 0:t[e])||void 0===a?void 0:a.replaceAll("\r",""))||void 0===n?void 0:n.replaceAll("\n",""):null==t?void 0:t[e])==("string"==typeof(null==s?void 0:s[e])?null===(r=null===(i=null==s?void 0:s[e])||void 0===i?void 0:i.replaceAll("\r",""))||void 0===r?void 0:r.replaceAll("\n",""):null==s?void 0:s[e])}))}),!1,"setEditNotSave")},getEditNotSave(e){const s=t().oriForm||{},a=t().currentForm||{},n=e||Object.keys(s)||[];return!(n.length<=0)&&!n.every((e=>{var t,n,i,r;return("string"==typeof(null==s?void 0:s[e])?null===(n=null===(t=null==s?void 0:s[e])||void 0===t?void 0:t.replaceAll("\r",""))||void 0===n?void 0:n.replaceAll("\n",""):null==s?void 0:s[e])==("string"==typeof(null==a?void 0:a[e])?null===(r=null===(i=null==a?void 0:a[e])||void 0===i?void 0:i.replaceAll("\r",""))||void 0===r?void 0:r.replaceAll("\n",""):null==a?void 0:a[e])}))},recordTtsContent(t,s,a){e((e=>{let n=[...e.ttsContentMap.get(t)||[]];const i=n.filter((({content:e})=>Object.values(ks).includes(e)||Object.values(Bs).includes(e)));i.length>0?n=[...i,{content:s,voiceUrl:a}]:(n.shift(),n.push({content:s,voiceUrl:a})),e.ttsContentMap.set(t,n)}),!1,"recordTtsContent")},getTtsContent(e,s){const a=t().ttsContentMap.get(`${e}`);if(Array.isArray(a)){const e=a.find((e=>e.content===s));if(e)return e.voiceUrl}},getLatestVoice(e){var s;const a=t().ttsContentMap.get(e);if(Array.isArray(a))return null!==(s=a[1])&&void 0!==s?s:a[0]},resetTtsContent(){e((e=>{e.ttsContentMap.clear()}),!1,"resetTtsContent")},generateWidgetStateMap(t){e((e=>{for(const s of t)e.widgetStateMap[s.id]||(e.widgetStateMap[s.id]={chatList:[],chatDic:new Map})}),!1,"generatewidgetStateMap")},appendSidebarWidgetList(t){e((e=>{var s;const a=[...null!==(s=e.sidebarWidgetList)&&void 0!==s?s:[],...t];e.sidebarWidgetList=a,e.generateWidgetStateMap(a)}),!1,"appendSidebarWidgetList")},setSidebarWidgetList(t){e((e=>{e.sidebarWidgetList=t,e.generateWidgetStateMap(t)}),!1,"setSidebarWidgetList")},setSidebarMyBotList(t){e((e=>{e.sidebarMyBotList=t}),!1,"setSidebarMyBotList")},setDraftBotIds(s){const a=t().draftBotIds,n="function"==typeof s?s(a):s;((e,t)=>{if(e===t)return!0;if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0})(a,n)||e((e=>{e.draftBotIds=n}))},updateBot(t){e((e=>{const{sidebarMyBotList:s}=e;if(!s)return;const a=s.findIndex((e=>e.id===t.id));a<0||(s[a]=Object.assign({},t))}))},setSidebarToolboxList(t){e((e=>{e.sidebarToolboxList=t}),!1,"setSidebarToolboxList")},async widgetUploadFiles(s,a,n){e((e=>{const t=e.fileUpload.filesMap[s]||[];if(n){const n=t.map((e=>e.id===a[0].id?a[0]:e));e.fileUpload.filesMap[s]=[...n]}else e.fileUpload.filesMap[s]=[...t,...a]}));for(const n of a)vi((async()=>{const{deletedList:a}=t().fileUpload;if(a.includes(n.id))return void e((e=>{e.fileUpload.deletedList=e.fileUpload.deletedList.filter((e=>e!==n.id))}));e((e=>{e.fileUpload.uploading=n}));const i=await ti({scenario:Fn.SCENARIO_IM_CHAT,contentType:n.uiData.contentType,onProgress:t=>{e((e=>{e.fileUpload.uploading=Object.assign(Object.assign({},n),{progress:t})}))},file:n.file,cancelToken:t=>{e((e=>{const a=(e.fileUpload.filesMap[s]||[]).map((e=>e.id===n.id?Object.assign(Object.assign({},e),{cancelToken:{cancel:t}}):e));e.fileUpload.filesMap[s]=a}))}});t().fileUpload.deletedList.includes(n.id)?e((e=>{e.fileUpload.deletedList=e.fileUpload.deletedList.filter((e=>e!==n.id)),e.fileUpload.uploading=null})):e((e=>{0===vi.pendingCount&&(e.fileUpload.uploading=null);const{deletedList:t}=e.fileUpload;t.includes(n.id)&&(e.fileUpload.uploading=null);const a=(e.fileUpload.filesMap[s]||[]).map((e=>e.id===n.id?Object.assign(Object.assign({},e),{status:(null==i?void 0:i.objectAccessUrl)?"completed":"error",url:null==i?void 0:i.objectAccessUrl}):e));e.fileUpload.filesMap[s]=a}))}))},deleteWidgetUploadFiles(t,s){e((e=>{const a=e.fileUpload.filesMap[t]||[];if(s){e.fileUpload.filesMap[t]=a.filter((e=>e.id!==s));const n=a.filter((e=>e.id===s))[0];n.cancelToken.cancel&&n.cancelToken.cancel(),e.fileUpload.deletedList=[...e.fileUpload.deletedList,s]}else e.fileUpload.filesMap[t]=[]}))},updateWidgetMessage(e){t().widgetAddHistoryRecord(e)},widgetAddHistoryRecord(t){const s=new Map,a=Array.isArray(t)?t:[t],n=new Set(a.map((e=>e.widgetId)));for(const e of a)s.has(e.widgetId)||s.set(e.widgetId,[]),s.get(e.widgetId).push(e);e((e=>{for(const t of[...s.keys()]){e.widgetStateMap[t]||(e.widgetStateMap[t]={chatList:[],chatDic:new Map});const a=e.widgetStateMap[t],i=s.get(t);for(const s of i){if(s.replaceLocalSend){const e=[...a.chatDic.values()].find((e=>e.isLocalSend));e&&a.chatDic.delete(e.localId)}if(s.replaceLocalReply){const e=[...a.chatDic.values()].find((e=>e.isLocalReply));e&&a.chatDic.delete(e.localId)}if(s.deleteId&&a.chatDic.delete(s.deleteId),!s.deleteId){const n=a.chatDic.get(s.id);e.widgetStateMap[t].chatDic.set(s.localId||s.id,Object.assign(Object.assign({},s),{audioStream:(null==n?void 0:n.audioStream)?null==n?void 0:n.audioStream:s.audioStream,textStream:(null==n?void 0:n.textStream)?null==n?void 0:n.textStream:s.textStream,imageGenMessageResponse:(null==n?void 0:n.imageGenMessageResponse)?null==n?void 0:n.imageGenMessageResponse:s.imageGenMessageResponse,translationStream:(null==n?void 0:n.translationStream)?null==n?void 0:n.translationStream:s.translationStream}))}const i=[...e.widgetStateMap[t].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)),r=i.filter((e=>e.isLocalSend||e.isLocalReply)).sort(((e,t)=>e.isLocalSend&&!t.isLocalSend||t.localReply&&!e.localReply?-1:0)),o=i.filter((e=>!e.isLocalSend&&!e.isLocalReply)).sort(((e,t)=>BigInt(e.id||e.localId||0)-BigInt(t.id||t.localId||0)>=0?1:-1)),l=[...o,...r];e.widgetStateMap[t].chatList=l,n.has(t)&&e.computed.currentUserId&&hi.storeChat(e.computed.currentUserId,t,l.slice(-10))}}}),!1,"widgetAddHistoryRecord")},widgetClearAndAddHistoryRecords(t,s){e((e=>{const a=s.filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1));e.widgetStateMap[t]&&(e.widgetStateMap[t].chatList=a,e.widgetStateMap[t].chatDic.clear(),a.forEach((s=>{e.widgetStateMap[t].chatDic.set(s.id,s)}))),e.computed.currentUserId&&hi.storeChat(e.computed.currentUserId,t,a.slice(-10))}))},setWidgetInputType(t){e((e=>{["share","delete"].includes(t)&&["audio","text"].includes(e.widgetInputType)?e.lastWidgetInputType=e.widgetInputType:e.lastWidgetInputType=t,e.widgetInputType=t}),!1,"setWidgetInputType")},setWidgetSending(t){e((e=>{e.widgetSending=t}),!1,"setWidgetSending")},addWidgetDeleteChat(s){t().selectedWidgetDeleteChatList.some((e=>e.id===s.id))||e((e=>{e.selectedWidgetDeleteChatList.push(s)}),!1,"addWidgetDeleteChat")},clearWidgetDeleteChat(){e((e=>{e.selectedWidgetDeleteChatList=[]}),!1,"clearWidgetDeleteChat")},removeWidgetHistoryRecord(t){const s=new Map,a=Array.isArray(t)?t:[t],n=new Set(a.map((e=>e.widgetId)));for(const e of a)s.has(e.widgetId)||s.set(e.widgetId,[]),s.get(e.widgetId).push(e);e((e=>{for(const t of[...s.keys()]){e.widgetStateMap[t]||(e.widgetStateMap[t]={chatList:[],chatDic:new Map});const a=s.get(t);for(const s of a){e.widgetStateMap[t].chatDic.delete(s.id);const a=[...e.widgetStateMap[t].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1));e.widgetStateMap[t].chatList=a,n.has(t)&&e.computed.currentUserId&&hi.storeChat(e.computed.currentUserId,t,a.slice(-10))}}}),!1,"removeWidgetHistoryRecord")},removeHistoryRecordExceptSpecifiedMessages(t,s){e((e=>{if(!e.widgetStateMap[t])return;const a=e.widgetStateMap[t].chatList.filter((e=>s.some((t=>t===e.id)))),n=a.filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1));e.widgetStateMap[t].chatList=[...n],e.computed.currentUserId&&hi.storeChat(e.computed.currentUserId,t,n.slice(-10)),e.widgetStateMap[t].chatDic.clear();for(const s of a)e.widgetStateMap[t].chatDic.set(s.id,s)}),!1,"removeHistoryRecordExceptSpecifiedMessages")},getWidgetLastValidInteractionMessage(e){const{chatList:s}=t().widgetStateMap[e],a=s.filter((e=>(e.type===$n.REPLY||e.type===$n.TEXT||e.type===$n.VOICE)&&e.status===Wn.DONE));return a[a.length-1]},setWidgetLastMessage(t,s){e((e=>{if(s){const a=Object.assign(Object.assign({},s),{createdDate:new Date(s.createdDate).getTime()});e.widgetLastMessageMap.set(t,a)}else e.widgetLastMessageMap.delete(t)}),!1,"setWidgetLastMessage")},removeWidgetDeleteChat(t){e((e=>{e.selectedWidgetDeleteChatList=e.selectedWidgetDeleteChatList.filter((e=>e.id!==t.id))}),!1,"removeWidgetDeleteChat")},toggleWidgetAllDeleteChat(t,s){e((e=>{const a=e.widgetStateMap[t];if(s){const t=a.chatList.filter((e=>e.status===Wn.DONE||e.status===Wn.ERROR)).filter((e=>e.type===$n.REPLY||e.type===$n.VOICE_CALL_REPLY||e.type===$n.GREETING));t.length===e.selectedWidgetDeleteChatList.length?e.selectedWidgetDeleteChatList=[]:e.selectedWidgetDeleteChatList=t}else a.chatList.filter((e=>e.status===Wn.DONE||e.status===Wn.ERROR)).length===e.selectedWidgetDeleteChatList.length?e.selectedWidgetDeleteChatList=[]:e.selectedWidgetDeleteChatList=a.chatList.filter((e=>e.status===Wn.DONE||e.status===Wn.ERROR))}),!1,"toggleWidgetAllDeleteChat")},setWidgetTranslatedText(t){e((e=>{const s=e.widgetStateMap[t.widgetId].chatDic.get(t.id);s.translation=t.translation,e.widgetStateMap[t.widgetId].chatDic.set(t.id,Object.assign({},s))}),!1,"setWidgetTranslatedText")},pushWidgetChatRecord(e){t().widgetAddHistoryRecord(e)},pushWidgetMsgIdToList(s){t().sentWidgetMsgIdList.has(s)||e((e=>{e.sentWidgetMsgIdList.add(s)}),!1,"pushWidgetMsgIdToList")},setWidgetTextInput(t,s){e((e=>{e.widgetTextInputMap[t]=s,Cs.setWidgetTextInputMap(e.widgetTextInputMap)}),!1,"setTextInput")},pushWidgetErrorChatRecord(s,a){const n=t().computed.currentUserId,i=`widgetErrChatRecord-${a}-${n}`,r=localStorage.getItem(i)?JSON.parse(localStorage.getItem(i)):[];r.push(Object.assign(Object.assign({},s),{userId:n})),localStorage.setItem(i,JSON.stringify(r)),e((e=>{e.widgetErrorChatRecordList=r||[]}),!1,"pushWidgetErrorChatRecord")},removeWidgetErrorChatRecord(s,a){const n=`widgetErrChatRecord-${a}-${t().computed.currentUserId}`,i=(localStorage.getItem(n)?JSON.parse(localStorage.getItem(n)):[]).filter((e=>e.id!==s));localStorage.setItem(n,JSON.stringify(i)),e((e=>{e.widgetErrorChatRecordList=i}),!1,"removeWidgetErrorChatRecord")},addWidgetSSETextStream(t){e((e=>{var s,a,n;const i=e.widgetStateMap[t.replyMessage.widgetId].chatDic.get(t.replyMessage.id);(null==t?void 0:t.isJob)?i.text=t.text:i.text+=t.text,i.asyncJobInfo=Object.assign(Object.assign({},(null===(s=null==t?void 0:t.replyMessage)||void 0===s?void 0:s.asyncJobInfo)||{}),{status:null!==(a=t.modelStatus)&&void 0!==a?a:""}),i.embedObjs=(null===(n=null==t?void 0:t.replyMessage)||void 0===n?void 0:n.embedObjs)||[],e.widgetStateMap[t.replyMessage.widgetId].chatDic.set(t.replyMessage.id,Object.assign({},i)),e.widgetStateMap[t.replyMessage.widgetId].chatList=[...e.widgetStateMap[t.replyMessage.widgetId].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"addWidgetSSETextStream")},addWidgetSSEAudioStream(t){e((e=>{var s;const a=e.widgetStateMap[t.replyMessage.widgetId].chatDic.get(t.replyMessage.id);a.audioStream=[...null!==(s=a.audioStream)&&void 0!==s?s:[],t],e.widgetStateMap[t.replyMessage.widgetId].chatDic.set(t.replyMessage.id,Object.assign({},a))}),!1,"addWidgetSSEAudioStream")},addWidgetSSEImageStream(t){e((e=>{var s,a,n;const i=e.widgetStateMap[t.replyMessage.widgetId].chatDic.get(t.replyMessage.id);i.imageGenMessageResponse=Object.assign(Object.assign(Object.assign({},null!==(s=null==i?void 0:i.imageGenMessageResponse)&&void 0!==s?s:{}),(null==t?void 0:t.imageGenMessageResponse)||{}),{metadata:(null===(a=null==i?void 0:i.imageGenMessageResponse)||void 0===a?void 0:a.metadata)||(null===(n=t.imageGenMessageResponse)||void 0===n?void 0:n.metadata),genStatus:t.genStatus}),e.widgetStateMap[t.replyMessage.widgetId].chatDic.set(t.replyMessage.id,Object.assign({},i)),e.widgetStateMap[t.replyMessage.widgetId].chatList=[...e.widgetStateMap[t.replyMessage.widgetId].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"addWidgetSSEImageStream")},receiveWidgetVoiceUrlFromSSe(t,s,a){e((e=>{const n=e.widgetStateMap[a].chatDic.get(s);n.voiceUrl=t,n.audioStream=[],e.widgetStateMap[a].chatDic.set(s,Object.assign({},n)),e.widgetStateMap[a].chatList=[...e.widgetStateMap[a].chatDic.values()].filter((t=>t.userId==e.computed.currentUserId)).sort(((e,t)=>BigInt(e.id)-BigInt(t.id)>=0?1:-1))}),!1,"receiveWidgetVoiceUrlFromSSe")},async pollingWidgetChatMsg(e){var s,a,n,i;const{imageGenMessageResponse:r,asyncJobInfo:o}=e,l=(null==r?void 0:r.jobId)||(null==o?void 0:o.jobId)||"";if(!l||"0"===l)return!0;try{const r=await Hs(l),o=null==r?void 0:r.data,d=(null===(s=null==o?void 0:o.data)||void 0===s?void 0:s.message)||{},c=d.asyncJobInfo;if(o&&(null==c?void 0:c.jobId))return t().addWidgetSSETextStream({index:0,isFinal:!1,text:null!==(a=null==d?void 0:d.text)&&void 0!==a?a:"",replyMessage:d,modelStatus:null==c?void 0:c.status,isJob:!0}),((null==c?void 0:c.status)===qn.EMBED_OBJ_STATUS_DONE||(null==c?void 0:c.status)===qn.EMBED_OBJ_STATUS_ERROR)&&(t().setWidgetSending(!1),(null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.message)&&t().updateWidgetMessage(o.data.message),!0);if(r.success&&"JOB_STATUS_FAILED"===(null==o?void 0:o.status))return t().setWidgetSending(!1),!0;if(r.success&&"JOB_STATUS_DONE"===(null==o?void 0:o.status)){const{imageGenMessageResponse:s}=null==o?void 0:o.data;return t().addWidgetSSEImageStream({imageGenMessageResponse:s,replyMessage:e,genStatus:At.DONE}),t().setWidgetSending(!1),!0}return!r.success&&(t().addWidgetSSETextStream({index:0,isFinal:!1,text:null!==(i=null==d?void 0:d.text)&&void 0!==i?i:"",replyMessage:d,modelStatus:qn.EMBED_OBJ_STATUS_ERROR}),t().setWidgetSending(!1),!0)}catch(s){return t().addWidgetSSETextStream({index:0,isFinal:!1,text:"",replyMessage:e,modelStatus:qn.EMBED_OBJ_STATUS_ERROR}),t().setWidgetSending(!1),!0}},setSelectedWidgetId(t){e((e=>{e.selectedWidgetId=t}),!1,"setSelectedWidgetId")},setRemoveWidgetId(t){e((e=>{e.removeWidgetId=t}),!1,"setRemoveWidgetId")},setSelectedBotId(t){e((e=>{e.selectedBotId=null!=t?t:null}),!1,"setSelectedBotId")},setGettingChatWidgetList(t){e((e=>{e.gettingChatWidgetList=t}),!1,"setGettingChatWidgetList")},setGettingChatBotList(t){e((e=>{e.gettingChatBotList=t}),!1,"setGettingChatBotList")},setChatWidgetHasMore(t){e((e=>{e.chatWidgetHasMore=t}),!1,"setChatWidgetHasMore")},setChatWidgetPageToken(t){e((e=>{e.chatWidgetPageToken=t}),!1,"setChatWidgetPageToken")},markPromptWidgetAsUnlocked(t){e((e=>{var s,a;const n=null===(a=null!==(s=e.sidebarWidgetList)&&void 0!==s?s:[])||void 0===a?void 0:a.find((e=>e.id===t));n&&(n.hasUnlocked=!0)}),!1,"markPromptWidgetAsUnlocked")},setInitializeScrolled(t){e((e=>{e.initializeScrolled=t}),!1,"setInitializeScrolled")},popWidgetToTop(s){e((e=>{var a,n,i,r,o,l;const d=(null!==(a=e.sidebarWidgetList)&&void 0!==a?a:[]).findIndex((e=>e.id===s));if(-1!==d){const s=null===(i=null===(n=e.sidebarWidgetList)||void 0===n?void 0:n.splice(d,1))||void 0===i?void 0:i[0],a=(null!==(r=e.sidebarWidgetList)&&void 0!==r?r:[]).findIndex((e=>e.pinned===(null==s?void 0:s.pinned)));s&&(a>=0?null===(o=e.sidebarWidgetList)||void 0===o||o.splice(a,0,s):null===(l=e.sidebarWidgetList)||void 0===l||l.splice(0,0,s)),t().setPoped(!0)}}),!1,"popWidgetToTop")},setPoped(t){e((e=>{e.poped=t}),!1,"setPoped")},setNewlyAdded(t){e((e=>{e.newlyAdded=t}),!1,"setNewlyAdded")},setWidgetDriverChatId(t){e((e=>{e.widgetDriverChatId=t}),!1,"setWidgetDriverChatId")},setWidgetStartJobIds(t,s){e((e=>{e.widgetStartJobIds=s?[...e.widgetStartJobIds||[],t]:e.widgetStartJobIds.filter((e=>e!=t))}),!1,"setWidgetStartJobIds")},setWidgetFileAlert(t){e((e=>{e.fileUpload.alert=t}))},showWidgetDragModal(t){e((e=>{e.fileUpload.dragModal=t}))}})),{store:"workshop"})),(e=>{var t,s,a,n,i;return{hasUncheckedVoice:0!==e.uncheckedSet.size,hasErrorVoice:e.myVoiceList.some((e=>e.status===pi.Failed)),hasPendingVoice:0!==e.pendingVoiceIds.size,selectedMyVoiceItem:e.myVoiceList.find((t=>`${t.id}`===e.selectedTTSId))||null,widgetChatList:e.selectedWidgetId&&null!==(s=null===(t=e.widgetStateMap[e.selectedWidgetId])||void 0===t?void 0:t.chatList)&&void 0!==s?s:[],workshopListInitialized:null!=e.sidebarMyBotList&&null!=e.sidebarWidgetList,widgetLastMessage:e.selectedWidgetId?null===(a=e.widgetStateMap[e.selectedWidgetId])||void 0===a?void 0:a.chatList[(null===(n=e.widgetStateMap[e.selectedWidgetId])||void 0===n?void 0:n.chatList.length)-1]:void 0,widgetLastValidReplyMessage:e.selectedWidgetId?null===(i=e.widgetStateMap[e.selectedWidgetId])||void 0===i?void 0:i.chatList.reduceRight(((e,t)=>e||(t.type===$n.REPLY&&t.status===Wn.DONE?t:null)),null):void 0}})));const Si={searchList:[],tagFilters:{tagList:[],sortList:[]},postFullView:void 0,showPost:void 0,postDetail:{},postLoading:!0,setPostDetail:()=>{},setPostLoading:()=>{}};w.create()(Se.default(((e,t)=>Object.assign(Object.assign({},Si),{setSearchList:t=>{e({searchList:t})},setTagFilters:t=>{e({tagFilters:t})},setPostFullView:t=>{e({postFullView:t})},setShowPost:t=>{e({showPost:t})},setPostDetail:t=>{e({postDetail:t})},setPostLoading:t=>{e({postLoading:t})}})),(e=>({history:[]}))));var Ti=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const _i=oe.forwardRef(((e,s)=>{var{className:a,onClick:n}=e,i=Ti(e,["className","onClick"]);return t.jsx(le.Overlay,Object.assign({ref:s,className:De("fixed inset-0 z-50 bg-alpha-mask-desktop data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),onClick:e=>{n&&n(e)}},i))}));_i.displayName=le.Overlay.displayName;const bi=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Ti(e,["className"]);return t.jsx(M.Drawer.Overlay,Object.assign({ref:s,className:De("fixed inset-0 z-50 bg-alpha-mask-desktop",a)},n))}));bi.displayName=M.Drawer.Overlay.displayName;const Ii=oe.forwardRef(((e,s)=>{var{className:a,children:n}=e,i=Ti(e,["className","children"]);return t.jsx(le.Content,Object.assign({className:De("absolute left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2","duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] focus:outline-none",a)},i,{children:n}))})),xi=e=>{var{children:s}=e,a=Ti(e,["children"]);return t.jsx(le.Dialog,Object.assign({},a,{children:t.jsx(le.Portal,{children:s})}))},wi=oe.forwardRef(((e,s)=>{var{className:a}=e,n=Ti(e,["className"]);return p.useMedia("(max-width: 768px)")?t.jsx(M.Drawer.Title,Object.assign({ref:s},n,{className:De("text-xl text-default font-medium line-clamp-1",a)})):t.jsx(le.Title,Object.assign({ref:s},n,{className:De("text-xl text-default font-medium line-clamp-1",a)}))}));wi.displayName=le.Title.displayName;const Ni=s.cva("",{variants:{size:{lg:"w-[750px] max-h-[640px]",md:"w-[620px] max-h-[640px]",sm:"w-[380px] max-h-[640px]"},zIndex:{9:"z-[9]",99:"z-[99]",999:"z-[999]",9999:"z-[9999]"}},defaultVariants:{size:"lg",zIndex:99}}),yi=e=>{var{title:s,size:a="lg",zIndex:n=99,hideClose:i=!1,overlayClose:r=!0,modalOnly:o=!0,contentClassName:l,overlayClassName:d,iconClassName:c,closeClassName:u,fullScreen:m=!1,isLogin:g=!1,children:f,onClose:h}=e,v=Ti(e,["title","size","zIndex","hideClose","overlayClose","modalOnly","contentClassName","overlayClassName","iconClassName","closeClassName","fullScreen","isLogin","children","onClose"]);const E=p.useMedia("(max-width: 768px)");return E&&!o?t.jsx(M.Drawer.Root,Object.assign({},v,{children:t.jsxs(M.Drawer.Portal,{children:[t.jsx(bi,{onClick:()=>{r&&h&&h()},className:d}),t.jsxs(M.Drawer.Content,{className:De("fixed inset-x-0 bottom-0 z-50 h-auto overflow-hidden no-scrollbar bg-surface-default shadow-modal-default focus:outline-none",m?"rounded-t-none max-h-full":"rounded-t-2xl max-h-[85vh]"),children:[s?t.jsx(Oi,{children:t.jsx(wi,{children:s})}):null,t.jsx("div",{className:De("overflow-y-auto",m?s?"max-h-[calc(100vh-60px)]":"max-h-[100vh]":s?"max-h-[calc(85vh-60px)]":"max-h-[85vh]"),children:f}),!i&&t.jsxs(M.Drawer.Close,{className:De("absolute right-4 top-3",u),onClick:()=>{h&&h()},children:[t.jsx(ds,{icon:ms,size:"md",variant:"ghost",color:"default",className:c}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})})):t.jsxs(xi,Object.assign({},v,{children:[t.jsx(_i,{onClick:()=>{r&&h&&h()},className:d}),t.jsxs(Ii,{className:De("rounded-2xl bg-surface-default shadow-modal-default overflow-hidden",E?g?"w-[90%]":"w-[80%]":Ni({size:a,zIndex:n}),l),children:[s?t.jsx(Oi,{children:t.jsx(wi,{children:s})}):null,f,!i&&t.jsxs(le.Close,{className:De("absolute right-4 top-4",u),onClick:()=>{h&&h()},children:[t.jsx(ds,{icon:ms,size:"md",variant:"ghost",color:"default",className:c}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}))};function Oi(e){var{className:s,children:a}=e,n=Ti(e,["className","children"]);return t.jsx("div",Object.assign({className:De("flex flex-col py-4 md:py-5 px-4 justify-center border-b border-default",s)},n,{children:a}))}function Ci(e){var{className:s,children:a}=e,n=Ti(e,["className","children"]);return t.jsx("div",Object.assign({className:De("py-3",s)},n,{children:a}))}function Mi({isOpen:e,onClose:s,rewardInfo:a,count:n,isLoading:i=!1}){const r=l.useTranslations("common"),o=l.useTranslations("reward_center.reward_redemption_content.rewards");return t.jsx(yi,{open:e,onClose:s,size:"sm",modalOnly:!0,children:t.jsxs(Ci,{className:"p-5",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx(vt,{size:"xl",children:""}),t.jsx(vt,{size:"sm",className:"mt-3",children:r("congrats_verb")}),t.jsx(Et,{className:"mt-1.5",children:a.propType===ln.seasonBadge||a.propType===ln.standardBattlePass&&!a.subType.includes("m")||a.propType===ln.energyPack&&!a.subType.includes("bonus")?o(`${Gt(a.propType)}.use_success_tip`,{count:Number(En(a.subType))*n}):o(`${Gt(a.subType)}.use_success_tip`,{count:Number(En(a.subType))*n})})]}),t.jsx("div",{className:"w-full flex justify-center items-center mt-5",children:t.jsx(We,{variant:"primary",size:"lg",isBlock:!0,loading:i,onClick:s,tabIndex:-1,children:r("got_it")})})]})})}function Ai(){const e=Bn((e=>e.setMyProps)),t=Bn((e=>e.myProps)),s=Bn((e=>e.myPropsQuerying)),a=Bn((e=>e.setMyPropsQuerying));return{querying:s,queryProps:async()=>{try{a(!0);const{data:t}=await Vs.post("/v1/backpack/list",{isGoLang:!0,adapter:e=>e.items.map((e=>({id:e.item.id,name:e.item.name,description:e.item.description,media:Dt(e.item.mediaUrl,"https://cdn.myshell.ai/"),count:e.count,propType:e.item.itemType,subType:e.item.subType,startDate:Number(e.item.usableStartDateUnix)?Ee.default(Number(e.item.usableStartDateUnix)):void 0,endDate:Number(e.item.usableEndDateUnix)?Ee.default(Number(e.item.usableEndDateUnix)):void 0,status:e.status})))});e(null!=t?t:[])}catch(e){}finally{a(!1)}},myProps:t}}function Pi(){const[t,s]=e.useState(!1),{queryProps:a}=Ai();return{acting:t,handleUseProp:e.useCallback((async(e,t,n,i)=>{try{s(!0),await function(e,t){return Vs.post("/v1/backpack/use_backpack_item",{body:{backpackItemId:e,count:t},isGoLang:!0})}(e,n),i&&i(),a()}catch(e){}finally{s(!1)}}),[a])}}var Li;function Di(){const e=Gn((e=>e.setEnergyInfo)),t=Gn((e=>e.userId));return{getEnergyInfo:async(s=!0)=>{try{const{data:a}=await function(e){return Vs.post("/v1/user/get_energy",{body:{userId:e},isGoLang:!0,adapter:e=>e.energyInfo})}(t);s&&e(a)}catch(e){}}}}Oi.displayName="ModalHeader",Ci.displayName="ModalBody",function(e){e.UNSPECIFIED="BONDING_CURVE_CREATOR_STATUS_UNSPECIFIED",e.RUGGED="BONDING_CURVE_CREATOR_STATUS_RUGGED",e.NORMAL="BONDING_CURVE_CREATOR_STATUS_NORMAL"}(Li||(Li={}));const Ri=({onClose:s,type:a})=>{const{acting:n,handleUseProp:i}=Pi(),r=e.useRef(),{usableEnergyPack:o}=function(){const t=l.useTranslations("common"),{warning:s}=Vt(),a=Bn((e=>e.myProps)),n=Nn((e=>e.setNoEnergyWithUsablePropModalVisible)),i=e.useMemo((()=>{const e=a.filter((e=>e.propType===ln.energyPack&&(!e.endDate||Ee.default().isBefore(Ee.default(e.endDate)))));return e.length?e.reduce(((e,t)=>Number(En(null==t?void 0:t.subType))<Number(En(null==e?void 0:e.subType))?t:e)):null}),[a]),r=e.useCallback((()=>!!i||(s({content:t("no_enough_energy_for_current_action"),id:"reach-limitation-warning"}),!1)),[n,i]),o=e.useCallback((()=>{i?n(!0):s({content:t("no_enough_energy_for_current_action"),id:"reach-limitation-warning"})}),[n,i]);return{usableEnergyPack:i,checkBeforePopupNoEnergy:o,getIsNoEnergy:r}}(),d=l.useTranslations("common"),c=l.useTranslations("reward_center"),[u,p]=e.useState(!1),[m,g]=e.useState(!1),{getEnergyInfo:f}=Di(),h=e.useCallback((()=>{r.current=o,i(o.id,o,1,(()=>{p(!0)}))}),[i,o]),v=e.useCallback((async()=>{try{g(!0),await f(),null==s||s(),r.current=void 0,p(!1)}catch(e){}finally{g(!1)}}),[f]);return t.jsxs(t.Fragment,{children:[o?t.jsxs(ke,{variant:"warning",className:"md:mx-10",children:[t.jsx(Ue,{children:d("usable_energy_pack.desc",{value:En(o.subType)})}),t.jsx(We,{size:"md",color:"warning",onClick:h,loading:n,className:"shrink-0",children:d("use")})]}):t.jsxs(ke,{variant:"warning",className:"md:mx-10",children:[t.jsx(Ue,{children:d("action"===a?"action_energy_pack_in_reward_center":"explore_energy_pack_in_reward_center")}),t.jsx(vn,{href:"/rewards-center/reward-redemption",className:"flex-1 md:flex-none",children:t.jsx(We,{size:"md",color:"warning",className:"w-full",children:c("title")})})]}),u&&t.jsx(Mi,{isOpen:u,onClose:v,rewardInfo:r.current,count:1,isLoading:m})]})};function ji(){const[t,s]=e.useState(!1),{warning:a}=Vt();return{acting:t,handleRedeemAndUseSeasonPass:async e=>{try{s(!0);const{success:t,data:n,msg:i}=await Vs.post("/v1/season/reward/auto_redeem_and_use_season_pass_if_needed",{isGoLang:!0,withMyShellSecurityToken:!0,adapter:e=>e.item});if(!t)return void a({content:null!=i?i:""});e&&e(n)}catch(e){}finally{s(!1)}}}}function ki({src:e}){return t.jsx("video",{src:e,loop:!0,autoPlay:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0,className:"w-full h-full block object-cover"})}function Bi(){const e=Gn((e=>e.setUser));return{queryUserProfile:async()=>{try{const{data:t}=await function(){const{userId:e,name:t,nameTag:s}={};return Vs.post("/v1/user/get_info",{body:Object.assign(Object.assign(Object.assign({},e&&{userId:e}),t&&{name:decodeURIComponent(t)}),s&&{nameTag:decodeURIComponent(s)}),isGoLang:!0,adapter:e=>{var t,s,a,n;const i=e.userDetail||{},r=(null==i?void 0:i.summary)||{},o=r.membershipInfo||{};return{avatar:r.avatar,email:r.email,id:r.id,isGenesisPasscard:o.type===Mn.TYPE_GENESIS_WITH_GENESIS_CARD,isNftAvatar:r.isNftAvatar,isPasscard:o.type===Mn.TYPE_GENESIS_WITH_PASS_CARD,level:o.type===Mn.TYPE_GENESIS_WITH_GENESIS_CARD||o.type===Mn.TYPE_GENESIS_WITH_PASS_CARD?3:o.type===Mn.TYPE_PREMIUM?2:1,name:r.name,nameTag:r.nameTag,createdDate:r.userCreatedAt?Ee.default(Number(r.userCreatedAt)).format("YYYY-MM-DDTHH:mm:ssZ"):void 0,createdTime:r.userCreatedAt?Ee.default(Number(r.userCreatedAt)).format("YYYY-MM-DD HH:mm:ss.SSS"):void 0,publicAddress:r.publicAddress,source:r.userSource,hasParticleAccount:i.hasParticleAccount,privateBotLimit:o.privateBotLimit,publicBotLimit:o.publicBotLimit,premiumInfo:{level:null===(t=o.premiumInfo)||void 0===t?void 0:t.level,totalExp:null===(s=o.premiumInfo)||void 0===s?void 0:s.totalExp,nextLevelNeedExp:null===(a=o.premiumInfo)||void 0===a?void 0:a.nextLevelNeedExp,currentLevelExp:null===(n=o.premiumInfo)||void 0===n?void 0:n.currentLevelExp},canPublishNewBot:i.canPublishNewBot,connectInfo:i.connectInfo,followedCount:r.followedCount,fansCount:r.fansCount,hasFollowed:r.hasFollowed,followStatus:r.followStatus,description:r.description,backgroundUrl:r.backgroundUrl,loginCredential:i.loginCredential,loginType:i.loginType,publicKey:i.publicKey,isKol:i.isKol,rugged:i.bondingCurveCreatorStatus===Li.RUGGED}}})}();return e(t),t}catch(e){throw new Error(e.response.data.message)}}}}function Ui({isOpen:s,onClose:a,rewardInfo:n,isLoading:i=!1}){var r;const o=l.useTranslations("common");l.useTranslations("reward_center.reward_redemption_content.rewards");const d=l.useTranslations("chat"),{getEnergyInfo:c}=Di(),{queryUserProfile:u}=Bi(),p=Bn((e=>e.setNewlyPropsCount)),[m,g]=e.useState(!1);return t.jsxs(v.Modal,{isOpen:s,onClose:a,size:"4xl",isCentered:!0,children:[t.jsx(v.ModalOverlay,{className:"bg-white-opacity-95 dark:bg-black-opacity-95"}),t.jsx(v.ModalContent,{w:"350px",overflowX:"hidden",border:"none",boxShadow:"none",bg:"transparent",children:t.jsx(v.ModalBody,{p:0,children:t.jsxs(v.Flex,{flexDirection:"column",alignItems:"center",children:[t.jsxs("div",{className:"space-y-[6px] mx-[25px]",children:[t.jsx("h2",{className:"text-2xl text-on-surface text-center",children:o("congratulations")}),t.jsx(v.Text,{fontSize:"14px",lineHeight:"20px",className:"text-secondary",textAlign:"center",children:d("claim_season_pass_success_desc",{name:null==n?void 0:n.name})})]}),t.jsxs(v.Box,{mt:"20px",className:"space-y-3",children:[t.jsx(v.Box,{className:"aspect-square",h:{base:"358px",md:"350px"},rounded:"12px",overflow:"hidden",position:"relative",flexShrink:0,children:(f=Ut(null!==(r=null==n?void 0:n.mediaUrl)&&void 0!==r?r:""),["mp4"].some((e=>e===f))?t.jsx(ki,{src:Dt(null==n?void 0:n.mediaUrl,"https://cdn.myshell.ai/")}):t.jsx(v.Image,{src:Dt(null==n?void 0:n.mediaUrl,"https://cdn.myshell.ai/"),alt:"img"}))}),t.jsx("div",{className:"space-y-1",children:t.jsx(v.Text,{textAlign:"center",className:"text-secondary",children:null==n?void 0:n.name})})]}),t.jsx(v.Flex,{flexDirection:"column",mt:{base:"20px",md:"32px"},w:"full",children:t.jsx(v.Button,{variant:"unstyled",rounded:"full",display:"flex",justifyContent:"center",alignItems:"center",w:"full",px:"16px",h:"44px",className:"bg-primary",color:"white",boxShadow:"0px -1px 0px 0px rgba(0, 0, 0, 0.20) inset, 0px 1px 0px 0px rgba(0, 0, 0, 0.08)",onClick:async()=>{p(0);try{g(!0),await Promise.all([c(),u()]),a()}catch(e){}finally{g(!1)}},isLoading:i||m,_hover:{bg:"var(--primary)"},children:t.jsx(v.Text,{fontWeight:"600",fontSize:"14px",lineHeight:"20px",children:o("got_it")})})})]})})})]});var f}function Gi(){const[t]=Bn((e=>[e.seasons])),s=Bn((e=>e.seasonIndex)),a=Bn((e=>e.seasonId)),n=Bn((e=>e.seasonName)),i=Bn((e=>e.isBeta)),r=Bn((e=>e.seasonBanners)),o=Bn((e=>e.seasonStartDate)),l=Bn((e=>e.seasonEndDate)),d=Bn((e=>e.claimableStartDate)),c=Bn((e=>e.claimableEndDate)),u=Bn((e=>e.silentPeriodEndDate)),p=Bn((e=>e.setSeasons)),m=Bn((e=>e.setSeasonIndex)),[g,f]=e.useState(!1),[h,v]=e.useState(!1),[E,S]=e.useState(!1),T=e.useRef({isInClaimablePeriod:g,isInSilentPeriod:h,isInSeasonPeriod:E});return e.useEffect((()=>{const e=()=>{try{const e=Ee.default(),t=e.isAfter(d)&&e.isBefore(c),s=e.isAfter(o)&&e.isBefore(l),a=e.isAfter(l)&&e.isBefore(u);T.current.isInClaimablePeriod!==t&&(T.current.isInClaimablePeriod=t,f(t)),T.current.isInSilentPeriod!==a&&(T.current.isInSilentPeriod=a,v(a)),T.current.isInSeasonPeriod!==s&&(T.current.isInSeasonPeriod=s,S(s))}catch(e){console.log(e)}};e();const t=setInterval(e,1e3);return()=>{clearInterval(t)}}),[o,l,d,c,u]),{seasonId:a,seasonName:n,isBate:i,seasonBanners:r,seasons:t,seasonIndex:s,isInSilentPeriod:h,isInClaimablePeriod:g,isInSeasonPeriod:E,seasonStartDate:o,seasonEndDate:l,claimableEndDate:c,claimableStartDate:d,silentPeriodEndDate:u,querySeasons:async()=>{try{const{data:e,success:t}=await Vs.post("/v1/season/get_redeemable_season_list",{isGoLang:!0,adapter:e=>e.seasons.map((e=>({id:e.id,isBate:e.isBeta,name:e.isBeta?`S${e.name}`:e.name,banner:e.banner,bannerMobileDark:e.bannerMobileDark,bannerMobileLight:e.bannerMobileLight,bannerPcDark:e.bannerPcDark,bannerPcLight:e.bannerPcLight,startDate:Number(e.startDateUnix)?Ee.default(Number(e.startDateUnix)):void 0,endDate:Number(e.endDateUnix)?Ee.default(Number(e.endDateUnix)):void 0,claimableStart:Number(e.redeemableStartDateUnix)?Ee.default(Number(e.redeemableStartDateUnix)):void 0,claimableEnd:Number(e.redeemableEndDateUnix)?Ee.default(Number(e.redeemableEndDateUnix)):void 0,silentPeriodEnd:Number(e.silentPeriodEndUnix)?Ee.default(Number(e.silentPeriodEndUnix)):void 0,status:e.status,text:e.statusText})))}),[s,a]=e;t&&p(s,a)}catch(e){}},setSeasonIndex:m}}Ee.default.extend(Te.default);const Fi=({onClose:s,type:a})=>{const n=l.useTranslations("chat");Gi();const[i,r]=e.useState(!1),[o,d]=e.useState(!1),[c,u]=e.useState(),{acting:p,handleRedeemAndUseSeasonPass:m}=ji(),{getEnergyInfo:g}=Di(),{queryUserProfile:f}=Bi();return t.jsxs(t.Fragment,{children:[t.jsxs(ke,{variant:"warning",className:"md:mx-10",children:[t.jsx(Ue,{children:n("action"===a?"action_claim_season_passcard_tip":"claim_season_passcard_tip")}),t.jsx(We,{size:"md",color:"warning",onClick:()=>{m((e=>{u(e),r(!0)}))},className:"flex-1 md:flex-none",loading:p,children:n("claim_season_passcard_btn_text")})]}),i&&t.jsx(Ui,{isOpen:i,onClose:async()=>{try{d(!0),await Promise.all([g(),f()]),r(!1),null==s||s()}catch(e){}finally{d(!1)}},rewardInfo:c,isLoading:o})]})},zi=()=>{const s=Gn((e=>e.user)),a=Gn((e=>e.token)),n=2===Gn((e=>e.isVisitor))&&1===(null==s?void 0:s.level),i=Gn((e=>e.energy)),r=Gn((e=>e.retriveEnergySuccess)),{entityInfo:o}=e.useContext(Me),l=e.useMemo((()=>{var e;return r?i>=(null!==(e=o.energyPerChat)&&void 0!==e?e:1):!r}),[r,i,o.energyPerChat]);return!!a&&!l?t.jsx("div",{className:"pb-4 md:pb-6 px-0 md:px-[38px]",children:n?t.jsx(Fi,{}):t.jsx(Ri,{})}):null},Yi=({loading:e})=>e?t.jsx("div",{className:"w-full flex justify-center",children:t.jsx(Os,{color:"brand"})}):null,Vi=`/chat/${Ct}`;function Hi(){var s;const{message:a}=qa(),n=Gn((e=>e.isVisitor)),i=l.useTranslations("chat"),{onOpenLogin:r,onCreateRoom:o,onLoginAndCreateRoom:d}=function(){l.useTranslations("chat");const t=g.useRouter();e.useEffect((()=>{t.prefetch(Vi)}),[]);const s=Nn((e=>e.toggleLoginModal)),a=()=>s(!0);return{onOpenLogin:a,onCreateRoom:()=>{t.push(Vi)},onLoginAndCreateRoom:()=>{t.push(Vi),requestAnimationFrame((()=>{a()}))}}}(),c={ROOM_CLOSED:{text:i("room.room_close"),variant:"warning",textClassName:"w-full text-center"},OTHER_SIDE_LEFT:{text:i("room.other_side_left",{user:null==a?void 0:a.text}),buttons:[{children:n!==On.NO?" Log in to Create a Chat Room":" Create a Chat Room",color:"brand",onClick:n!==On.NO?d:o}],variant:"info"},OTHER_SIDE_NO_ENOUGH_ENERGY:{text:i("room.other_side_no_enough_energy"),buttons:[{children:i("login_register"),color:"warning",onClick:r}],variant:"warning"}}[null==a?void 0:a.type];return t.jsx("div",{className:"w-full px-0 md:px-[38px]",children:"INFO"===(null==a?void 0:a.msgDisplayType)?t.jsx(Et,{className:"block w-full text-center",color:"subtle",size:"sm",children:null==a?void 0:a.text}):t.jsxs(ke,{variant:null==c?void 0:c.variant,children:[t.jsx(Ue,{className:null==c?void 0:c.textClassName,children:null==c?void 0:c.text}),(null===(s=null==c?void 0:c.buttons)||void 0===s?void 0:s.length)?t.jsx("div",{className:"w-full gap-x-2 md:w-auto flex justify-center",children:c.buttons.map((e=>t.jsx(We,{className:"w-full px-4 flex-1 md:w-full",color:e.color,size:"md",onClick:null==e?void 0:e.onClick,children:null==e?void 0:e.children})))}):null]})})}
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:Wi,setPrototypeOf:$i,isFrozen:Ki,getPrototypeOf:qi,getOwnPropertyDescriptor:Xi}=Object;let{freeze:Ji,seal:Zi,create:Qi}=Object,{apply:er,construct:tr}="undefined"!=typeof Reflect&&Reflect;Ji||(Ji=function(e){return e}),Zi||(Zi=function(e){return e}),er||(er=function(e,t,s){return e.apply(t,s)}),tr||(tr=function(e,t){return new e(...t)});const sr=fr(Array.prototype.forEach),ar=fr(Array.prototype.pop),nr=fr(Array.prototype.push),ir=fr(String.prototype.toLowerCase),rr=fr(String.prototype.toString),or=fr(String.prototype.match),lr=fr(String.prototype.replace),dr=fr(String.prototype.indexOf),cr=fr(String.prototype.trim),ur=fr(Object.prototype.hasOwnProperty),pr=fr(RegExp.prototype.test),mr=(gr=TypeError,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return tr(gr,t)});var gr;function fr(e){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];return er(e,t,a)}}function hr(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ir;$i&&$i(e,null);let a=t.length;for(;a--;){let n=t[a];if("string"==typeof n){const e=s(n);e!==n&&(Ki(t)||(t[a]=e),n=e)}e[n]=!0}return e}function vr(e){for(let t=0;t<e.length;t++){ur(e,t)||(e[t]=null)}return e}function Er(e){const t=Qi(null);for(const[s,a]of Wi(e)){ur(e,s)&&(Array.isArray(a)?t[s]=vr(a):a&&"object"==typeof a&&a.constructor===Object?t[s]=Er(a):t[s]=a)}return t}function Sr(e,t){for(;null!==e;){const s=Xi(e,t);if(s){if(s.get)return fr(s.get);if("function"==typeof s.value)return fr(s.value)}e=qi(e)}return function(){return null}}const Tr=Ji(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_r=Ji(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),br=Ji(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ir=Ji(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xr=Ji(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wr=Ji(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nr=Ji(["#text"]),yr=Ji(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Or=Ji(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Cr=Ji(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Mr=Ji(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ar=Zi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Pr=Zi(/<%[\w\W]*|[\w\W]*%>/gm),Lr=Zi(/\${[\w\W]*}/gm),Dr=Zi(/^data-[\-\w.\u00B7-\uFFFF]/),Rr=Zi(/^aria-[\-\w]+$/),jr=Zi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kr=Zi(/^(?:\w+script|data):/i),Br=Zi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ur=Zi(/^html$/i),Gr=Zi(/^[a-z][.\w]*(-[.\w]+)+$/i);var Fr=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ar,ERB_EXPR:Pr,TMPLIT_EXPR:Lr,DATA_ATTR:Dr,ARIA_ATTR:Rr,IS_ALLOWED_URI:jr,IS_SCRIPT_OR_DATA:kr,ATTR_WHITESPACE:Br,DOCTYPE_NAME:Ur,CUSTOM_ELEMENT:Gr});const zr=1,Yr=3,Vr=7,Hr=8,Wr=9,$r=function(){return"undefined"==typeof window?null:window};var Kr=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r();const s=t=>e(t);if(s.version="3.1.6",s.removed=[],!t||!t.document||t.document.nodeType!==Wr)return s.isSupported=!1,s;let{document:a}=t;const n=a,i=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:l,Element:d,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:g}=t,f=d.prototype,h=Sr(f,"cloneNode"),v=Sr(f,"remove"),E=Sr(f,"nextSibling"),S=Sr(f,"childNodes"),T=Sr(f,"parentNode");if("function"==typeof o){const e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}let _,b="";const{implementation:I,createNodeIterator:x,createDocumentFragment:w,getElementsByTagName:N}=a,{importNode:y}=n;let O={};s.isSupported="function"==typeof Wi&&"function"==typeof T&&I&&void 0!==I.createHTMLDocument;const{MUSTACHE_EXPR:C,ERB_EXPR:M,TMPLIT_EXPR:A,DATA_ATTR:P,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:j}=Fr;let{IS_ALLOWED_URI:k}=Fr,B=null;const U=hr({},[...Tr,..._r,...br,...xr,...Nr]);let G=null;const F=hr({},[...yr,...Or,...Cr,...Mr]);let z=Object.seal(Qi(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,V=null,H=!0,W=!0,$=!1,K=!0,q=!1,X=!0,J=!1,Z=!1,Q=!1,ee=!1,te=!1,se=!1,ae=!0,ne=!1,ie=!0,re=!1,oe={},le=null;const de=hr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ce=null;const ue=hr({},["audio","video","img","source","image","track"]);let pe=null;const me=hr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ge="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml";let ve=he,Ee=!1,Se=null;const Te=hr({},[ge,fe,he],rr);let _e=null;const be=["application/xhtml+xml","text/html"];let Ie=null,xe=null;const we=a.createElement("form"),Ne=function(e){return e instanceof RegExp||e instanceof Function},ye=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!xe||xe!==e){if(e&&"object"==typeof e||(e={}),e=Er(e),_e=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ie="application/xhtml+xml"===_e?rr:ir,B=ur(e,"ALLOWED_TAGS")?hr({},e.ALLOWED_TAGS,Ie):U,G=ur(e,"ALLOWED_ATTR")?hr({},e.ALLOWED_ATTR,Ie):F,Se=ur(e,"ALLOWED_NAMESPACES")?hr({},e.ALLOWED_NAMESPACES,rr):Te,pe=ur(e,"ADD_URI_SAFE_ATTR")?hr(Er(me),e.ADD_URI_SAFE_ATTR,Ie):me,ce=ur(e,"ADD_DATA_URI_TAGS")?hr(Er(ue),e.ADD_DATA_URI_TAGS,Ie):ue,le=ur(e,"FORBID_CONTENTS")?hr({},e.FORBID_CONTENTS,Ie):de,Y=ur(e,"FORBID_TAGS")?hr({},e.FORBID_TAGS,Ie):{},V=ur(e,"FORBID_ATTR")?hr({},e.FORBID_ATTR,Ie):{},oe=!!ur(e,"USE_PROFILES")&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,$=e.ALLOW_UNKNOWN_PROTOCOLS||!1,K=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,q=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,J=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,se=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ae=!1!==e.SANITIZE_DOM,ne=e.SANITIZE_NAMED_PROPS||!1,ie=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,k=e.ALLOWED_URI_REGEXP||jr,ve=e.NAMESPACE||he,z=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(W=!1),te&&(ee=!0),oe&&(B=hr({},Nr),G=[],!0===oe.html&&(hr(B,Tr),hr(G,yr)),!0===oe.svg&&(hr(B,_r),hr(G,Or),hr(G,Mr)),!0===oe.svgFilters&&(hr(B,br),hr(G,Or),hr(G,Mr)),!0===oe.mathMl&&(hr(B,xr),hr(G,Cr),hr(G,Mr))),e.ADD_TAGS&&(B===U&&(B=Er(B)),hr(B,e.ADD_TAGS,Ie)),e.ADD_ATTR&&(G===F&&(G=Er(G)),hr(G,e.ADD_ATTR,Ie)),e.ADD_URI_SAFE_ATTR&&hr(pe,e.ADD_URI_SAFE_ATTR,Ie),e.FORBID_CONTENTS&&(le===de&&(le=Er(le)),hr(le,e.FORBID_CONTENTS,Ie)),ie&&(B["#text"]=!0),J&&hr(B,["html","head","body"]),B.table&&(hr(B,["tbody"]),delete Y.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw mr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw mr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=e.TRUSTED_TYPES_POLICY,b=_.createHTML("")}else void 0===_&&(_=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let s=null;const a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(s=t.getAttribute(a));const n="dompurify"+(s?"#"+s:"");try{return e.createPolicy(n,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(g,i)),null!==_&&"string"==typeof b&&(b=_.createHTML(""));Ji&&Ji(e),xe=e}},Oe=hr({},["mi","mo","mn","ms","mtext"]),Ce=hr({},["foreignobject","annotation-xml"]),Me=hr({},["title","style","font","a","script"]),Ae=hr({},[..._r,...br,...Ir]),Pe=hr({},[...xr,...wr]),Le=function(e){nr(s.removed,{element:e});try{T(e).removeChild(e)}catch(t){v(e)}},De=function(e,t){try{nr(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){nr(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!G[e])if(ee||te)try{Le(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Re=function(e){let t=null,s=null;if(Q)e="<remove></remove>"+e;else{const t=or(e,/^[\r\n\t ]+/);s=t&&t[0]}"application/xhtml+xml"===_e&&ve===he&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const n=_?_.createHTML(e):e;if(ve===he)try{t=(new m).parseFromString(n,_e)}catch(e){}if(!t||!t.documentElement){t=I.createDocument(ve,"template",null);try{t.documentElement.innerHTML=Ee?b:n}catch(e){}}const i=t.body||t.documentElement;return e&&s&&i.insertBefore(a.createTextNode(s),i.childNodes[0]||null),ve===he?N.call(t,J?"html":"body")[0]:J?t.documentElement:i},je=function(e){return x.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ke=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Be=function(e){return"function"==typeof l&&e instanceof l},Ue=function(e,t,a){O[e]&&sr(O[e],(e=>{e.call(s,t,a,xe)}))},Ge=function(e){let t=null;if(Ue("beforeSanitizeElements",e,null),ke(e))return Le(e),!0;const a=Ie(e.nodeName);if(Ue("uponSanitizeElement",e,{tagName:a,allowedTags:B}),e.hasChildNodes()&&!Be(e.firstElementChild)&&pr(/<[/\w]/g,e.innerHTML)&&pr(/<[/\w]/g,e.textContent))return Le(e),!0;if(e.nodeType===Vr)return Le(e),!0;if(X&&e.nodeType===Hr&&pr(/<[/\w]/g,e.data))return Le(e),!0;if(!B[a]||Y[a]){if(!Y[a]&&ze(a)){if(z.tagNameCheck instanceof RegExp&&pr(z.tagNameCheck,a))return!1;if(z.tagNameCheck instanceof Function&&z.tagNameCheck(a))return!1}if(ie&&!le[a]){const t=T(e)||e.parentNode,s=S(e)||e.childNodes;if(s&&t){for(let a=s.length-1;a>=0;--a){const n=h(s[a],!0);n.__removalCount=(e.__removalCount||0)+1,t.insertBefore(n,E(e))}}}return Le(e),!0}return e instanceof d&&!function(e){let t=T(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const s=ir(e.tagName),a=ir(t.tagName);return!!Se[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===he?"svg"===s:t.namespaceURI===ge?"svg"===s&&("annotation-xml"===a||Oe[a]):Boolean(Ae[s]):e.namespaceURI===ge?t.namespaceURI===he?"math"===s:t.namespaceURI===fe?"math"===s&&Ce[a]:Boolean(Pe[s]):e.namespaceURI===he?!(t.namespaceURI===fe&&!Ce[a])&&!(t.namespaceURI===ge&&!Oe[a])&&!Pe[s]&&(Me[s]||!Ae[s]):!("application/xhtml+xml"!==_e||!Se[e.namespaceURI]))}(e)?(Le(e),!0):"noscript"!==a&&"noembed"!==a&&"noframes"!==a||!pr(/<\/no(script|embed|frames)/i,e.innerHTML)?(q&&e.nodeType===Yr&&(t=e.textContent,sr([C,M,A],(e=>{t=lr(t,e," ")})),e.textContent!==t&&(nr(s.removed,{element:e.cloneNode()}),e.textContent=t)),Ue("afterSanitizeElements",e,null),!1):(Le(e),!0)},Fe=function(e,t,s){if(ae&&("id"===t||"name"===t)&&(s in a||s in we))return!1;if(W&&!V[t]&&pr(P,t));else if(H&&pr(L,t));else if(!G[t]||V[t]){if(!(ze(e)&&(z.tagNameCheck instanceof RegExp&&pr(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&pr(z.attributeNameCheck,t)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(t))||"is"===t&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&pr(z.tagNameCheck,s)||z.tagNameCheck instanceof Function&&z.tagNameCheck(s))))return!1}else if(pe[t]);else if(pr(k,lr(s,R,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==dr(s,"data:")||!ce[e]){if($&&!pr(D,lr(s,R,"")));else if(s)return!1}else;return!0},ze=function(e){return"annotation-xml"!==e&&or(e,j)},Ye=function(e){Ue("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:G};let n=t.length;for(;n--;){const i=t[n],{name:r,namespaceURI:o,value:l}=i,d=Ie(r);let c="value"===r?l:cr(l);if(a.attrName=d,a.attrValue=c,a.keepAttr=!0,a.forceKeepAttr=void 0,Ue("uponSanitizeAttribute",e,a),c=a.attrValue,X&&pr(/((--!?|])>)|<\/(style|title)/i,c)){De(r,e);continue}if(a.forceKeepAttr)continue;if(De(r,e),!a.keepAttr)continue;if(!K&&pr(/\/>/i,c)){De(r,e);continue}q&&sr([C,M,A],(e=>{c=lr(c,e," ")}));const u=Ie(e.nodeName);if(Fe(u,d,c)){if(!ne||"id"!==d&&"name"!==d||(De(r,e),c="user-content-"+c),_&&"object"==typeof g&&"function"==typeof g.getAttributeType)if(o);else switch(g.getAttributeType(u,d)){case"TrustedHTML":c=_.createHTML(c);break;case"TrustedScriptURL":c=_.createScriptURL(c)}try{o?e.setAttributeNS(o,r,c):e.setAttribute(r,c),ke(e)?Le(e):ar(s.removed)}catch(e){}}}Ue("afterSanitizeAttributes",e,null)},Ve=function e(t){let s=null;const a=je(t);for(Ue("beforeSanitizeShadowDOM",t,null);s=a.nextNode();)Ue("uponSanitizeShadowNode",s,null),Ge(s)||(s.content instanceof r&&e(s.content),Ye(s));Ue("afterSanitizeShadowDOM",t,null)};return s.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,i=null,o=null,d=null;if(Ee=!e,Ee&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Be(e)){if("function"!=typeof e.toString)throw mr("toString is not a function");if("string"!=typeof(e=e.toString()))throw mr("dirty is not a string, aborting")}if(!s.isSupported)return e;if(Z||ye(t),s.removed=[],"string"==typeof e&&(re=!1),re){if(e.nodeName){const t=Ie(e.nodeName);if(!B[t]||Y[t])throw mr("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)a=Re("\x3c!----\x3e"),i=a.ownerDocument.importNode(e,!0),i.nodeType===zr&&"BODY"===i.nodeName||"HTML"===i.nodeName?a=i:a.appendChild(i);else{if(!ee&&!q&&!J&&-1===e.indexOf("<"))return _&&se?_.createHTML(e):e;if(a=Re(e),!a)return ee?null:se?b:""}a&&Q&&Le(a.firstChild);const c=je(re?e:a);for(;o=c.nextNode();)Ge(o)||(o.content instanceof r&&Ve(o.content),Ye(o));if(re)return e;if(ee){if(te)for(d=w.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return(G.shadowroot||G.shadowrootmode)&&(d=y.call(n,d,!0)),d}let u=J?a.outerHTML:a.innerHTML;return J&&B["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&pr(Ur,a.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+u),q&&sr([C,M,A],(e=>{u=lr(u,e," ")})),_&&se?_.createHTML(u):u},s.setConfig=function(){ye(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Z=!0},s.clearConfig=function(){xe=null,Z=!1},s.isValidAttribute=function(e,t,s){xe||ye({});const a=Ie(e),n=Ie(t);return Fe(a,n,s)},s.addHook=function(e,t){"function"==typeof t&&(O[e]=O[e]||[],nr(O[e],t))},s.removeHook=function(e){if(O[e])return ar(O[e])},s.removeHooks=function(e){O[e]&&(O[e]=[])},s.removeAllHooks=function(){O={}},s}();const qr=(e,t={})=>{try{return xe.default.renderToString(e,Object.assign({macros:{"\\RR":"\\mathbb{R}","\\f":"#1f(#2)"},output:"htmlAndMathml",leqno:!1,fleqn:!1},t))}catch(t){return console.log("render katex error: ",t),e}};function Xr(e){return{name:"inlineKatex",level:"inline",start:e=>e.indexOf("$")||e.indexOf("\\[")||e.indexOf("\\("),tokenizer(e,t){const s=e.match(/^\\\[+([^$\n]+?)\\\]+/)||e.match(/^\$+([^$\n]+?)\$+/)||e.match(/^\\\(+([^$\n]+?)\\\)+/);if(s)return{type:"inlineKatex",raw:s[0],text:s[1].trim()}},renderer:t=>qr(t.text,e)}}function Jr(e){return{name:"blockKatex",level:"block",start:e=>e.indexOf("$$")||e.indexOf("\\[")||e.indexOf("\\("),tokenizer(e,t){const s=e.match(/^\$\$+\n?([^$]+?)\n?\$\$/)||e.match(/^\\\[+\n?([^$]+?)\n?\\\]/)||e.match(/^\\\(+\n?([^$]+?)\n?\\\)/);if(s)return{type:"blockKatex",raw:s[0],text:s[1].trim()}},renderer:t=>(e.displayMode=!0,qr(t.text,e))}}let Zr;const Qr=()=>(Zr||(Zr=new Map),Zr),eo="undefined"!=typeof window?t=>{e.useEffect((()=>{const e=Qr();let s=e.get(t);if(!s){const a=document.createElement("link");a.rel="stylesheet",a.href=t,document.head.appendChild(a),s={el:a,count:0},e.set(t,s)}return s.count++,()=>{s.count>1?s.count--:(document.head.removeChild(s.el),e.delete(t))}}),[t])}:()=>{},to="undefined"!=typeof window?()=>{const{resolvedTheme:e}=U.useTheme();eo("dark"===e?"/github-dark.css":"/github.css")}:()=>{};var so;P.marked.use({pedantic:!1,gfm:!0,breaks:!0}),Ie.default.initialize({theme:"neutral"}),P.marked.use(D.mangle()),P.marked.use(j.markedXhtml()),P.marked.use(R.markedSmartypants()),P.marked.use(L.gfmHeadingId({prefix:"shell-"})),P.marked.use(function(e={}){return{extensions:[Xr(e),Jr(e)]}}({throwOnError:!1})),null===(so=null==Kr?void 0:Kr.addHook)||void 0===so||so.call(Kr,"uponSanitizeElement",((e,t)=>{if("div"===t.tagName){const t=["mermaid","w-full","h-full","overflow-auto","marked-code-block","marked-code-header","bg-surface-container-pressed","text-14","text-subtle","copy-button","text-surface-primary-default"],s=e.className.split(" ").filter((e=>t.includes(e)));e.className=s.join(" ")}}));async function ao(e,t=5e3,s=3){const a=new AbortController,{signal:n}=a,i=setTimeout((()=>a.abort()),t);try{const t=await fetch(e,{signal:n});if(clearTimeout(i),!t.ok)throw new Error("Network response was not ok");const s=await t.blob();return console.log(`success load ${e}`),URL.createObjectURL(s)}catch(a){if("AbortError"===a.name){if(s>0)return ao(e,t,s-1);throw new Error("Request timed out after 3 retries")}if(s>0)return ao(e,t,s-1);throw new Error("Request failed after 3 retries")}}var no=e.memo((function(s){to();const a=l.useTranslations("common"),n=l.useTranslations("chat"),{success:i,error:o}=Vt(),d=e.useRef(null),c=e.useRef(0),u=e.useMemo((()=>{const e=new P.marked.Renderer;return e.blockquote=e=>`<blockquote>${e}</blockquote>`,e.code=(e,t)=>{try{if("mermaid"===t){const t=`mermaid-svg-${Date.now()}`,s=`mermaid-box-${Date.now()}`;return Ie.default.render(t,e,(e=>{setTimeout((()=>{const a=document.getElementById(s);a&&(a.innerHTML=e);const n=document.getElementById(t);n&&(n.style.fontSize="14px")}))})),`<div class="mermaid w-full h-full overflow-auto" id="${s}"></div>`}}catch(e){console.log("e",e)}const s=be.default.getLanguage(t)?t:"plaintext",a="json"===(null==t?void 0:t.toLowerCase())&&(null==e?void 0:e.length)>2e3?e:be.default.highlight(s,e).value;return`\n      <div class="marked-code-block">\n        <div class="marked-code-header bg-surface-container-pressed text-14 text-subtle">\n          <span>${"plaintext"===s?n("plaintext"):null==s?void 0:s.toUpperCase()}</span>\n          <button class="copy-button text-surface-primary-default">${n("copy_code")}</button>\n        </div>\n        <pre><code class="hljs ${s}">${a}</code></pre>\n      </div>\n    `},e.del=e=>`<span>${e}</span>`,e.link=(e,t,s)=>`<a href="${e}" target="_blank" rel="noopener noreferrer">${s}</a>`,e.image=(e,t,s)=>(fetch(e).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.blob()})).then((t=>{console.log("success load image",e);const s=URL.createObjectURL(t),a=document.querySelector(`img[src="${e}"]`);a&&(a.src=s)})).catch((e=>{console.error("There has been a problem with your fetch operation:",e)})),t?`<img class="default-image" src="${e}" alt="${s}" title="${t}" x-intercept-click="1" />`:`<img class="default-image" src="${e}" alt="${s}" x-intercept-click="1" />`),e.table=(e,t)=>`<div class="marked-table-container"><table><thead>${e}</thead><tbody>${t}</tbody></table></div>`,e.html=(e,t)=>{const s=e.match(/<a[^>]+href="?([^"\s]+)"?\s*\/?>/g);s&&(e=s.reduce(((e,t)=>e.replace(t,t.replace(/<a/,'<a target="_blank" rel="noopener noreferrer"'))),e));const a=e.match(/<img\s+[^>]*src="?([^"]+)"?[^>]*>/g);return a&&(e=a.reduce(((e,t)=>e.replace(t,t.replace(/<img/,'<img x-intercept-click="1"'))),e)),a&&a.forEach((t=>{const s=t.match(/src="([^"]+)"/);if(s){const a=s[1];ao(a,3e3,3).then((e=>{const t=document.querySelector(`img[src="${a}"]`);t&&(t.src=e)})).catch((e=>{console.error("There has been a problem with your fetch operation:",e)})),e=e.replace(t,t.replace(a,""))}})),r.sanitize(e,{ADD_ATTR:["target","x-intercept-click"],USE_PROFILES:{html:!0},FORBID_TAGS:["style","form","input","checkbox","svg"],FORBID_ATTR:["action","style"]})},e}),[]);return e.useEffect((()=>{const e=e=>{if(e.target.classList.contains("copy-button")){const t=e.target.parentNode.nextElementSibling.querySelector("code").textContent;navigator.clipboard.writeText(t).then((()=>{i({content:a("code_copied")})})).catch((e=>{o({content:`${a("copy_failed")} ${e}`,id:`${a("copy_failed")} ${e}`})}))}};return d.current&&d.current.addEventListener("click",e),()=>{d.current&&d.current.removeEventListener("click",e)}}),[a,o,i]),t.jsx("div",{ref:d,className:de.default(s.className?s.className:"md-viewer prose-base prose-pre:my-0 prose-pre:p-0 prose-headings:m-0 prose-hr:my-[1em] max-w-fit overflow-hidden",s.nouseProse?"":"prose dark:prose-invert"),dangerouslySetInnerHTML:{__html:((e,t)=>{const s=/!\[(.*?)\]$/,a=e||"";let n=a.trim(),i=!1,o=0;if(0!==c.current&&(o=performance.now(),i=(o-c.current)/1e3>3),!/!\[.*?\]\((.*?)\)/g.test(n)&&s.test(n)&&"DONE"!==t)if(i)0!==c.current&&(o-c.current)/1e3>6&&(c.current=0);else if(0===c.current)c.current=performance.now();else{const e=n.search(s);n=-1!==e?n.substring(0,e):a}else 0!==c.current&&(c.current=0);const l=P.marked.lexer(n),d=P.marked.parser(l,{renderer:u,extensions:{renderers:{inlineKatex:e=>qr(e.text),blockKatex:e=>qr(e.text,{displayMode:!0})},childTokens:{}}});return r.sanitize(d,{ADD_ATTR:["target","x-intercept-click"],USE_PROFILES:{html:!0}})})(s.content,s.status)}})}));function io({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{d:"M6.3 2.84A1.5 1.5 0 0 0 4 4.11v11.78a1.5 1.5 0 0 0 2.3 1.27l9.344-5.891a1.5 1.5 0 0 0 0-2.538L6.3 2.841Z"}))}const ro=oe.forwardRef(io);function oo(s){const a=e.useRef(null);return e.useEffect((()=>{let e;return a.current&&(e=we.default.loadAnimation({container:a.current,renderer:"svg",loop:!0,autoplay:!0,animationData:require("@/common/assets/audio-playing.json")})),()=>e.destroy()}),[]),t.jsx("div",{ref:a,className:"w-[12px]"})}function lo({src:e}){var s;const[a,n,i,r]=p.useAudio({src:e,onEnded:()=>i.seek(0)}),{paused:o,time:l,playing:d}=n,c=n.duration||(null===(s=r.current)||void 0===s?void 0:s.duration)||0;return t.jsxs("div",{className:"flex flex-col space-y-1 w-full overflow-hidden",children:[t.jsx("div",{className:"bg-primary h-px w-full items-start",style:{width:100*Ft(l,c)+"%"}}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ds,{className:"w-6 h-6",onClick:()=>{if(o){for(var e=document.getElementsByTagName("audio"),t=0,s=e.length;t<s;t++)e[t].pause();i.play()}else i.pause()},children:o?t.jsx(ro,{className:"w-3 h-3 ml-0.5"}):t.jsx(oo,{})}),t.jsx("div",{className:"flex flex-col grow overflow-hidden",children:t.jsx("div",{className:"text-sm text-brand truncate",children:Bt((d||o)&&l||c)})})]}),a]})}const co=({message:s})=>{const a=e.useMemo((()=>{var e;let t;if(null==s?void 0:s.referenceText){t=`${s.referenceText.split("\n").map((e=>`> ${e}`)).join("\n")}\n\n${null!==(e=null==s?void 0:s.text)&&void 0!==e?e:""}`}else t=null==s?void 0:s.text;return t}),[s]);return t.jsxs(t.Fragment,{children:[a&&t.jsx(no,{content:a,status:s.status}),s.audioUrl?t.jsx(lo,{src:s.audioUrl}):null]})},uo=e=>t.jsxs(v.Icon,Object.assign({viewBox:"0 0 120 30",fill:"#fff",width:"30",height:"14",color:"#6D7175"},e,{w:6,h:6,children:[t.jsxs("circle",{cx:"15",cy:"15",r:"15",fill:"var(--primary, red)",children:[t.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:"15",repeatCount:"indefinite",to:"15",values:"15;9;15"}),t.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:"1",repeatCount:"indefinite",to:"1",values:"1;.5;1"})]}),t.jsxs("circle",{cx:"60",cy:"15",r:"9",fill:"var(--primary, red)",fillOpacity:".3",children:[t.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:"9",repeatCount:"indefinite",to:"9",values:"9;15;9"}),t.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:".5",repeatCount:"indefinite",to:".5",values:".5;1;.5"})]}),t.jsxs("circle",{cx:"105",cy:"15",r:"15",fill:"var(--primary, red)",children:[t.jsx("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:"15",repeatCount:"indefinite",to:"15",values:"15;9;15"}),t.jsx("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:"1",repeatCount:"indefinite",to:"1",values:"1;.5;1"})]})]})),po=()=>{const[t,s]=e.useState(pe.default()),[a,n]=e.useState(!1);return e.useEffect((()=>{const e=pe.default();s(e),n(-1!==navigator.userAgent.toLowerCase().indexOf("micromessenger"))}),[]),{isMobile:t.phone||t.tablet,isIos:t.apple.phone||t.apple.tablet||t.apple.ipod,isWeixin:a}},mo=Ne.default((()=>Promise.resolve().then((function(){return xd}))),{ssr:!1}),go=Ne.default((()=>Promise.resolve().then((function(){return Gd}))),{ssr:!1});function fo({imgVideoList:e,activeIndex:s,open:a,onClose:n}){const{isMobile:i}=po();return t.jsx(t.Fragment,{children:t.jsx(v.Modal,{closeOnEsc:!0,closeOnOverlayClick:!0,isOpen:a,onClose:n,size:"full",motionPreset:"none",autoFocus:!1,children:t.jsx(v.ModalContent,{p:0,children:t.jsx(v.ModalBody,{p:0,className:"overflow-hidden",children:i?t.jsx(mo,{imgVideoList:e,activeIndex:s,onClose:n}):t.jsx(go,{imgVideoList:e,activeIndex:s,onClose:n})})})})})}var ho=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s};const vo=ye.Root,Eo=ye.Trigger,So=oe.forwardRef(((e,s)=>{var{className:a,inset:i,children:r}=e,o=ho(e,["className","inset","children"]);return t.jsxs(ye.SubTrigger,Object.assign({ref:s,className:De("flex cursor-default select-none items-center rounded-lg py-1 px-2 text-sm outline-none hover:bg-surface-container data-[state=open]:bg-slate-100 data-[state=open]:text-slate-900 dark:focus:bg-slate-800 dark:focus:text-slate-50 dark:data-[state=open]:bg-slate-800 dark:data-[state=open]:text-slate-50",i&&"pl-8",a)},o,{children:[r,t.jsx(n.ChevronRight,{className:"ml-auto h-4 w-4"})]}))}));So.displayName=ye.SubTrigger.displayName;const To=oe.forwardRef(((e,s)=>{var{className:a}=e,n=ho(e,["className"]);return t.jsx(ye.SubContent,Object.assign({ref:s,className:De("flex flex-col gap-y-1 z-50 overflow-hidden rounded-md border-none bg-surface p-2 text-default shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border dark:border-outline dark:border-solid",a)},n))}));To.displayName=ye.SubContent.displayName;const _o=oe.forwardRef(((e,s)=>{var{className:a}=e,n=ho(e,["className"]);return t.jsx(ye.Portal,{children:t.jsx(ye.Content,Object.assign({ref:s,className:De("flex flex-col gap-y-1 z-50 overflow-hidden rounded-md border-none bg-surface p-2 text-default shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border dark:border-outline dark:border-solid",a)},n))})}));_o.displayName=ye.Content.displayName;const bo=oe.forwardRef(((e,s)=>{var{className:a,inset:n}=e,i=ho(e,["className","inset"]);return t.jsx(ye.Item,Object.assign({ref:s,className:De("relative flex cursor-default select-none items-center rounded-lg py-1 px-2 text-sm outline-none hover:bg-surface-container data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",n&&"pl-8",a)},i))}));bo.displayName=ye.Item.displayName;const Io=oe.forwardRef(((e,s)=>{var{className:a,children:i,checked:r}=e,o=ho(e,["className","children","checked"]);return t.jsxs(ye.CheckboxItem,Object.assign({ref:s,className:De("relative flex cursor-default select-none items-center rounded-lg py-1 px-2 text-sm outline-none hover:bg-surface-container data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",a),checked:r},o,{children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(ye.ItemIndicator,{children:t.jsx(n.Check,{className:"h-4 w-4"})})}),i]}))}));Io.displayName=ye.CheckboxItem.displayName;const xo=oe.forwardRef(((e,s)=>{var{className:a,children:i}=e,r=ho(e,["className","children"]);return t.jsxs(ye.RadioItem,Object.assign({ref:s,className:De("relative flex cursor-default select-none items-center rounded-lg py-1 px-2 text-sm outline-none hover:bg-surface-container data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},r,{children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(ye.ItemIndicator,{children:t.jsx(n.Circle,{className:"h-2 w-2 fill-current"})})}),i]}))}));xo.displayName=ye.RadioItem.displayName;const wo=oe.forwardRef(((e,s)=>{var{className:a,inset:n}=e,i=ho(e,["className","inset"]);return t.jsx(ye.Label,Object.assign({ref:s,className:De("px-2 py-1.5 text-sm font-semibold text-default",n&&"pl-8",a)},i))}));wo.displayName=ye.Label.displayName;const No=oe.forwardRef(((e,s)=>{var{className:a}=e,n=ho(e,["className"]);return t.jsx(ye.Separator,Object.assign({ref:s,className:De("-mx-1 my-1 h-px bg-slate-200 dark:bg-slate-800",a)},n))}));function yo(){const[t,s]=e.useState(!1),{warning:a}=Vt(),n=l.useTranslations("common");return{downloading:t,onDownload:e.useCallback(((e,t,i)=>{s(!0),fetch(e).then((e=>e.blob())).then((e=>{const s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),setTimeout((()=>{document.body.removeChild(a),URL.revokeObjectURL(s)}),1e3),i&&i()})).catch((e=>{console.log(e),a({content:n("download_failed")})})).finally((()=>{s(!1)}))}),[a])}}No.displayName=ye.Separator.displayName;const Oo=e.forwardRef(((e,s)=>t.jsx(ze,Object.assign({},e,{children:t.jsxs("svg",{ref:s,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:[t.jsx("path",{d:"M16.5847 3.41529C15.3643 2.1949 13.3857 2.1949 12.1653 3.41529L8.41529 7.16529C7.1949 8.38568 7.1949 10.3643 8.41529 11.5847C8.67435 11.8438 8.96648 12.0471 9.27752 12.1957C9.58899 12.3445 9.72086 12.7176 9.57207 13.0291C9.42328 13.3405 9.05018 13.4724 8.73871 13.3236C8.30141 13.1147 7.89219 12.8294 7.53141 12.4686C5.82286 10.76 5.82286 7.98995 7.53141 6.28141L11.2814 2.53141C12.99 0.822864 15.76 0.822864 17.4686 2.53141C19.1771 4.23995 19.1771 7.01005 17.4686 8.71859L16.0044 10.1827C15.7604 10.4268 15.3646 10.4268 15.1206 10.1827C14.8765 9.93866 14.8765 9.54293 15.1206 9.29885L16.5847 7.83471C17.8051 6.61432 17.8051 4.63568 16.5847 3.41529Z"}),t.jsx("path",{d:"M10.4279 6.97094C10.5767 6.65948 10.9498 6.52761 11.2613 6.67639C11.6986 6.8853 12.1078 7.17062 12.4686 7.53141C14.1771 9.23995 14.1771 12.01 12.4686 13.7186L8.71859 17.4686C7.01005 19.1771 4.23995 19.1771 2.53141 17.4686C0.822864 15.76 0.822864 12.99 2.53141 11.2814L3.99555 9.81727C4.23963 9.57319 4.63536 9.57319 4.87943 9.81727C5.12351 10.0613 5.12351 10.4571 4.87943 10.7011L3.41529 12.1653C2.1949 13.3857 2.1949 15.3643 3.41529 16.5847C4.63568 17.8051 6.61432 17.8051 7.83471 16.5847L11.5847 12.8347C12.8051 11.6143 12.8051 9.63568 11.5847 8.41529C11.3257 8.15623 11.0335 7.95289 10.7225 7.80431C10.411 7.65552 10.2791 7.28241 10.4279 6.97094Z"})]})})))),Co=e.forwardRef(((e,s)=>t.jsx(ze,Object.assign({},e,{children:t.jsxs("svg",{ref:s,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:[t.jsx("path",{d:"M10 1.25C10.3452 1.25 10.625 1.52982 10.625 1.875L10.625 10.9911L12.0581 9.55806C12.3021 9.31398 12.6979 9.31398 12.9419 9.55806C13.186 9.80214 13.186 10.1979 12.9419 10.4419L10.4419 12.9419C10.3247 13.0592 10.1658 13.125 10 13.125C9.83424 13.125 9.67527 13.0592 9.55806 12.9419L7.05806 10.4419C6.81398 10.1979 6.81398 9.80213 7.05806 9.55806C7.30214 9.31398 7.69786 9.31398 7.94194 9.55806L9.375 10.9911L9.375 1.875C9.375 1.52982 9.65482 1.25 10 1.25Z"}),t.jsx("path",{d:"M6.25 7.5C5.55964 7.5 5 8.05964 5 8.75V16.25C5 16.9404 5.55964 17.5 6.25 17.5H13.75C14.4404 17.5 15 16.9404 15 16.25V8.75C15 8.05964 14.4404 7.5 13.75 7.5H12.5C12.1548 7.5 11.875 7.22018 11.875 6.875C11.875 6.52982 12.1548 6.25 12.5 6.25H13.75C15.1307 6.25 16.25 7.36929 16.25 8.75V16.25C16.25 17.6307 15.1307 18.75 13.75 18.75H6.25C4.86929 18.75 3.75 17.6307 3.75 16.25V8.75C3.75 7.36929 4.86929 6.25 6.25 6.25H7.5C7.84518 6.25 8.125 6.52982 8.125 6.875C8.125 7.22018 7.84518 7.5 7.5 7.5H6.25Z"})]})})))),Mo=e.forwardRef(((e,s)=>t.jsx(ze,Object.assign({},e,{children:t.jsx("svg",{ref:s,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.11 2H17.2727C17.958 1.99999 18.5147 1.99999 18.9662 2.03688C19.4324 2.07497 19.8477 2.15583 20.2338 2.35256C20.8425 2.66268 21.3373 3.15752 21.6474 3.76616C21.8442 4.15225 21.925 4.56757 21.9631 5.03376C22 5.48534 22 6.04197 22 6.72731V13.89C22 14.5754 22 15.132 21.9631 15.5836C21.925 16.0498 21.8442 16.4651 21.6474 16.8512C21.3373 17.4598 20.8425 17.9547 20.2338 18.2648C19.8905 18.4397 19.4704 18.3032 19.2955 17.9599C19.1205 17.6166 19.257 17.1964 19.6004 17.0215C19.9464 16.8452 20.2278 16.5638 20.4042 16.2177C20.484 16.0611 20.5414 15.8498 20.5724 15.4699C20.6041 15.0819 20.6046 14.5824 20.6046 13.8605V6.75687C20.6046 6.03493 20.6041 5.53544 20.5724 5.14739C20.5414 4.76748 20.484 4.55624 20.4042 4.39964C20.2278 4.05355 19.9464 3.77217 19.6004 3.59582C19.4438 3.51603 19.2325 3.45864 18.8526 3.4276C18.4646 3.39589 17.9651 3.39535 17.2431 3.39535H10.1395C9.41759 3.39535 8.9181 3.39589 8.53005 3.4276C8.15015 3.45864 7.9389 3.51603 7.7823 3.59582C7.43621 3.77217 7.15483 4.05355 6.97849 4.39964C6.80356 4.74295 6.38343 4.87946 6.04012 4.70453C5.6968 4.5296 5.56029 4.10948 5.73522 3.76616C6.04534 3.15752 6.54018 2.66268 7.14882 2.35256C7.53492 2.15583 7.95023 2.07497 8.41643 2.03688C8.868 1.99999 9.42464 1.99999 10.11 2ZM6.72733 5.38266H13.89C14.5753 5.38266 15.132 5.38265 15.5836 5.41955C16.0498 5.45763 16.4651 5.5385 16.8512 5.73522C17.4598 6.04534 17.9547 6.54018 18.2648 7.14882C18.4615 7.53492 18.5424 7.95023 18.5804 8.41643C18.6173 8.868 18.6173 9.42463 18.6173 10.11V17.2727C18.6173 17.958 18.6173 18.5147 18.5804 18.9662C18.5424 19.4324 18.4615 19.8477 18.2648 20.2338C17.9547 20.8425 17.4598 21.3373 16.8512 21.6474C16.4651 21.8442 16.0498 21.925 15.5836 21.9631C15.132 22 14.5754 22 13.89 22H6.72731C6.71085 22 6.69446 22 6.67815 22L5.99447 22C5.76242 22 5.54372 22 5.36953 21.9846C5.36199 21.9839 5.35414 21.9832 5.34601 21.9824C5.23672 21.9775 5.13272 21.9712 5.03376 21.9631C4.56757 21.925 4.15225 21.8442 3.76616 21.6474C3.15752 21.3373 2.66268 20.8425 2.35256 20.2338C2.15583 19.8477 2.07497 19.4324 2.03688 18.9662C1.99999 18.5147 1.99999 17.958 2 17.2727V10.11C1.99999 9.42464 1.99999 8.868 2.03688 8.41643C2.07497 7.95023 2.15583 7.53492 2.35256 7.14882C2.66268 6.54018 3.15752 6.04534 3.76616 5.73522C4.15225 5.5385 4.56757 5.45763 5.03376 5.41955C5.48534 5.38265 6.04198 5.38266 6.72733 5.38266ZM6.75687 20.6046H13.8605C14.5824 20.6046 15.0819 20.6041 15.4699 20.5724C15.8498 20.5414 16.0611 20.484 16.2177 20.4042C16.5638 20.2278 16.8452 19.9464 17.0215 19.6004C17.1013 19.4438 17.1587 19.2325 17.1897 18.8526C17.2214 18.4646 17.222 17.9651 17.222 17.2431V16.5173L14.1548 13.4501C13.9792 13.2745 13.8768 13.1729 13.7957 13.104C13.7586 13.0726 13.7376 13.0582 13.7288 13.0528C13.7043 13.0463 13.6784 13.0463 13.6538 13.0528C13.6451 13.0582 13.624 13.0726 13.587 13.104C13.5059 13.1729 13.4035 13.2745 13.2279 13.4501L6.07486 20.6031C6.27805 20.6046 6.50379 20.6046 6.75687 20.6046ZM13.6586 13.05C13.659 13.0498 13.6586 13.05 13.6586 13.05ZM17.222 14.544L15.1247 12.4467C14.9717 12.2937 14.8286 12.1506 14.6987 12.0403C14.5579 11.9207 14.3873 11.7993 14.1682 11.7281C13.8583 11.6274 13.5244 11.6274 13.2144 11.7281C12.9954 11.7993 12.8248 11.9207 12.6839 12.0403C12.554 12.1506 12.411 12.2937 12.258 12.4467L5.03094 19.6737C4.86683 19.8378 4.71216 19.9924 4.59989 20.1265C4.54589 20.191 4.46983 20.2861 4.40657 20.4077C4.40425 20.4065 4.40194 20.4053 4.39964 20.4042C4.05355 20.2278 3.77217 19.9464 3.59582 19.6004C3.51603 19.4438 3.45864 19.2325 3.4276 18.8526C3.39589 18.4646 3.39535 17.9651 3.39535 17.2431V10.1395C3.39535 9.41759 3.39589 8.9181 3.4276 8.53005C3.45864 8.15015 3.51603 7.9389 3.59582 7.7823C3.77217 7.43621 4.05355 7.15483 4.39964 6.97849C4.55624 6.89869 4.76748 6.8413 5.14739 6.81026C5.53544 6.77855 6.03493 6.77801 6.75687 6.77801H13.8605C14.5824 6.77801 15.0819 6.77855 15.4699 6.81026C15.8498 6.8413 16.0611 6.89869 16.2177 6.97849C16.5638 7.15483 16.8452 7.43621 17.0215 7.7823C17.1013 7.9389 17.1587 8.15015 17.1897 8.53005C17.2214 8.9181 17.222 9.41759 17.222 10.1395V14.544ZM7.34884 9.73784C6.80005 9.73784 6.35518 10.1827 6.35518 10.7315C6.35518 11.2803 6.80005 11.7252 7.34884 11.7252C7.89762 11.7252 8.34249 11.2803 8.34249 10.7315C8.34249 10.1827 7.89762 9.73784 7.34884 9.73784ZM4.95983 10.7315C4.95983 9.41209 6.02942 8.34249 7.34884 8.34249C8.66825 8.34249 9.73784 9.41209 9.73784 10.7315C9.73784 12.0509 8.66825 13.1205 7.34884 13.1205C6.02943 13.1205 4.95983 12.0509 4.95983 10.7315Z"})})}))));function Ao({url:e,imageModel:s}){const a=l.useTranslations("chat"),{onCopy:n,onCopyImage:i}=$t(e),{downloading:r,onDownload:o}=yo();return t.jsxs(t.Fragment,{children:[t.jsxs(bo,{onClick:()=>{o(e,kt()),re.Save_Image},children:[r?t.jsx(Os,{}):t.jsx(Co,{className:"w-6 h-6 text-on-surface flex items-center"}),t.jsx(Et,{className:"text-on-surface",children:a("save_image")})]}),t.jsxs(bo,{onClick:()=>{i(),re.Copy_Image},children:[t.jsx(Mo,{size:"2xl",className:"flex items-center text-on-surface"}),t.jsx(Et,{className:"text-on-surface",children:a("copy_image")})]}),t.jsxs(bo,{onClick:()=>{n(),re.Copy_Image_Link},children:[t.jsx(Oo,{className:"w-6 h-6 text-on-surface flex items-center"}),t.jsx(Et,{className:"text-on-surface",children:a("copy_image_link")})]})]})}function Po({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const Lo=oe.forwardRef(Po);function Do(e){const{source:s}=e,a=l.useTranslations("common"),{message:n}=qa(),{onCopy:i}=$t(""),r=()=>{i(null==n?void 0:n.text)};return"menubar"===s?t.jsx(ds,{variant:"outline",size:"sm",color:"default",className:"rounded-lg",onClick:r,children:t.jsx(Lo,{fontSize:"18px",className:"ml-px mb-px"})}):t.jsxs(bo,{onClick:r,children:[t.jsx(Lo,{className:"w-5 h-5 text-on-surface"}),t.jsx(Et,{className:"ml-2 text-on-surface",children:a("copy_message")})]})}function Ro({source:s}){const{actions:a}=qa(),n=e.useCallback((({action_type:e})=>{if(e===re.Copy_Message)return t.jsx(Do,{source:s});console.error(`${e}`)}),[s]);return t.jsx(t.Fragment,{children:null==a?void 0:a.map((e=>t.jsx(n,{action_type:e},e)))})}function jo(){return t.jsx(Ro,{source:"contextmenu"})}var ko;!function(e){e.Like="Like",e.Dislike="Dislike",e.Copy_Message="Copy Message",e.Stop_Generating="Stop Generating",e.Regenerate="Regenerate",e.Edit="Edit",e.Translate="Translate",e.Download_Voice="Download Voice",e.Share="Share",e.Delete="Delete",e.Remove_Dislike="Remove Dislike",e.Regenerate_Voice="Regenerate Voice",e.Feedback="Feedback",e.Save_Image="Save Image",e.Copy_Image="Copy Image",e.Copy_Image_Link="Copy Image Link"}(ko||(ko={}));const Bo=({children:s})=>{const{actions:a}=qa(),[n,i]=e.useState(),[r,l]=e.useState(!1),[d,c]=e.useState(!1),[u,m]=e.useState(),g=p.useMedia("(max-width: 768px)");return t.jsxs(t.Fragment,{children:[t.jsxs(vo,{children:[t.jsx(Eo,{onContextMenu:e=>{var t,s,n,i;const r="IMG"===(null===(s=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.tagName)||void 0===s?void 0:s.toUpperCase());if(!g||"contextmenu"!==e.type&&!r){if(c(r),r){const t=Object.assign({url:null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.getAttribute("src")},null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.getAttribute("x-image-data"));m(t)}o.isEmpty(a)&&!r&&e.preventDefault()}else e.preventDefault()},onClick:e=>{var t,s,a,n,r;"IMG"===(null===(s=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.tagName)||void 0===s?void 0:s.toUpperCase())&&"1"===(null===(a=null==e?void 0:e.target)||void 0===a?void 0:a.getAttribute("x-intercept-click"))&&(i({url:null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.getAttribute("src"),title:null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.getAttribute("alt"),type:Yn.IMAGE,status:Vn.DONE,extensionName:"",iconUrl:""}),l(!0))},children:s}),t.jsx(_o,{children:d?t.jsx(Ao,{url:null==u?void 0:u.url,imageModel:null==u?void 0:u.imageModel}):t.jsx(jo,{})})]}),r&&n&&t.jsx(fo,{open:r,onClose:()=>{l(!1)},imgVideoList:[n],activeIndex:0})]})};function Uo({message:s}){const a=e.useMemo((()=>"PENDING_FOR_RESPONSE"===s.type?uo:co),[s.type]);return t.jsx(Bo,{children:t.jsx("div",{className:"flex gap-3 flex-col",children:t.jsx(a,{message:s})})})}function Go(e){const{className:s}=e;return t.jsx("div",{className:De("mt-2.5 mx-0.5",s),children:t.jsx(Ro,{source:"menubar"})})}function Fo(){const{message:e}=qa();return t.jsxs("div",{className:"w-[calc(100%-38px)] ml-[38px] group/menu gap-x-1.5 flex justify-end",children:[t.jsx(Go,{className:"hidden md:group-hover/menu:flex"}),t.jsx("div",{children:t.jsx("div",{className:"min-w-12 max-w-[303px] md:max-w-[420px] lg:max-w-[476px] large:max-w-[480px] rounded-2xl rounded-tr-sm min-h-11 p-3 bg-surface-primary-subtle-hovered",children:t.jsx(Uo,{message:e})})})]})}function zo(){var e,s,a;const{message:n}=qa(),i=l.useTranslations("chat");return t.jsxs("div",{className:"w-full self-start flex items-start gap-x-1.5",children:[t.jsx(Fa,{size:"md",variant:"USER"===(null==n?void 0:n.source)?"user":"bot",src:(null==n?void 0:n.avatar)||"https://image.myshell.ai/cdn-cgi/image/quality=40,format=webp/image/bot/logo/20240106/default.png"}),t.jsxs("div",{className:"flex flex-col gap-[2px]",children:[(null==n?void 0:n.name)?t.jsx(Et,{size:"sm",color:"subtler",children:null==n?void 0:n.name}):null,t.jsxs("div",{className:"flex gap-1.5 group/menu",children:[t.jsxs("div",{className:"min-w-12 max-w-[305px] md:max-w-[460px] lg:max-w-[476px] large:max-w-[560px] flex flex-col",children:[t.jsxs("div",{className:"min-h-11 p-3 bg-surface-hovered rounded-2xl rounded-tl-sm space-y-3",children:[(null==n?void 0:n.replyTo)&&t.jsx(Et,{size:"xs",color:"subtler",children:i("reply_to",{name:(null===(e=null==n?void 0:n.replyTo)||void 0===e?void 0:e.isVisitor)?`${i("visitor")}${null===(s=null==n?void 0:n.replyTo)||void 0===s?void 0:s.nameTag}`:null===(a=null==n?void 0:n.replyTo)||void 0===a?void 0:a.name})}),t.jsx(Uo,{message:n})]}),o.isEmpty(null==n?void 0:n.buttons)?null:t.jsx("div",{className:"mt-3",children:null==n?void 0:n.buttons})]}),t.jsx(Go,{className:"hidden md:group-hover/menu:flex"})]})]})]})}const Yo=()=>{const{message:s}=qa(),a=null==s?void 0:s.text,i=null==s?void 0:s.referenceText,[r,o]=e.useState(!1),{onCopy:d}=$t(a||"");return l.useTranslations("chat"),t.jsxs("div",{className:"w-full self-start flex items-start gap-x-1.5",children:[t.jsx(Fa,{size:"md",variant:"USER"===(null==s?void 0:s.source)?"user":"bot",src:(null==s?void 0:s.avatar)||"https://image.myshell.ai/cdn-cgi/image/quality=40,format=webp/image/bot/logo/20240106/default.png"}),t.jsx("div",{className:"flex flex-col gap-[2px]",children:t.jsxs("div",{className:"flex gap-1.5 group/menu",children:[t.jsxs(ke,{variant:"error",children:[t.jsx(Ue,{className:"hyphens-auto max-w-[305px] md:max-w-[460px] lg:max-w-[476px] large:max-w-[560px]",children:a}),t.jsx("div",{className:"w-full gap-x-2 md:w-auto flex justify-center",children:t.jsx(We,{className:"flex-1 md:flex-none",color:"error",size:"md",onClick:()=>{o(!0)},children:"View Detail"})})]}),t.jsx(qe,{open:r,children:t.jsxs(Qe,{className:"w-310px md:w-[380px]",onClose:()=>{o(!1)},maskClosable:!1,children:[t.jsx(et,{className:"px-5 h-[68px] flex justify-center",children:t.jsx(st,{children:t.jsx(ht,{size:"h2",children:"Error Detail"})})}),t.jsx(at,{className:"px-5 pt-1 pb-3 grid gap-y-1.5 overflow-y-auto",children:t.jsx(Et,{className:"break-all",children:t.jsx("div",{style:{maxHeight:400},children:i})})}),t.jsx(tt,{className:"gap-x-5 min-h-[76px]",children:t.jsxs(We,{className:"w-full",onClick:()=>{d(),o(!1)},color:"error",children:[t.jsx(n.Copy,{className:"w-[20px] h-[20px] mr-1.5 mt-0.5"}),"Copy Error Message"]})})]})})]})})]})};function Vo({msgDisplayType:s,source:a}){return e.useMemo((()=>{switch(s){case"NORMAL":return"USER"===a?t.jsx(Fo,{}):t.jsx(zo,{});case"ERROR":return t.jsx(Yo,{});default:return t.jsx(Hi,{})}}),[s,a])}function Ho(){const s=e.useRef(null),{messageIdList:a,messageMap:n,hasMore:i,gettingHistory:r,getHistoryMessage:o,scrollToBottom:l}=e.useContext(Pe),[d,c]=p.useBoolean(!1),[u,m]=p.useBoolean(!1),g=p.usePrevious(a),f=(e,t=!1)=>{requestAnimationFrame((()=>{var e;null===(e=s.current)||void 0===e||e.scrollToIndex({index:"LAST",align:"end",behavior:t?"smooth":"auto"})}))};e.useEffect((()=>{f()}),[l]),p.useInterval((()=>{f()}),!u&&d?200:null);return t.jsxs("div",{className:"h-full w-full relative",children:[t.jsx(b.Virtuoso,{height:"100%",className:"h-full w-full no-scrollbar overscroll-contain",ref:s,data:a,atTopStateChange:async e=>{e&&i&&await o()},atBottomThreshold:50,atBottomStateChange:e=>{(null==g?void 0:g.length)!==a.length&&d?f():c(e)},components:{Header:()=>t.jsx(Yi,{loading:r}),Footer:zi},isScrolling:m,itemContent:(e,s)=>{const a=n.get(s);return t.jsx("div",{className:de.default("flex flex-col items-center pb-4 md:pb-5",0===e&&"md:pt-[80px]"),children:t.jsx(Xa,{message:a,actions:null==a?void 0:a.contextMenuItems,children:t.jsx(Vo,{source:null==a?void 0:a.source,msgDisplayType:null==a?void 0:a.msgDisplayType})})},s)}}),t.jsx("div",{className:"absolute w-full bottom-3 md:bottom-6 mx-auto flex justify-end transition-transform duration-1000 ease-in-out",children:d?null:t.jsx(ds,{size:"md",color:"default",icon:$a,onClick:()=>f(0,!0)})})]})}function Wo(e){let t;switch(e){case"TEXT":case"VOICE":case"REPLY":case"GREETING":case"VOICE_CALL_TEXT":case"VOICE_CALL_VOICE":case"VOICE_CALL_REPLY":case"BUTTON_INTERACTION":default:t="NORMAL";break;case"PROMPT_UPDATED":case"WIDGET_PROMPT_UPDATED":case"NEED_TO_REGISTER":case"VOICE_CALL_END":case"LLM_MODERATION_REQUEST":case"ROOM_CLOSED":case"OTHER_SIDE_LEFT":case"OTHER_SIDE_NO_ENOUGH_ENERGY":t="NOTIFICATION";break;case"RESET":t="INFO"}return t}function $o(e){return{id:e.id,text:e.text,audioUrl:e.audioBlobDataURI,status:e.status,type:e.type,userId:e.userId,createdDateUnix:e.createdDateUnix,updatedDateUnix:e.updatedDateUnix,entityId:e.entityId}}function Ko(e,t,s){let a="OTHER";return e!==t||"TEXT"!==s&&"VOICE"!==s&&"BUTTON_INTERACTION"!==s||(a="USER"),a}function qo(e,t){var s;const a="TEXT"!==e.type&&"VOICE"!==e.type&&"BUTTON_INTERACTION"!==e.type;return null===(s=t.get(`${a?"entity":"user"}-${a?e.entityId:e.userId}`))||void 0===s?void 0:s.avatar}function Xo(e,t,s){var a;if(!("TEXT"!==e.type&&"VOICE"!==e.type&&"BUTTON_INTERACTION"!==e.type)){const a=t.get(`user-${e.userId}`);return(null==a?void 0:a.isVisitor)?s?s(a.nameTag):a.name:null==a?void 0:a.name}return null===(a=t.get(`entity-${e.entityId}`))||void 0===a?void 0:a.name}function Jo(e,t){if(e.replyId&&"0"!==e.replyId)return t.get(`user-${e.userId}`)}N.enableMapSet();const Zo={messageIdListMap:new Map,lastMsgIdMap:new Map,lastUserInteractionMsgIdMap:new Map,draftReplyMessageMap:new Map,messageMap:new Map,localDraftMessageMap:new Map},Qo=w.create()(In(_n(((e,t)=>Object.assign(Object.assign({},Zo),{clearMessageList:()=>{e((e=>{e.messageIdListMap=new Map,e.lastMsgIdMap=new Map,e.lastUserInteractionMsgIdMap=new Map,e.draftReplyMessageMap=new Map,e.messageMap=new Map,e.localDraftMessageMap=new Map}))},sendDraftMessage:(t,s,a)=>{e((e=>{var n;const i=`${t}-${s}`;e.lastUserInteractionMsgIdMap.has(i)||e.lastUserInteractionMsgIdMap.set(i,"0"),e.messageMap.has(i)||e.messageMap.set(i,new Map),e.lastMsgIdMap.has(i)||e.lastMsgIdMap.set(i,""),e.lastUserInteractionMsgIdMap.set(i,a.id);const r=$o(a);e.messageMap.get(i).set(r.id,r);const o=Array.from(e.messageMap.get(i).values()).sort(((e,t)=>Number(e.createdDateUnix)-Number(t.createdDateUnix))).map((e=>e.id));e.messageIdListMap.set(i,Array.from(new Set(o))),e.lastMsgIdMap.set(i,null!==(n=o.at(-1))&&void 0!==n?n:"0")}))},replaceDraftMessage:(t,s,a)=>{e((e=>{var n,i,r,o,l,d;const c=`${t}-${s}`,u=e.lastUserInteractionMsgIdMap.get(c);if(u){let t;t="DRAFT"===a.status||"LOCAL_ERROR"===a.status?$o(a):a,null===(r=e.messageMap.get(c))||void 0===r||r.delete(u),null===(o=e.messageMap.get(c))||void 0===o||o.set(a.id,t);const s=(null!==(l=e.messageIdListMap.get(c))&&void 0!==l?l:[]).indexOf(u);s>=0&&(null===(d=e.messageIdListMap.get(c))||void 0===d||d.splice(s,1,a.id),e.lastMsgIdMap.set(c,a.id),e.lastUserInteractionMsgIdMap.set(c,a.id))}else{let t;e.messageMap.has(c)||e.messageMap.set(c,new Map),e.lastMsgIdMap.has(c)||e.lastMsgIdMap.set(c,""),t="LOCAL_ERROR"===a.status?$o(a):a,null===(n=e.messageMap.get(c))||void 0===n||n.set(t.id,t);const s=Array.from(e.messageMap.get(c).values()).sort(((e,t)=>Number(e.createdDateUnix)-Number(t.createdDateUnix))).map((e=>e.id));e.messageIdListMap.set(c,Array.from(new Set(s))),e.lastMsgIdMap.set(c,null!==(i=s.at(-1))&&void 0!==i?i:"0")}}))},addMessage:(t,s,a)=>{e((e=>{var n;const i=`${t}-${s}`;e.messageMap.has(i)||e.messageMap.set(i,new Map),e.lastMsgIdMap.has(i)||e.lastMsgIdMap.set(i,""),e.draftReplyMessageMap.has(i)||e.draftReplyMessageMap.set(i,"");const r=Array.isArray(a)?a:[a],o=r.every((e=>"PENDING_FOR_RESPONSE"!==e.type));if(r.forEach((t=>{var s;let a;"PENDING_FOR_RESPONSE"===t.type&&e.draftReplyMessageMap.set(i,t.id),a="DRAFT"===t.status||"LOCAL_ERROR"===t.status?$o(t):t,null===(s=e.messageMap.get(i))||void 0===s||s.set(a.id,a)})),o){const t=e.draftReplyMessageMap.get(i);t&&e.messageMap.get(i).delete(t)}const l=Array.from(e.messageMap.get(i).values()).sort(((e,t)=>Number(e.createdDateUnix)-Number(t.createdDateUnix))).map((e=>e.id));e.messageIdListMap.set(i,Array.from(new Set(l))),e.lastMsgIdMap.set(i,null!==(n=l.at(-1))&&void 0!==n?n:"0")}))},updateMessage:(t,s,a)=>{e((e=>{var n;const i=`${t}-${s}`;let r;e.messageMap.has(i)||e.messageMap.set(i,new Map),r="LOCAL_ERROR"===a.status?$o(a):a,null===(n=e.messageMap.get(i))||void 0===n||n.set(a.id,r)}))},setLocalDraftMessage(t,s,a){e((e=>{const n=`${t}-${s}`;a?e.localDraftMessageMap.set(n,a):e.localDraftMessageMap.delete(n)}))}})),{store:"new-chat"})));function el({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const tl=oe.forwardRef(el);function sl(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function al(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((s=>{void 0===e[s]?e[s]=t[s]:sl(t[s])&&sl(e[s])&&Object.keys(t[s]).length>0&&al(e[s],t[s])}))}const nl={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function il(){const e="undefined"!=typeof document?document:{};return al(e,nl),e}const rl={document:nl,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function ol(){const e="undefined"!=typeof window?window:{};return al(e,rl),e}function ll(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function dl(){return Date.now()}function cl(e,t){void 0===t&&(t="x");const s=ol();let a,n,i;const r=function(e){const t=ol();let s;return t.getComputedStyle&&(s=t.getComputedStyle(e,null)),!s&&e.currentStyle&&(s=e.currentStyle),s||(s=e.style),s}(e);return s.WebKitCSSMatrix?(n=r.transform||r.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map((e=>e.replace(",","."))).join(", ")),i=new s.WebKitCSSMatrix("none"===n?"":n)):(i=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),a=i.toString().split(",")),"x"===t&&(n=s.WebKitCSSMatrix?i.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(n=s.WebKitCSSMatrix?i.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5])),n||0}function ul(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function pl(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let a=1;a<arguments.length;a+=1){const n=a<0||arguments.length<=a?void 0:arguments[a];if(null!=n&&(s=n,!("undefined"!=typeof window&&void 0!==window.HTMLElement?s instanceof HTMLElement:s&&(1===s.nodeType||11===s.nodeType)))){const s=Object.keys(Object(n)).filter((e=>t.indexOf(e)<0));for(let t=0,a=s.length;t<a;t+=1){const a=s[t],i=Object.getOwnPropertyDescriptor(n,a);void 0!==i&&i.enumerable&&(ul(e[a])&&ul(n[a])?n[a].__swiper__?e[a]=n[a]:pl(e[a],n[a]):!ul(e[a])&&ul(n[a])?(e[a]={},n[a].__swiper__?e[a]=n[a]:pl(e[a],n[a])):e[a]=n[a])}}}var s;return e}function ml(e,t,s){e.style.setProperty(t,s)}function gl(e){let{swiper:t,targetPosition:s,side:a}=e;const n=ol(),i=-t.translate;let r,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const d=s>i?"next":"prev",c=(e,t)=>"next"===d&&e>=t||"prev"===d&&e<=t,u=()=>{r=(new Date).getTime(),null===o&&(o=r);const e=Math.max(Math.min((r-o)/l,1),0),d=.5-Math.cos(e*Math.PI)/2;let p=i+d*(s-i);if(c(p,s)&&(p=s),t.wrapperEl.scrollTo({[a]:p}),c(p,s))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[a]:p})})),void n.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=n.requestAnimationFrame(u)};u()}function fl(e,t){void 0===t&&(t="");const s=[...e.children];return e instanceof HTMLSlotElement&&s.push(...e.assignedElements()),t?s.filter((e=>e.matches(t))):s}function hl(e){try{return void console.warn(e)}catch(e){}}function vl(e,t){void 0===t&&(t=[]);const s=document.createElement(e);return s.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),s}function El(e,t){return ol().getComputedStyle(e,null).getPropertyValue(t)}function Sl(e){let t,s=e;if(s){for(t=0;null!==(s=s.previousSibling);)1===s.nodeType&&(t+=1);return t}}function Tl(e,t,s){const a=ol();return e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(a.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(a.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom"))}let _l,bl,Il;function xl(){return _l||(_l=function(){const e=ol(),t=il();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),_l}function wl(e){return void 0===e&&(e={}),bl||(bl=function(e){let{userAgent:t}=void 0===e?{}:e;const s=xl(),a=ol(),n=a.navigator.platform,i=t||a.navigator.userAgent,r={ios:!1,android:!1},o=a.screen.width,l=a.screen.height,d=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),p=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m="Win32"===n;let g="MacIntel"===n;return!c&&g&&s.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${o}x${l}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),g=!1),d&&!m&&(r.os="android",r.android=!0),(c||p||u)&&(r.os="ios",r.ios=!0),r}(e)),bl}function Nl(){return Il||(Il=function(){const e=ol(),t=wl();let s=!1;function a(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(a()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,a]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));s=e<16||16===e&&a<2}}const n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),i=a();return{isSafari:s||i,needPerspectiveFix:s,need3dFix:i||n&&t.ios,isWebView:n}}()),Il}var yl={on(e,t,s){const a=this;if(!a.eventsListeners||a.destroyed)return a;if("function"!=typeof t)return a;const n=s?"unshift":"push";return e.split(" ").forEach((e=>{a.eventsListeners[e]||(a.eventsListeners[e]=[]),a.eventsListeners[e][n](t)})),a},once(e,t,s){const a=this;if(!a.eventsListeners||a.destroyed)return a;if("function"!=typeof t)return a;function n(){a.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];t.apply(a,i)}return n.__emitterProxy=t,a.on(e,n,s)},onAny(e,t){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof e)return s;const a=t?"unshift":"push";return s.eventsAnyListeners.indexOf(e)<0&&s.eventsAnyListeners[a](e),s},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const s=t.eventsAnyListeners.indexOf(e);return s>=0&&t.eventsAnyListeners.splice(s,1),t},off(e,t){const s=this;return!s.eventsListeners||s.destroyed?s:s.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?s.eventsListeners[e]=[]:s.eventsListeners[e]&&s.eventsListeners[e].forEach(((a,n)=>{(a===t||a.__emitterProxy&&a.__emitterProxy===t)&&s.eventsListeners[e].splice(n,1)}))})),s):s},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,s,a;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];"string"==typeof i[0]||Array.isArray(i[0])?(t=i[0],s=i.slice(1,i.length),a=e):(t=i[0].events,s=i[0].data,a=i[0].context||e),s.unshift(a);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(a,[t,...s])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(a,s)}))})),e}};const Ol=(e,t,s)=>{t&&!e.classList.contains(s)?e.classList.add(s):!t&&e.classList.contains(s)&&e.classList.remove(s)};const Cl=(e,t,s)=>{t&&!e.classList.contains(s)?e.classList.add(s):!t&&e.classList.contains(s)&&e.classList.remove(s)};const Ml=(e,t)=>{if(!e||e.destroyed||!e.params)return;const s=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(s){let t=s.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(s.shadowRoot?t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame((()=>{s.shadowRoot&&(t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())}))),t&&t.remove()}},Al=(e,t)=>{if(!e.slides[t])return;const s=e.slides[t].querySelector('[loading="lazy"]');s&&s.removeAttribute("loading")},Pl=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const s=e.slides.length;if(!s||!t||t<0)return;t=Math.min(t,s);const a="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),n=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const s=n,i=[s-t];return i.push(...Array.from({length:t}).map(((e,t)=>s+a+t))),void e.slides.forEach(((t,s)=>{i.includes(t.column)&&Al(e,s)}))}const i=n+a-1;if(e.params.rewind||e.params.loop)for(let a=n-t;a<=i+t;a+=1){const t=(a%s+s)%s;(t<n||t>i)&&Al(e,t)}else for(let a=Math.max(n-t,0);a<=Math.min(i+t,s-1);a+=1)a!==n&&(a>i||a<n)&&Al(e,a)};var Ll={updateSize:function(){const e=this;let t,s;const a=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:a.clientWidth,s=void 0!==e.params.height&&null!==e.params.height?e.params.height:a.clientHeight,0===t&&e.isHorizontal()||0===s&&e.isVertical()||(t=t-parseInt(El(a,"padding-left")||0,10)-parseInt(El(a,"padding-right")||0,10),s=s-parseInt(El(a,"padding-top")||0,10)-parseInt(El(a,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(s)&&(s=0),Object.assign(e,{width:t,height:s,size:e.isHorizontal()?t:s}))},updateSlides:function(){const e=this;function t(t,s){return parseFloat(t.getPropertyValue(e.getDirectionLabel(s))||0)}const s=e.params,{wrapperEl:a,slidesEl:n,size:i,rtlTranslate:r,wrongRTL:o}=e,l=e.virtual&&s.virtual.enabled,d=l?e.virtual.slides.length:e.slides.length,c=fl(n,`.${e.params.slideClass}, swiper-slide`),u=l?e.virtual.slides.length:c.length;let p=[];const m=[],g=[];let f=s.slidesOffsetBefore;"function"==typeof f&&(f=s.slidesOffsetBefore.call(e));let h=s.slidesOffsetAfter;"function"==typeof h&&(h=s.slidesOffsetAfter.call(e));const v=e.snapGrid.length,E=e.slidesGrid.length;let S=s.spaceBetween,T=-f,_=0,b=0;if(void 0===i)return;"string"==typeof S&&S.indexOf("%")>=0?S=parseFloat(S.replace("%",""))/100*i:"string"==typeof S&&(S=parseFloat(S)),e.virtualSize=-S,c.forEach((e=>{r?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),s.centeredSlides&&s.cssMode&&(ml(a,"--swiper-centered-offset-before",""),ml(a,"--swiper-centered-offset-after",""));const I=s.grid&&s.grid.rows>1&&e.grid;let x;I?e.grid.initSlides(c):e.grid&&e.grid.unsetSlides();const w="auto"===s.slidesPerView&&s.breakpoints&&Object.keys(s.breakpoints).filter((e=>void 0!==s.breakpoints[e].slidesPerView)).length>0;for(let a=0;a<u;a+=1){let n;if(x=0,c[a]&&(n=c[a]),I&&e.grid.updateSlide(a,n,c),!c[a]||"none"!==El(n,"display")){if("auto"===s.slidesPerView){w&&(c[a].style[e.getDirectionLabel("width")]="");const i=getComputedStyle(n),r=n.style.transform,o=n.style.webkitTransform;if(r&&(n.style.transform="none"),o&&(n.style.webkitTransform="none"),s.roundLengths)x=e.isHorizontal()?Tl(n,"width"):Tl(n,"height");else{const e=t(i,"width"),s=t(i,"padding-left"),a=t(i,"padding-right"),r=t(i,"margin-left"),o=t(i,"margin-right"),l=i.getPropertyValue("box-sizing");if(l&&"border-box"===l)x=e+r+o;else{const{clientWidth:t,offsetWidth:i}=n;x=e+s+a+r+o+(i-t)}}r&&(n.style.transform=r),o&&(n.style.webkitTransform=o),s.roundLengths&&(x=Math.floor(x))}else x=(i-(s.slidesPerView-1)*S)/s.slidesPerView,s.roundLengths&&(x=Math.floor(x)),c[a]&&(c[a].style[e.getDirectionLabel("width")]=`${x}px`);c[a]&&(c[a].swiperSlideSize=x),g.push(x),s.centeredSlides?(T=T+x/2+_/2+S,0===_&&0!==a&&(T=T-i/2-S),0===a&&(T=T-i/2-S),Math.abs(T)<.001&&(T=0),s.roundLengths&&(T=Math.floor(T)),b%s.slidesPerGroup==0&&p.push(T),m.push(T)):(s.roundLengths&&(T=Math.floor(T)),(b-Math.min(e.params.slidesPerGroupSkip,b))%e.params.slidesPerGroup==0&&p.push(T),m.push(T),T=T+x+S),e.virtualSize+=x+S,_=x,b+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+h,r&&o&&("slide"===s.effect||"coverflow"===s.effect)&&(a.style.width=`${e.virtualSize+S}px`),s.setWrapperSize&&(a.style[e.getDirectionLabel("width")]=`${e.virtualSize+S}px`),I&&e.grid.updateWrapperSize(x,p),!s.centeredSlides){const t=[];for(let a=0;a<p.length;a+=1){let n=p[a];s.roundLengths&&(n=Math.floor(n)),p[a]<=e.virtualSize-i&&t.push(n)}p=t,Math.floor(e.virtualSize-i)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-i)}if(l&&s.loop){const t=g[0]+S;if(s.slidesPerGroup>1){const a=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/s.slidesPerGroup),n=t*s.slidesPerGroup;for(let e=0;e<a;e+=1)p.push(p[p.length-1]+n)}for(let a=0;a<e.virtual.slidesBefore+e.virtual.slidesAfter;a+=1)1===s.slidesPerGroup&&p.push(p[p.length-1]+t),m.push(m[m.length-1]+t),e.virtualSize+=t}if(0===p.length&&(p=[0]),0!==S){const t=e.isHorizontal()&&r?"marginLeft":e.getDirectionLabel("marginRight");c.filter(((e,t)=>!(s.cssMode&&!s.loop)||t!==c.length-1)).forEach((e=>{e.style[t]=`${S}px`}))}if(s.centeredSlides&&s.centeredSlidesBounds){let e=0;g.forEach((t=>{e+=t+(S||0)})),e-=S;const t=e-i;p=p.map((e=>e<=0?-f:e>t?t+h:e))}if(s.centerInsufficientSlides){let e=0;g.forEach((t=>{e+=t+(S||0)})),e-=S;const t=(s.slidesOffsetBefore||0)+(s.slidesOffsetAfter||0);if(e+t<i){const s=(i-e-t)/2;p.forEach(((e,t)=>{p[t]=e-s})),m.forEach(((e,t)=>{m[t]=e+s}))}}if(Object.assign(e,{slides:c,snapGrid:p,slidesGrid:m,slidesSizesGrid:g}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){ml(a,"--swiper-centered-offset-before",-p[0]+"px"),ml(a,"--swiper-centered-offset-after",e.size/2-g[g.length-1]/2+"px");const t=-e.snapGrid[0],s=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+s))}if(u!==d&&e.emit("slidesLengthChange"),p.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),m.length!==E&&e.emit("slidesGridLengthChange"),s.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!(l||s.cssMode||"slide"!==s.effect&&"fade"!==s.effect)){const t=`${s.containerModifierClass}backface-hidden`,a=e.el.classList.contains(t);u<=s.maxBackfaceHiddenSlides?a||e.el.classList.add(t):a&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,s=[],a=t.virtual&&t.params.virtual.enabled;let n,i=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const r=e=>a?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{s.push(e)}));else for(n=0;n<Math.ceil(t.params.slidesPerView);n+=1){const e=t.activeIndex+n;if(e>t.slides.length&&!a)break;s.push(r(e))}else s.push(r(t.activeIndex));for(n=0;n<s.length;n+=1)if(void 0!==s[n]){const e=s[n].offsetHeight;i=e>i?e:i}(i||0===i)&&(t.wrapperEl.style.height=`${i}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,s=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let a=0;a<t.length;a+=1)t[a].swiperSlideOffset=(e.isHorizontal()?t[a].offsetLeft:t[a].offsetTop)-s-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,s=t.params,{slides:a,rtlTranslate:n,snapGrid:i}=t;if(0===a.length)return;void 0===a[0].swiperSlideOffset&&t.updateSlidesOffset();let r=-e;n&&(r=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=s.spaceBetween;"string"==typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"==typeof o&&(o=parseFloat(o));for(let e=0;e<a.length;e+=1){const l=a[e];let d=l.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(d-=a[0].swiperSlideOffset);const c=(r+(s.centeredSlides?t.minTranslate():0)-d)/(l.swiperSlideSize+o),u=(r-i[0]+(s.centeredSlides?t.minTranslate():0)-d)/(l.swiperSlideSize+o),p=-(r-d),m=p+t.slidesSizesGrid[e],g=p>=0&&p<=t.size-t.slidesSizesGrid[e],f=p>=0&&p<t.size-1||m>1&&m<=t.size||p<=0&&m>=t.size;f&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(e)),Ol(l,f,s.slideVisibleClass),Ol(l,g,s.slideFullyVisibleClass),l.progress=n?-c:c,l.originalProgress=n?-u:u}},updateProgress:function(e){const t=this;if(void 0===e){const s=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*s||0}const s=t.params,a=t.maxTranslate()-t.minTranslate();let{progress:n,isBeginning:i,isEnd:r,progressLoop:o}=t;const l=i,d=r;if(0===a)n=0,i=!0,r=!0;else{n=(e-t.minTranslate())/a;const s=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;i=s||n<=0,r=o||n>=1,s&&(n=0),o&&(n=1)}if(s.loop){const s=t.getSlideIndexByData(0),a=t.getSlideIndexByData(t.slides.length-1),n=t.slidesGrid[s],i=t.slidesGrid[a],r=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=n?(l-n)/r:(l+r-i)/r,o>1&&(o-=1)}Object.assign(t,{progress:n,progressLoop:o,isBeginning:i,isEnd:r}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&t.updateSlidesProgress(e),i&&!l&&t.emit("reachBeginning toEdge"),r&&!d&&t.emit("reachEnd toEdge"),(l&&!i||d&&!r)&&t.emit("fromEdge"),t.emit("progress",n)},updateSlidesClasses:function(){const e=this,{slides:t,params:s,slidesEl:a,activeIndex:n}=e,i=e.virtual&&s.virtual.enabled,r=e.grid&&s.grid&&s.grid.rows>1,o=e=>fl(a,`.${s.slideClass}${e}, swiper-slide${e}`)[0];let l,d,c;if(i)if(s.loop){let t=n-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=o(`[data-swiper-slide-index="${t}"]`)}else l=o(`[data-swiper-slide-index="${n}"]`);else r?(l=t.filter((e=>e.column===n))[0],c=t.filter((e=>e.column===n+1))[0],d=t.filter((e=>e.column===n-1))[0]):l=t[n];l&&(r||(c=function(e,t){const s=[];for(;e.nextElementSibling;){const a=e.nextElementSibling;t?a.matches(t)&&s.push(a):s.push(a),e=a}return s}(l,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!c&&(c=t[0]),d=function(e,t){const s=[];for(;e.previousElementSibling;){const a=e.previousElementSibling;t?a.matches(t)&&s.push(a):s.push(a),e=a}return s}(l,`.${s.slideClass}, swiper-slide`)[0],s.loop&&0===!d&&(d=t[t.length-1]))),t.forEach((e=>{Cl(e,e===l,s.slideActiveClass),Cl(e,e===c,s.slideNextClass),Cl(e,e===d,s.slidePrevClass)})),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,s=t.rtlTranslate?t.translate:-t.translate,{snapGrid:a,params:n,activeIndex:i,realIndex:r,snapIndex:o}=t;let l,d=e;const c=e=>{let s=e-t.virtual.slidesBefore;return s<0&&(s=t.virtual.slides.length+s),s>=t.virtual.slides.length&&(s-=t.virtual.slides.length),s};if(void 0===d&&(d=function(e){const{slidesGrid:t,params:s}=e,a=e.rtlTranslate?e.translate:-e.translate;let n;for(let e=0;e<t.length;e+=1)void 0!==t[e+1]?a>=t[e]&&a<t[e+1]-(t[e+1]-t[e])/2?n=e:a>=t[e]&&a<t[e+1]&&(n=e+1):a>=t[e]&&(n=e);return s.normalizeSlideIndex&&(n<0||void 0===n)&&(n=0),n}(t)),a.indexOf(s)>=0)l=a.indexOf(s);else{const e=Math.min(n.slidesPerGroupSkip,d);l=e+Math.floor((d-e)/n.slidesPerGroup)}if(l>=a.length&&(l=a.length-1),d===i&&!t.params.loop)return void(l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")));if(d===i&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=c(d));const u=t.grid&&n.grid&&n.grid.rows>1;let p;if(t.virtual&&n.virtual.enabled&&n.loop)p=c(d);else if(u){const e=t.slides.filter((e=>e.column===d))[0];let s=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(s)&&(s=Math.max(t.slides.indexOf(e),0)),p=Math.floor(s/n.grid.rows)}else if(t.slides[d]){const e=t.slides[d].getAttribute("data-swiper-slide-index");p=e?parseInt(e,10):d}else p=d;Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:r,realIndex:p,previousIndex:i,activeIndex:d}),t.initialized&&Pl(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(r!==p&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const s=this,a=s.params;let n=e.closest(`.${a.slideClass}, swiper-slide`);!n&&s.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!n&&e.matches&&e.matches(`.${a.slideClass}, swiper-slide`)&&(n=e)}));let i,r=!1;if(n)for(let e=0;e<s.slides.length;e+=1)if(s.slides[e]===n){r=!0,i=e;break}if(!n||!r)return s.clickedSlide=void 0,void(s.clickedIndex=void 0);s.clickedSlide=n,s.virtual&&s.params.virtual.enabled?s.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):s.clickedIndex=i,a.slideToClickedSlide&&void 0!==s.clickedIndex&&s.clickedIndex!==s.activeIndex&&s.slideToClickedSlide()}};var Dl={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:s,translate:a,wrapperEl:n}=this;if(t.virtualTranslate)return s?-a:a;if(t.cssMode)return a;let i=cl(n,e);return i+=this.cssOverflowAdjustment(),s&&(i=-i),i||0},setTranslate:function(e,t){const s=this,{rtlTranslate:a,params:n,wrapperEl:i,progress:r}=s;let o,l=0,d=0;s.isHorizontal()?l=a?-e:e:d=e,n.roundLengths&&(l=Math.floor(l),d=Math.floor(d)),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?l:d,n.cssMode?i[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-l:-d:n.virtualTranslate||(s.isHorizontal()?l-=s.cssOverflowAdjustment():d-=s.cssOverflowAdjustment(),i.style.transform=`translate3d(${l}px, ${d}px, 0px)`);const c=s.maxTranslate()-s.minTranslate();o=0===c?0:(e-s.minTranslate())/c,o!==r&&s.updateProgress(e),s.emit("setTranslate",s.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,s,a,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===s&&(s=!0),void 0===a&&(a=!0);const i=this,{params:r,wrapperEl:o}=i;if(i.animating&&r.preventInteractionOnTransition)return!1;const l=i.minTranslate(),d=i.maxTranslate();let c;if(c=a&&e>l?l:a&&e<d?d:e,i.updateProgress(c),r.cssMode){const e=i.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-c;else{if(!i.support.smoothScroll)return gl({swiper:i,targetPosition:-c,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(i.setTransition(0),i.setTranslate(c),s&&(i.emit("beforeTransitionStart",t,n),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(c),s&&(i.emit("beforeTransitionStart",t,n),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,s&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}};function Rl(e){let{swiper:t,runCallbacks:s,direction:a,step:n}=e;const{activeIndex:i,previousIndex:r}=t;let o=a;if(o||(o=i>r?"next":i<r?"prev":"reset"),t.emit(`transition${n}`),s&&i!==r){if("reset"===o)return void t.emit(`slideResetTransition${n}`);t.emit(`slideChangeTransition${n}`),"next"===o?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`)}}var jl={setTransition:function(e,t){const s=this;s.params.cssMode||(s.wrapperEl.style.transitionDuration=`${e}ms`,s.wrapperEl.style.transitionDelay=0===e?"0ms":""),s.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const s=this,{params:a}=s;a.cssMode||(a.autoHeight&&s.updateAutoHeight(),Rl({swiper:s,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const s=this,{params:a}=s;s.animating=!1,a.cssMode||(s.setTransition(0),Rl({swiper:s,runCallbacks:e,direction:t,step:"End"}))}};var kl={slideTo:function(e,t,s,a,n){void 0===e&&(e=0),void 0===s&&(s=!0),"string"==typeof e&&(e=parseInt(e,10));const i=this;let r=e;r<0&&(r=0);const{params:o,snapGrid:l,slidesGrid:d,previousIndex:c,activeIndex:u,rtlTranslate:p,wrapperEl:m,enabled:g}=i;if(!g&&!a&&!n||i.destroyed||i.animating&&o.preventInteractionOnTransition)return!1;void 0===t&&(t=i.params.speed);const f=Math.min(i.params.slidesPerGroupSkip,r);let h=f+Math.floor((r-f)/i.params.slidesPerGroup);h>=l.length&&(h=l.length-1);const v=-l[h];if(o.normalizeSlideIndex)for(let e=0;e<d.length;e+=1){const t=-Math.floor(100*v),s=Math.floor(100*d[e]),a=Math.floor(100*d[e+1]);void 0!==d[e+1]?t>=s&&t<a-(a-s)/2?r=e:t>=s&&t<a&&(r=e+1):t>=s&&(r=e)}if(i.initialized&&r!==u){if(!i.allowSlideNext&&(p?v>i.translate&&v>i.minTranslate():v<i.translate&&v<i.minTranslate()))return!1;if(!i.allowSlidePrev&&v>i.translate&&v>i.maxTranslate()&&(u||0)!==r)return!1}let E;if(r!==(c||0)&&s&&i.emit("beforeSlideChangeStart"),i.updateProgress(v),E=r>u?"next":r<u?"prev":"reset",p&&-v===i.translate||!p&&v===i.translate)return i.updateActiveIndex(r),o.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),"slide"!==o.effect&&i.setTranslate(v),"reset"!==E&&(i.transitionStart(s,E),i.transitionEnd(s,E)),!1;if(o.cssMode){const e=i.isHorizontal(),s=p?v:-v;if(0===t){const t=i.virtual&&i.params.virtual.enabled;t&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),t&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{m[e?"scrollLeft":"scrollTop"]=s}))):m[e?"scrollLeft":"scrollTop"]=s,t&&requestAnimationFrame((()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1}))}else{if(!i.support.smoothScroll)return gl({swiper:i,targetPosition:s,side:e?"left":"top"}),!0;m.scrollTo({[e?"left":"top"]:s,behavior:"smooth"})}return!0}return i.setTransition(t),i.setTranslate(v),i.updateActiveIndex(r),i.updateSlidesClasses(),i.emit("beforeTransitionStart",t,a),i.transitionStart(s,E),0===t?i.transitionEnd(s,E):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(s,E))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,s,a){if(void 0===e&&(e=0),void 0===s&&(s=!0),"string"==typeof e){e=parseInt(e,10)}const n=this;if(n.destroyed)return;void 0===t&&(t=n.params.speed);const i=n.grid&&n.params.grid&&n.params.grid.rows>1;let r=e;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)r+=n.virtual.slidesBefore;else{let e;if(i){const t=r*n.params.grid.rows;e=n.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else e=n.getSlideIndexByData(r);const t=i?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:s}=n.params;let o=n.params.slidesPerView;"auto"===o?o=n.slidesPerViewDynamic():(o=Math.ceil(parseFloat(n.params.slidesPerView,10)),s&&o%2==0&&(o+=1));let l=t-e<o;if(s&&(l=l||e<Math.ceil(o/2)),a&&s&&"auto"!==n.params.slidesPerView&&!i&&(l=!1),l){const a=s?e<n.activeIndex?"prev":"next":e-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:a,slideTo:!0,activeSlideIndex:"next"===a?e+1:e-t+1,slideRealIndex:"next"===a?n.realIndex:void 0})}if(i){const e=r*n.params.grid.rows;r=n.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else r=n.getSlideIndexByData(r)}return requestAnimationFrame((()=>{n.slideTo(r,t,s,a)})),n},slideNext:function(e,t,s){void 0===t&&(t=!0);const a=this,{enabled:n,params:i,animating:r}=a;if(!n||a.destroyed)return a;void 0===e&&(e=a.params.speed);let o=i.slidesPerGroup;"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(o=Math.max(a.slidesPerViewDynamic("current",!0),1));const l=a.activeIndex<i.slidesPerGroupSkip?1:o,d=a.virtual&&i.virtual.enabled;if(i.loop){if(r&&!d&&i.loopPreventsSliding)return!1;if(a.loopFix({direction:"next"}),a._clientLeft=a.wrapperEl.clientLeft,a.activeIndex===a.slides.length-1&&i.cssMode)return requestAnimationFrame((()=>{a.slideTo(a.activeIndex+l,e,t,s)})),!0}return i.rewind&&a.isEnd?a.slideTo(0,e,t,s):a.slideTo(a.activeIndex+l,e,t,s)},slidePrev:function(e,t,s){void 0===t&&(t=!0);const a=this,{params:n,snapGrid:i,slidesGrid:r,rtlTranslate:o,enabled:l,animating:d}=a;if(!l||a.destroyed)return a;void 0===e&&(e=a.params.speed);const c=a.virtual&&n.virtual.enabled;if(n.loop){if(d&&!c&&n.loopPreventsSliding)return!1;a.loopFix({direction:"prev"}),a._clientLeft=a.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const p=u(o?a.translate:-a.translate),m=i.map((e=>u(e)));let g=i[m.indexOf(p)-1];if(void 0===g&&n.cssMode){let e;i.forEach(((t,s)=>{p>=t&&(e=s)})),void 0!==e&&(g=i[e>0?e-1:e])}let f=0;if(void 0!==g&&(f=r.indexOf(g),f<0&&(f=a.activeIndex-1),"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(f=f-a.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),n.rewind&&a.isBeginning){const n=a.params.virtual&&a.params.virtual.enabled&&a.virtual?a.virtual.slides.length-1:a.slides.length-1;return a.slideTo(n,e,t,s)}return n.loop&&0===a.activeIndex&&n.cssMode?(requestAnimationFrame((()=>{a.slideTo(f,e,t,s)})),!0):a.slideTo(f,e,t,s)},slideReset:function(e,t,s){void 0===t&&(t=!0);const a=this;if(!a.destroyed)return void 0===e&&(e=a.params.speed),a.slideTo(a.activeIndex,e,t,s)},slideToClosest:function(e,t,s,a){void 0===t&&(t=!0),void 0===a&&(a=.5);const n=this;if(n.destroyed)return;void 0===e&&(e=n.params.speed);let i=n.activeIndex;const r=Math.min(n.params.slidesPerGroupSkip,i),o=r+Math.floor((i-r)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[o]){const e=n.snapGrid[o];l-e>(n.snapGrid[o+1]-e)*a&&(i+=n.params.slidesPerGroup)}else{const e=n.snapGrid[o-1];l-e<=(n.snapGrid[o]-e)*a&&(i-=n.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,n.slidesGrid.length-1),n.slideTo(i,e,t,s)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:s}=e,a="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let n,i=e.clickedIndex;const r=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;n=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?i<e.loopedSlides-a/2||i>e.slides.length-e.loopedSlides+a/2?(e.loopFix(),i=e.getSlideIndex(fl(s,`${r}[data-swiper-slide-index="${n}"]`)[0]),ll((()=>{e.slideTo(i)}))):e.slideTo(i):i>e.slides.length-a?(e.loopFix(),i=e.getSlideIndex(fl(s,`${r}[data-swiper-slide-index="${n}"]`)[0]),ll((()=>{e.slideTo(i)}))):e.slideTo(i)}else e.slideTo(i)}};var Bl={loopCreate:function(e){const t=this,{params:s,slidesEl:a}=t;if(!s.loop||t.virtual&&t.params.virtual.enabled)return;const n=()=>{fl(a,`.${s.slideClass}, swiper-slide`).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},i=t.grid&&s.grid&&s.grid.rows>1,r=s.slidesPerGroup*(i?s.grid.rows:1),o=t.slides.length%r!=0,l=i&&t.slides.length%s.grid.rows!=0,d=e=>{for(let a=0;a<e;a+=1){const e=t.isElement?vl("swiper-slide",[s.slideBlankClass]):vl("div",[s.slideClass,s.slideBlankClass]);t.slidesEl.append(e)}};if(o){if(s.loopAddBlankSlides){d(r-t.slides.length%r),t.recalcSlides(),t.updateSlides()}else hl("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else if(l){if(s.loopAddBlankSlides){d(s.grid.rows-t.slides.length%s.grid.rows),t.recalcSlides(),t.updateSlides()}else hl("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else n();t.loopFix({slideRealIndex:e,direction:s.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:s=!0,direction:a,setTranslate:n,activeSlideIndex:i,byController:r,byMousewheel:o}=void 0===e?{}:e;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:d,allowSlidePrev:c,allowSlideNext:u,slidesEl:p,params:m}=l,{centeredSlides:g}=m;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&m.virtual.enabled)return s&&(m.centeredSlides||0!==l.snapIndex?m.centeredSlides&&l.snapIndex<m.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0):l.slideTo(l.virtual.slides.length,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=u,void l.emit("loopFix");let f=m.slidesPerView;"auto"===f?f=l.slidesPerViewDynamic():(f=Math.ceil(parseFloat(m.slidesPerView,10)),g&&f%2==0&&(f+=1));const h=m.slidesPerGroupAuto?f:m.slidesPerGroup;let v=h;v%h!=0&&(v+=h-v%h),v+=m.loopAdditionalSlides,l.loopedSlides=v;const E=l.grid&&m.grid&&m.grid.rows>1;d.length<f+v?hl("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):E&&"row"===m.grid.fill&&hl("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const S=[],T=[];let _=l.activeIndex;void 0===i?i=l.getSlideIndex(d.filter((e=>e.classList.contains(m.slideActiveClass)))[0]):_=i;const b="next"===a||!a,I="prev"===a||!a;let x=0,w=0;const N=E?Math.ceil(d.length/m.grid.rows):d.length,y=(E?d[i].column:i)+(g&&void 0===n?-f/2+.5:0);if(y<v){x=Math.max(v-y,h);for(let e=0;e<v-y;e+=1){const t=e-Math.floor(e/N)*N;if(E){const e=N-t-1;for(let t=d.length-1;t>=0;t-=1)d[t].column===e&&S.push(t)}else S.push(N-t-1)}}else if(y+f>N-v){w=Math.max(y-(N-2*v),h);for(let e=0;e<w;e+=1){const t=e-Math.floor(e/N)*N;E?d.forEach(((e,s)=>{e.column===t&&T.push(s)})):T.push(t)}}if(l.__preventObserver__=!0,requestAnimationFrame((()=>{l.__preventObserver__=!1})),I&&S.forEach((e=>{d[e].swiperLoopMoveDOM=!0,p.prepend(d[e]),d[e].swiperLoopMoveDOM=!1})),b&&T.forEach((e=>{d[e].swiperLoopMoveDOM=!0,p.append(d[e]),d[e].swiperLoopMoveDOM=!1})),l.recalcSlides(),"auto"===m.slidesPerView?l.updateSlides():E&&(S.length>0&&I||T.length>0&&b)&&l.slides.forEach(((e,t)=>{l.grid.updateSlide(t,e,l.slides)})),m.watchSlidesProgress&&l.updateSlidesOffset(),s)if(S.length>0&&I){if(void 0===t){const e=l.slidesGrid[_],t=l.slidesGrid[_+x]-e;o?l.setTranslate(l.translate-t):(l.slideTo(_+Math.ceil(x),0,!1,!0),n&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-t,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-t))}else if(n){const e=E?S.length/m.grid.rows:S.length;l.slideTo(l.activeIndex+e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(T.length>0&&b)if(void 0===t){const e=l.slidesGrid[_],t=l.slidesGrid[_-w]-e;o?l.setTranslate(l.translate-t):(l.slideTo(_-w,0,!1,!0),n&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-t,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-t))}else{const e=E?T.length/m.grid.rows:T.length;l.slideTo(l.activeIndex-e,0,!1,!0)}if(l.allowSlidePrev=c,l.allowSlideNext=u,l.controller&&l.controller.control&&!r){const e={slideRealIndex:t,direction:a,setTranslate:n,activeSlideIndex:i,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===m.slidesPerView&&s})})):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...e,slideTo:l.controller.control.params.slidesPerView===m.slidesPerView&&s})}l.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:s}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const a=[];e.slides.forEach((e=>{const t=void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;a[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),a.forEach((e=>{s.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};function Ul(e,t,s){const a=ol(),{params:n}=e,i=n.edgeSwipeDetection,r=n.edgeSwipeThreshold;return!i||!(s<=r||s>=a.innerWidth-r)||"prevent"===i&&(t.preventDefault(),!0)}function Gl(e){const t=this,s=il();let a=e;a.originalEvent&&(a=a.originalEvent);const n=t.touchEventsData;if("pointerdown"===a.type){if(null!==n.pointerId&&n.pointerId!==a.pointerId)return;n.pointerId=a.pointerId}else"touchstart"===a.type&&1===a.targetTouches.length&&(n.touchId=a.targetTouches[0].identifier);if("touchstart"===a.type)return void Ul(t,a,a.targetTouches[0].pageX);const{params:i,touches:r,enabled:o}=t;if(!o)return;if(!i.simulateTouch&&"mouse"===a.pointerType)return;if(t.animating&&i.preventInteractionOnTransition)return;!t.animating&&i.cssMode&&i.loop&&t.loopFix();let l=a.target;if("wrapper"===i.touchEventsTarget&&!function(e,t){const s=t.contains(e);if(!s&&t instanceof HTMLSlotElement)return[...t.assignedElements()].includes(e);return s}(l,t.wrapperEl))return;if("which"in a&&3===a.which)return;if("button"in a&&a.button>0)return;if(n.isTouched&&n.isMoved)return;const d=!!i.noSwipingClass&&""!==i.noSwipingClass,c=a.composedPath?a.composedPath():a.path;d&&a.target&&a.target.shadowRoot&&c&&(l=c[0]);const u=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,p=!(!a.target||!a.target.shadowRoot);if(i.noSwiping&&(p?function(e,t){return void 0===t&&(t=this),function t(s){if(!s||s===il()||s===ol())return null;s.assignedSlot&&(s=s.assignedSlot);const a=s.closest(e);return a||s.getRootNode?a||t(s.getRootNode().host):null}(t)}(u,l):l.closest(u)))return void(t.allowClick=!0);if(i.swipeHandler&&!l.closest(i.swipeHandler))return;r.currentX=a.pageX,r.currentY=a.pageY;const m=r.currentX,g=r.currentY;if(!Ul(t,a,m))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),r.startX=m,r.startY=g,n.touchStartTime=dl(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(n.allowThresholdMove=!1);let f=!0;l.matches(n.focusableElements)&&(f=!1,"SELECT"===l.nodeName&&(n.isTouched=!1)),s.activeElement&&s.activeElement.matches(n.focusableElements)&&s.activeElement!==l&&s.activeElement.blur();const h=f&&t.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!h||l.isContentEditable||a.preventDefault(),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.animating&&!i.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",a)}function Fl(e){const t=il(),s=this,a=s.touchEventsData,{params:n,touches:i,rtlTranslate:r,enabled:o}=s;if(!o)return;if(!n.simulateTouch&&"mouse"===e.pointerType)return;let l,d=e;if(d.originalEvent&&(d=d.originalEvent),"pointermove"===d.type){if(null!==a.touchId)return;if(d.pointerId!==a.pointerId)return}if("touchmove"===d.type){if(l=[...d.changedTouches].filter((e=>e.identifier===a.touchId))[0],!l||l.identifier!==a.touchId)return}else l=d;if(!a.isTouched)return void(a.startMoving&&a.isScrolling&&s.emit("touchMoveOpposite",d));const c=l.pageX,u=l.pageY;if(d.preventedByNestedSwiper)return i.startX=c,void(i.startY=u);if(!s.allowTouchMove)return d.target.matches(a.focusableElements)||(s.allowClick=!1),void(a.isTouched&&(Object.assign(i,{startX:c,startY:u,currentX:c,currentY:u}),a.touchStartTime=dl()));if(n.touchReleaseOnEdges&&!n.loop)if(s.isVertical()){if(u<i.startY&&s.translate<=s.maxTranslate()||u>i.startY&&s.translate>=s.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(c<i.startX&&s.translate<=s.maxTranslate()||c>i.startX&&s.translate>=s.minTranslate())return;if(t.activeElement&&d.target===t.activeElement&&d.target.matches(a.focusableElements))return a.isMoved=!0,void(s.allowClick=!1);a.allowTouchCallbacks&&s.emit("touchMove",d),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=c,i.currentY=u;const p=i.currentX-i.startX,m=i.currentY-i.startY;if(s.params.threshold&&Math.sqrt(p**2+m**2)<s.params.threshold)return;if(void 0===a.isScrolling){let e;s.isHorizontal()&&i.currentY===i.startY||s.isVertical()&&i.currentX===i.startX?a.isScrolling=!1:p*p+m*m>=25&&(e=180*Math.atan2(Math.abs(m),Math.abs(p))/Math.PI,a.isScrolling=s.isHorizontal()?e>n.touchAngle:90-e>n.touchAngle)}if(a.isScrolling&&s.emit("touchMoveOpposite",d),void 0===a.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(a.startMoving=!0)),a.isScrolling||"touchmove"===d.type&&a.preventTouchMoveFromPointerMove)return void(a.isTouched=!1);if(!a.startMoving)return;s.allowClick=!1,!n.cssMode&&d.cancelable&&d.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&d.stopPropagation();let g=s.isHorizontal()?p:m,f=s.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;n.oneWayMovement&&(g=Math.abs(g)*(r?1:-1),f=Math.abs(f)*(r?1:-1)),i.diff=g,g*=n.touchRatio,r&&(g=-g,f=-f);const h=s.touchesDirection;s.swipeDirection=g>0?"prev":"next",s.touchesDirection=f>0?"prev":"next";const v=s.params.loop&&!n.cssMode,E="next"===s.touchesDirection&&s.allowSlideNext||"prev"===s.touchesDirection&&s.allowSlidePrev;if(!a.isMoved){if(v&&E&&s.loopFix({direction:s.swipeDirection}),a.startTranslate=s.getTranslate(),s.setTransition(0),s.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});s.wrapperEl.dispatchEvent(e)}a.allowMomentumBounce=!1,!n.grabCursor||!0!==s.allowSlideNext&&!0!==s.allowSlidePrev||s.setGrabCursor(!0),s.emit("sliderFirstMove",d)}if((new Date).getTime(),a.isMoved&&a.allowThresholdMove&&h!==s.touchesDirection&&v&&E&&Math.abs(g)>=1)return Object.assign(i,{startX:c,startY:u,currentX:c,currentY:u,startTranslate:a.currentTranslate}),a.loopSwapReset=!0,void(a.startTranslate=a.currentTranslate);s.emit("sliderMove",d),a.isMoved=!0,a.currentTranslate=g+a.startTranslate;let S=!0,T=n.resistanceRatio;if(n.touchReleaseOnEdges&&(T=0),g>0?(v&&E&&a.allowThresholdMove&&a.currentTranslate>(n.centeredSlides?s.minTranslate()-s.slidesSizesGrid[s.activeIndex+1]-("auto"!==n.slidesPerView&&s.slides.length-n.slidesPerView>=2?s.slidesSizesGrid[s.activeIndex+1]+s.params.spaceBetween:0)-s.params.spaceBetween:s.minTranslate())&&s.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),a.currentTranslate>s.minTranslate()&&(S=!1,n.resistance&&(a.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+a.startTranslate+g)**T))):g<0&&(v&&E&&a.allowThresholdMove&&a.currentTranslate<(n.centeredSlides?s.maxTranslate()+s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween+("auto"!==n.slidesPerView&&s.slides.length-n.slidesPerView>=2?s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween:0):s.maxTranslate())&&s.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:s.slides.length-("auto"===n.slidesPerView?s.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),a.currentTranslate<s.maxTranslate()&&(S=!1,n.resistance&&(a.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-a.startTranslate-g)**T))),S&&(d.preventedByNestedSwiper=!0),!s.allowSlideNext&&"next"===s.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!s.allowSlidePrev&&"prev"===s.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),s.allowSlidePrev||s.allowSlideNext||(a.currentTranslate=a.startTranslate),n.threshold>0){if(!(Math.abs(g)>n.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,a.currentTranslate=a.startTranslate,void(i.diff=s.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}n.followFinger&&!n.cssMode&&((n.freeMode&&n.freeMode.enabled&&s.freeMode||n.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(a.currentTranslate),s.setTranslate(a.currentTranslate))}function zl(e){const t=this,s=t.touchEventsData;let a,n=e;n.originalEvent&&(n=n.originalEvent);if("touchend"===n.type||"touchcancel"===n.type){if(a=[...n.changedTouches].filter((e=>e.identifier===s.touchId))[0],!a||a.identifier!==s.touchId)return}else{if(null!==s.touchId)return;if(n.pointerId!==s.pointerId)return;a=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)){if(!(["pointercancel","contextmenu"].includes(n.type)&&(t.browser.isSafari||t.browser.isWebView)))return}s.pointerId=null,s.touchId=null;const{params:i,touches:r,rtlTranslate:o,slidesGrid:l,enabled:d}=t;if(!d)return;if(!i.simulateTouch&&"mouse"===n.pointerType)return;if(s.allowTouchCallbacks&&t.emit("touchEnd",n),s.allowTouchCallbacks=!1,!s.isTouched)return s.isMoved&&i.grabCursor&&t.setGrabCursor(!1),s.isMoved=!1,void(s.startMoving=!1);i.grabCursor&&s.isMoved&&s.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const c=dl(),u=c-s.touchStartTime;if(t.allowClick){const e=n.path||n.composedPath&&n.composedPath();t.updateClickedSlide(e&&e[0]||n.target,e),t.emit("tap click",n),u<300&&c-s.lastClickTime<300&&t.emit("doubleTap doubleClick",n)}if(s.lastClickTime=dl(),ll((()=>{t.destroyed||(t.allowClick=!0)})),!s.isTouched||!s.isMoved||!t.swipeDirection||0===r.diff&&!s.loopSwapReset||s.currentTranslate===s.startTranslate&&!s.loopSwapReset)return s.isTouched=!1,s.isMoved=!1,void(s.startMoving=!1);let p;if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,p=i.followFinger?o?t.translate:-t.translate:-s.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:p});const m=p>=-t.maxTranslate()&&!t.params.loop;let g=0,f=t.slidesSizesGrid[0];for(let e=0;e<l.length;e+=e<i.slidesPerGroupSkip?1:i.slidesPerGroup){const t=e<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==l[e+t]?(m||p>=l[e]&&p<l[e+t])&&(g=e,f=l[e+t]-l[e]):(m||p>=l[e])&&(g=e,f=l[l.length-1]-l[l.length-2])}let h=null,v=null;i.rewind&&(t.isBeginning?v=i.virtual&&i.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(h=0));const E=(p-l[g])/f,S=g<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(u>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(E>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?h:g+S):t.slideTo(g)),"prev"===t.swipeDirection&&(E>1-i.longSwipesRatio?t.slideTo(g+S):null!==v&&E<0&&Math.abs(E)>i.longSwipesRatio?t.slideTo(v):t.slideTo(g))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(n.target===t.navigation.nextEl||n.target===t.navigation.prevEl)?n.target===t.navigation.nextEl?t.slideTo(g+S):t.slideTo(g):("next"===t.swipeDirection&&t.slideTo(null!==h?h:g+S),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:g))}}function Yl(){const e=this,{params:t,el:s}=e;if(s&&0===s.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:a,allowSlidePrev:n,snapGrid:i}=e,r=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=r&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!r?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=n,e.allowSlideNext=a,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}function Vl(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Hl(){const e=this,{wrapperEl:t,rtlTranslate:s,enabled:a}=e;if(!a)return;let n;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const i=e.maxTranslate()-e.minTranslate();n=0===i?0:(e.translate-e.minTranslate())/i,n!==e.progress&&e.updateProgress(s?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Wl(e){const t=this;Ml(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function $l(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Kl=(e,t)=>{const s=il(),{params:a,el:n,wrapperEl:i,device:r}=e,o=!!a.nested,l="on"===t?"addEventListener":"removeEventListener",d=t;n&&"string"!=typeof n&&(s[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),n[l]("touchstart",e.onTouchStart,{passive:!1}),n[l]("pointerdown",e.onTouchStart,{passive:!1}),s[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),s[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),s[l]("touchend",e.onTouchEnd,{passive:!0}),s[l]("pointerup",e.onTouchEnd,{passive:!0}),s[l]("pointercancel",e.onTouchEnd,{passive:!0}),s[l]("touchcancel",e.onTouchEnd,{passive:!0}),s[l]("pointerout",e.onTouchEnd,{passive:!0}),s[l]("pointerleave",e.onTouchEnd,{passive:!0}),s[l]("contextmenu",e.onTouchEnd,{passive:!0}),(a.preventClicks||a.preventClicksPropagation)&&n[l]("click",e.onClick,!0),a.cssMode&&i[l]("scroll",e.onScroll),a.updateOnWindowResize?e[d](r.ios||r.android?"resize orientationchange observerUpdate":"resize observerUpdate",Yl,!0):e[d]("observerUpdate",Yl,!0),n[l]("load",e.onLoad,{capture:!0}))};const ql=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Xl={addClasses:function(){const e=this,{classNames:t,params:s,rtl:a,el:n,device:i}=e,r=function(e,t){const s=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((a=>{e[a]&&s.push(t+a)})):"string"==typeof e&&s.push(t+e)})),s}(["initialized",s.direction,{"free-mode":e.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:a},{grid:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&"column"===s.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);t.push(...r),n.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!=typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}};var Jl={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Zl(e,t){return function(s){void 0===s&&(s={});const a=Object.keys(s)[0],n=s[a];"object"==typeof n&&null!==n?(!0===e[a]&&(e[a]={enabled:!0}),"navigation"===a&&e[a]&&e[a].enabled&&!e[a].prevEl&&!e[a].nextEl&&(e[a].auto=!0),["pagination","scrollbar"].indexOf(a)>=0&&e[a]&&e[a].enabled&&!e[a].el&&(e[a].auto=!0),a in e&&"enabled"in n?("object"!=typeof e[a]||"enabled"in e[a]||(e[a].enabled=!0),e[a]||(e[a]={enabled:!1}),pl(t,s)):pl(t,s)):pl(t,s)}}const Ql={eventsEmitter:yl,update:Ll,translate:Dl,transition:jl,slide:kl,loop:Bl,grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const s="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),s.style.cursor="move",s.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=Gl.bind(e),e.onTouchMove=Fl.bind(e),e.onTouchEnd=zl.bind(e),e.onDocumentTouchStart=$l.bind(e),t.cssMode&&(e.onScroll=Hl.bind(e)),e.onClick=Vl.bind(e),e.onLoad=Wl.bind(e),Kl(e,"on")},detachEvents:function(){Kl(this,"off")}},breakpoints:{setBreakpoint:function(){const e=this,{realIndex:t,initialized:s,params:a,el:n}=e,i=a.breakpoints;if(!i||i&&0===Object.keys(i).length)return;const r=e.getBreakpoint(i,e.params.breakpointsBase,e.el);if(!r||e.currentBreakpoint===r)return;const o=(r in i?i[r]:void 0)||e.originalParams,l=ql(e,a),d=ql(e,o),c=e.params.grabCursor,u=o.grabCursor,p=a.enabled;l&&!d?(n.classList.remove(`${a.containerModifierClass}grid`,`${a.containerModifierClass}grid-column`),e.emitContainerClasses()):!l&&d&&(n.classList.add(`${a.containerModifierClass}grid`),(o.grid.fill&&"column"===o.grid.fill||!o.grid.fill&&"column"===a.grid.fill)&&n.classList.add(`${a.containerModifierClass}grid-column`),e.emitContainerClasses()),c&&!u?e.unsetGrabCursor():!c&&u&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach((t=>{if(void 0===o[t])return;const s=a[t]&&a[t].enabled,n=o[t]&&o[t].enabled;s&&!n&&e[t].disable(),!s&&n&&e[t].enable()}));const m=o.direction&&o.direction!==a.direction,g=a.loop&&(o.slidesPerView!==a.slidesPerView||m),f=a.loop;m&&s&&e.changeDirection(),pl(e.params,o);const h=e.params.enabled,v=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),p&&!h?e.disable():!p&&h&&e.enable(),e.currentBreakpoint=r,e.emit("_beforeBreakpoint",o),s&&(g?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!f&&v?(e.loopCreate(t),e.updateSlides()):f&&!v&&e.loopDestroy()),e.emit("breakpoint",o)},getBreakpoint:function(e,t,s){if(void 0===t&&(t="window"),!e||"container"===t&&!s)return;let a=!1;const n=ol(),i="window"===t?n.innerHeight:s.clientHeight,r=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:i*t,point:e}}return{value:e,point:e}}));r.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let e=0;e<r.length;e+=1){const{point:i,value:o}=r[e];"window"===t?n.matchMedia(`(min-width: ${o}px)`).matches&&(a=i):o<=s.clientWidth&&(a=i)}return a||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:s}=e,{slidesOffsetBefore:a}=s;if(a){const t=e.slides.length-1,s=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*a;e.isLocked=e.size>s}else e.isLocked=1===e.snapGrid.length;!0===s.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===s.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:Xl},ed={};let td=class e{constructor(){let t,s;for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];1===n.length&&n[0].constructor&&"Object"===Object.prototype.toString.call(n[0]).slice(8,-1)?s=n[0]:[t,s]=n,s||(s={}),s=pl({},s),t&&!s.el&&(s.el=t);const r=il();if(s.el&&"string"==typeof s.el&&r.querySelectorAll(s.el).length>1){const t=[];return r.querySelectorAll(s.el).forEach((a=>{const n=pl({},s,{el:a});t.push(new e(n))})),t}const o=this;o.__swiper__=!0,o.support=xl(),o.device=wl({userAgent:s.userAgent}),o.browser=Nl(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],s.modules&&Array.isArray(s.modules)&&o.modules.push(...s.modules);const l={};o.modules.forEach((e=>{e({params:s,swiper:o,extendParams:Zl(s,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})}));const d=pl({},Jl,l);return o.params=pl({},d,ed,s),o.originalParams=pl({},o.params),o.passedParams=pl({},s),o.params&&o.params.on&&Object.keys(o.params.on).forEach((e=>{o.on(e,o.params.on[e])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===o.params.direction,isVertical:()=>"vertical"===o.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,a=Sl(fl(t,`.${s.slideClass}, swiper-slide`)[0]);return Sl(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=fl(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const a=s.minTranslate(),n=(s.maxTranslate()-a)*e+a;s.translateTo(n,void 0===t?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((s=>{const a=e.getSlideClasses(s);t.push({slideEl:s,classNames:a}),e.emit("_slideClass",s,a)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:s,slides:a,slidesGrid:n,slidesSizesGrid:i,size:r,activeIndex:o}=this;let l=1;if("number"==typeof s.slidesPerView)return s.slidesPerView;if(s.centeredSlides){let e,t=a[o]?Math.ceil(a[o].swiperSlideSize):0;for(let s=o+1;s<a.length;s+=1)a[s]&&!e&&(t+=Math.ceil(a[s].swiperSlideSize),l+=1,t>r&&(e=!0));for(let s=o-1;s>=0;s-=1)a[s]&&!e&&(t+=a[s].swiperSlideSize,l+=1,t>r&&(e=!0))}else if("current"===e)for(let e=o+1;e<a.length;e+=1){(t?n[e]+i[e]-n[o]<r:n[e]-n[o]<r)&&(l+=1)}else for(let e=o-1;e>=0;e-=1){n[o]-n[e]<r&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;function a(){const t=e.rtlTranslate?-1*e.translate:e.translate,s=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses()}let n;if(s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&Ml(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s.freeMode&&s.freeMode.enabled&&!s.cssMode)a(),s.autoHeight&&e.updateAutoHeight();else{if(("auto"===s.slidesPerView||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const t=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;n=e.slideTo(t.length-1,0,!1,!0)}else n=e.slideTo(e.activeIndex,0,!1,!0);n||a()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const s=this,a=s.params.direction;return e||(e="horizontal"===a?"vertical":"horizontal"),e===a||"horizontal"!==e&&"vertical"!==e||(s.el.classList.remove(`${s.params.containerModifierClass}${a}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if("string"==typeof s&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const a=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let n=(()=>{if(s&&s.shadowRoot&&s.shadowRoot.querySelector){return s.shadowRoot.querySelector(a())}return fl(s,a())[0]})();return!n&&t.params.createElements&&(n=vl("div",t.params.wrapperClass),s.append(n),fl(s,`.${t.params.slideClass}`).forEach((e=>{n.append(e)}))),Object.assign(t,{el:s,wrapperEl:n,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:n,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:"rtl"===s.dir.toLowerCase()||"rtl"===El(s,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===s.dir.toLowerCase()||"rtl"===El(s,"direction")),wrongRTL:"-webkit-box"===El(n,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach((e=>{e.complete?Ml(t,e):e.addEventListener("load",(e=>{Ml(t,e.target)}))})),Pl(t),t.initialized=!0,Pl(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const s=this,{params:a,el:n,wrapperEl:i,slides:r}=s;return void 0===s.params||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),a.loop&&s.loopDestroy(),t&&(s.removeClasses(),n&&"string"!=typeof n&&n.removeAttribute("style"),i&&i.removeAttribute("style"),r&&r.length&&r.forEach((e=>{e.classList.remove(a.slideVisibleClass,a.slideFullyVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),s.emit("destroy"),Object.keys(s.eventsListeners).forEach((e=>{s.off(e)})),!1!==e&&(s.el&&"string"!=typeof s.el&&(s.el.swiper=null),function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(s)),s.destroyed=!0),null}static extendDefaults(e){pl(ed,e)}static get extendedDefaults(){return ed}static get defaults(){return Jl}static installModule(t){e.prototype.__modules__||(e.prototype.__modules__=[]);const s=e.prototype.__modules__;"function"==typeof t&&s.indexOf(t)<0&&s.push(t)}static use(t){return Array.isArray(t)?(t.forEach((t=>e.installModule(t))),e):(e.installModule(t),e)}};Object.keys(Ql).forEach((e=>{Object.keys(Ql[e]).forEach((t=>{td.prototype[t]=Ql[e][t]}))})),td.use([function(e){let{swiper:t,on:s,emit:a}=e;const n=ol();let i=null,r=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(a("beforeResize"),a("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&a("orientationchange")};s("init",(()=>{t.params.resizeObserver&&void 0!==n.ResizeObserver?t&&!t.destroyed&&t.initialized&&(i=new ResizeObserver((e=>{r=n.requestAnimationFrame((()=>{const{width:s,height:a}=t;let n=s,i=a;e.forEach((e=>{let{contentBoxSize:s,contentRect:a,target:r}=e;r&&r!==t.el||(n=a?a.width:(s[0]||s).inlineSize,i=a?a.height:(s[0]||s).blockSize)})),n===s&&i===a||o()}))})),i.observe(t.el)):(n.addEventListener("resize",o),n.addEventListener("orientationchange",l))})),s("destroy",(()=>{r&&n.cancelAnimationFrame(r),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",l)}))},function(e){let{swiper:t,extendParams:s,on:a,emit:n}=e;const i=[],r=ol(),o=function(e,s){void 0===s&&(s={});const a=new(r.MutationObserver||r.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void n("observerUpdate",e[0]);const s=function(){n("observerUpdate",e[0])};r.requestAnimationFrame?r.requestAnimationFrame(s):r.setTimeout(s,0)}));a.observe(e,{attributes:void 0===s.attributes||s.attributes,childList:t.isElement||(void 0===s.childList||s).childList,characterData:void 0===s.characterData||s.characterData}),i.push(a)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),a("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e){const t=[];let s=e.parentElement;for(;s;)t.push(s),s=s.parentElement;return t}(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}})),a("destroy",(()=>{i.forEach((e=>{e.disconnect()})),i.splice(0,i.length)}))}]);const sd=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ad(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function nd(e,t){const s=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>s.indexOf(e)<0)).forEach((s=>{void 0===e[s]?e[s]=t[s]:ad(t[s])&&ad(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:nd(e[s],t[s]):e[s]=t[s]}))}function id(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function rd(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function od(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function ld(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),s=[];return t.forEach((e=>{s.indexOf(e)<0&&s.push(e)})),s.join(" ")}function dd(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},cd.apply(this,arguments)}function ud(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function pd(e){const t=[];return oe.default.Children.toArray(e).forEach((e=>{ud(e)?t.push(e):e.props&&e.props.children&&pd(e.props.children).forEach((e=>t.push(e)))})),t}function md(e){const t=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return oe.default.Children.toArray(e).forEach((e=>{if(ud(e))t.push(e);else if(e.props&&e.props.slot&&s[e.props.slot])s[e.props.slot].push(e);else if(e.props&&e.props.children){const a=pd(e.props.children);a.length>0?a.forEach((e=>t.push(e))):s["container-end"].push(e)}else s["container-end"].push(e)})),{slides:t,slots:s}}function gd(t,s){return"undefined"==typeof window?e.useEffect(t,s):e.useLayoutEffect(t,s)}const fd=e.createContext(null),hd=e.createContext(null),vd=e.forwardRef((function(t,s){let{className:a,tag:n="div",wrapperTag:i="div",children:r,onSwiper:o,...l}=void 0===t?{}:t,d=!1;const[c,u]=e.useState("swiper"),[p,m]=e.useState(null),[g,f]=e.useState(!1),h=e.useRef(!1),v=e.useRef(null),E=e.useRef(null),S=e.useRef(null),T=e.useRef(null),_=e.useRef(null),b=e.useRef(null),I=e.useRef(null),x=e.useRef(null),{params:w,passedParams:N,rest:y,events:O}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const s={on:{}},a={},n={};nd(s,Jl),s._emitClasses=!0,s.init=!1;const i={},r=sd.map((e=>e.replace(/_/,""))),o=Object.assign({},e);return Object.keys(o).forEach((o=>{void 0!==e[o]&&(r.indexOf(o)>=0?ad(e[o])?(s[o]={},n[o]={},nd(s[o],e[o]),nd(n[o],e[o])):(s[o]=e[o],n[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"==typeof e[o]?t?a[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:s.on[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:i[o]=e[o])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===s[e]&&(s[e]={}),!1===s[e]&&delete s[e]})),{params:s,passedParams:n,rest:i,events:a}}(l),{slides:C,slots:M}=md(r),A=()=>{f(!g)};Object.assign(w.on,{_containerClasses(e,t){u(t)}});const P=()=>{Object.assign(w.on,O),d=!0;const e={...w};if(delete e.wrapperClass,E.current=new td(e),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=C;const e={cache:!1,slides:C,renderExternal:m,renderExternalUpdate:!1};nd(E.current.params.virtual,e),nd(E.current.originalParams.virtual,e)}};v.current||P(),E.current&&E.current.on("_beforeBreakpoint",A);return e.useEffect((()=>()=>{E.current&&E.current.off("_beforeBreakpoint",A)})),e.useEffect((()=>{!h.current&&E.current&&(E.current.emitSlidesClasses(),h.current=!0)})),gd((()=>{if(s&&(s.current=v.current),v.current)return E.current.destroyed&&P(),function(e,t){let{el:s,nextEl:a,prevEl:n,paginationEl:i,scrollbarEl:r,swiper:o}=e;id(t)&&a&&n&&(o.params.navigation.nextEl=a,o.originalParams.navigation.nextEl=a,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),rd(t)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),od(t)&&r&&(o.params.scrollbar.el=r,o.originalParams.scrollbar.el=r),o.init(s)}({el:v.current,nextEl:_.current,prevEl:b.current,paginationEl:I.current,scrollbarEl:x.current,swiper:E.current},w),o&&!E.current.destroyed&&o(E.current),()=>{E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}}),[]),gd((()=>{!d&&O&&E.current&&Object.keys(O).forEach((e=>{E.current.on(e,O[e])}));const e=function(e,t,s,a,n){const i=[];if(!t)return i;const r=e=>{i.indexOf(e)<0&&i.push(e)};if(s&&a){const e=a.map(n),t=s.map(n);e.join("")!==t.join("")&&r("children"),a.length!==s.length&&r("children")}return sd.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((s=>{if(s in e&&s in t)if(ad(e[s])&&ad(t[s])){const a=Object.keys(e[s]),n=Object.keys(t[s]);a.length!==n.length?r(s):(a.forEach((a=>{e[s][a]!==t[s][a]&&r(s)})),n.forEach((a=>{e[s][a]!==t[s][a]&&r(s)})))}else e[s]!==t[s]&&r(s)})),i}(N,S.current,C,T.current,(e=>e.key));return S.current=N,T.current=C,e.length&&E.current&&!E.current.destroyed&&function(e){let{swiper:t,slides:s,passedParams:a,changedParams:n,nextEl:i,prevEl:r,scrollbarEl:o,paginationEl:l}=e;const d=n.filter((e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e)),{params:c,pagination:u,navigation:p,scrollbar:m,virtual:g,thumbs:f}=t;let h,v,E,S,T,_,b,I;n.includes("thumbs")&&a.thumbs&&a.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(h=!0),n.includes("controller")&&a.controller&&a.controller.control&&c.controller&&!c.controller.control&&(v=!0),n.includes("pagination")&&a.pagination&&(a.pagination.el||l)&&(c.pagination||!1===c.pagination)&&u&&!u.el&&(E=!0),n.includes("scrollbar")&&a.scrollbar&&(a.scrollbar.el||o)&&(c.scrollbar||!1===c.scrollbar)&&m&&!m.el&&(S=!0),n.includes("navigation")&&a.navigation&&(a.navigation.prevEl||r)&&(a.navigation.nextEl||i)&&(c.navigation||!1===c.navigation)&&p&&!p.prevEl&&!p.nextEl&&(T=!0);const x=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),c[e].prevEl=void 0,c[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),c[e].el=void 0,t[e].el=void 0))};n.includes("loop")&&t.isElement&&(c.loop&&!a.loop?_=!0:!c.loop&&a.loop?b=!0:I=!0),d.forEach((e=>{if(ad(c[e])&&ad(a[e]))Object.assign(c[e],a[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in a[e])||a[e].enabled||x(e);else{const t=a[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?c[e]=a[e]:!1===t&&x(e)}})),d.includes("controller")&&!v&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),n.includes("children")&&s&&g&&c.virtual.enabled?(g.slides=s,g.update(!0)):n.includes("virtual")&&g&&c.virtual.enabled&&(s&&(g.slides=s),g.update(!0)),n.includes("children")&&s&&c.loop&&(I=!0),h&&f.init()&&f.update(!0);v&&(t.controller.control=c.controller.control),E&&(!t.isElement||l&&"string"!=typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(c.pagination.el=l),u.init(),u.render(),u.update()),S&&(!t.isElement||o&&"string"!=typeof o||(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(c.scrollbar.el=o),m.init(),m.updateSize(),m.setTranslate()),T&&(t.isElement&&(i&&"string"!=typeof i||(i=document.createElement("div"),i.classList.add("swiper-button-next"),i.innerHTML=t.hostEl.constructor.nextButtonSvg,i.part.add("button-next"),t.el.appendChild(i)),r&&"string"!=typeof r||(r=document.createElement("div"),r.classList.add("swiper-button-prev"),r.innerHTML=t.hostEl.constructor.prevButtonSvg,r.part.add("button-prev"),t.el.appendChild(r))),i&&(c.navigation.nextEl=i),r&&(c.navigation.prevEl=r),p.init(),p.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=a.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=a.allowSlidePrev),n.includes("direction")&&t.changeDirection(a.direction,!1),(_||I)&&t.loopDestroy(),(b||I)&&t.loopCreate(),t.update()}({swiper:E.current,slides:C,passedParams:N,changedParams:e,nextEl:_.current,prevEl:b.current,scrollbarEl:x.current,paginationEl:I.current}),()=>{O&&E.current&&Object.keys(O).forEach((e=>{E.current.off(e,O[e])}))}})),gd((()=>{var e;!(e=E.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[p]),oe.default.createElement(n,cd({ref:v,className:ld(`${c}${a?` ${a}`:""}`)},y),oe.default.createElement(hd.Provider,{value:E.current},M["container-start"],oe.default.createElement(i,{className:dd(w.wrapperClass)},M["wrapper-start"],w.virtual?function(e,t,s){if(!s)return null;const a=e=>{let s=e;return e<0?s=t.length+e:s>=t.length&&(s-=t.length),s},n=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${s.offset}px`}:{top:`${s.offset}px`},{from:i,to:r}=s,o=e.params.loop?-t.length:0,l=e.params.loop?2*t.length:t.length,d=[];for(let e=o;e<l;e+=1)e>=i&&e<=r&&d.push(t[a(e)]);return d.map(((t,s)=>oe.default.cloneElement(t,{swiper:e,style:n,key:t.props.virtualIndex||t.key||`slide-${s}`})))}(E.current,C,p):C.map(((e,t)=>oe.default.cloneElement(e,{swiper:E.current,swiperSlideIndex:t}))),M["wrapper-end"]),id(w)&&oe.default.createElement(oe.default.Fragment,null,oe.default.createElement("div",{ref:b,className:"swiper-button-prev"}),oe.default.createElement("div",{ref:_,className:"swiper-button-next"})),od(w)&&oe.default.createElement("div",{ref:x,className:"swiper-scrollbar"}),rd(w)&&oe.default.createElement("div",{ref:I,className:"swiper-pagination"}),M["container-end"]))}));vd.displayName="Swiper";const Ed=e.forwardRef((function(t,s){let{tag:a="div",children:n,className:i="",swiper:r,zoom:o,lazy:l,virtualIndex:d,swiperSlideIndex:c,...u}=void 0===t?{}:t;const p=e.useRef(null),[m,g]=e.useState("swiper-slide"),[f,h]=e.useState(!1);function v(e,t,s){t===p.current&&g(s)}gd((()=>{if(void 0!==c&&(p.current.swiperSlideIndex=c),s&&(s.current=p.current),p.current&&r){if(!r.destroyed)return r.on("_slideClass",v),()=>{r&&r.off("_slideClass",v)};"swiper-slide"!==m&&g("swiper-slide")}})),gd((()=>{r&&p.current&&!r.destroyed&&g(r.getSlideClasses(p.current))}),[r]);const E={isActive:m.indexOf("swiper-slide-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0},S=()=>"function"==typeof n?n(E):n;return oe.default.createElement(a,cd({ref:p,className:ld(`${m}${i?` ${i}`:""}`),"data-swiper-slide-index":d,onLoad:()=>{h(!0)}},u),o&&oe.default.createElement(fd.Provider,{value:E},oe.default.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof o?o:void 0},S(),l&&!f&&oe.default.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&oe.default.createElement(fd.Provider,{value:E},S(),l&&!f&&oe.default.createElement("div",{className:"swiper-lazy-preloader"})))}));Ed.displayName="SwiperSlide";const Sd=e.createContext({clickFn:async()=>{},msgId:""});function Td(){return{track:(e,t)=>{var s;null===(s=null===window||void 0===window?void 0:window.sensors)||void 0===s||s.track(e,Object.assign({},t||{}))},setOnceProfile:e=>{null===window||void 0===window||window.sensors.setOnceProfile(Object.assign({},e||{}))},setProfile:e=>{null===window||void 0===window||window.sensors.setProfile(Object.assign({},e||{}))},login:e=>{null===window||void 0===window||window.sensors.login(e)}}}function _d({imgObj:s,onPinchStart:a,onPinchEnd:n}){var i,r,o,l;const c=e.useRef(null),[u,p]=e.useState(1),m=e.useRef(1),g=e.useRef(null),[f,h]=e.useState(!1),v=()=>{h(!0)};return d.useEffectOnce((()=>{const e=g.current;e&&e.addEventListener("load",v,{once:!0})})),e.useEffect((()=>{if(c.current){const e=new Oe.default(c.current);return e.get("pinch").set({enable:!0}),e.on("pinchstart",(()=>{a()})),e.on("pinch",(e=>{e.srcEvent.stopPropagation();const t=Math.min(3,Math.max(.5,m.current*e.scale));p(t)})),e.on("pinchend",(e=>{n(),m.current*=e.scale})),()=>{e.destroy()}}}),[]),t.jsxs("div",{style:{scale:u},ref:c,className:"w-full h-full relative flex justify-center items-center",children:[!f&&t.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center z-10 bg-[#00000033] backdrop-blur-2xl",children:t.jsx("div",{className:"w-10 h-10 p-[6px] flex justify-center items-center",children:t.jsx(Os,{size:"md",speed:"slow",className:"text-white"})})}),t.jsx("img",{ref:g,alt:"image",src:s.url,width:(null===(i=s.mediaFileMetadata)||void 0===i?void 0:i.width)||9999,height:(null===(r=s.mediaFileMetadata)||void 0===r?void 0:r.height)||9999,className:de.default("h-auto max-w-full max-h-full object-scale-down touch-none z-20",(null===(o=s.mediaFileMetadata)||void 0===o?void 0:o.width)?`w-[${s.mediaFileMetadata.width}px]`:"w-auto",(null===(l=s.mediaFileMetadata)||void 0===l?void 0:l.height)?`h-[${s.mediaFileMetadata.height}px]`:"h-auto")})]})}var bd=e.memo((function({src:e,triggerPlay:s}){return t.jsx("div",{className:"w-full h-full flex justify-center items-center",children:t.jsx("video",{src:e,className:"w-auto h-auto max-w-full max-h-full object-scale-down",disablePictureInPicture:!0,controls:!0,controlsList:"nodownload",autoPlay:s})})}));var Id=e.memo((function({url:s,onViewVideo:a,customClass:n,showPlayBtn:i=!0,showRadius:r=!0,showLoading:o=!0}){const l=e.useRef(null),[c,u]=e.useState(!1),p=()=>{u(!0)};return d.useEffectOnce((()=>{const e=l.current;e&&e.addEventListener("loadedmetadata",p,{once:!0})})),t.jsxs("div",{className:de.default("relative w-full h-full",n,r?"rounded-md overflow-hidden":""),children:[!c&&o&&t.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center z-[1] bg-[#00000033] backdrop-blur-2xl",children:t.jsx("div",{className:"w-10 h-10 p-[6px] flex justify-center items-center",children:t.jsx(Os,{size:"md",speed:"slow",className:"text-white"})})}),t.jsxs("div",{className:"relative w-full h-full min-h-[240px]",children:[t.jsx("video",{ref:l,src:s,muted:!0,playsInline:!0,disablePictureInPicture:!0,className:"w-full h-full object-cover",preload:"metadata"}),i&&t.jsx("div",{className:"w-full h-full absolute top-0 left-0 flex justify-center items-center bg-[#00000033]",children:t.jsx(ts,{className:"w-10 h-10 text-white cursor-pointer",onClick:()=>a&&a()})})]})]})}));var xd=Object.freeze({__proto__:null,default:function({imgVideoList:s,activeIndex:a,onClose:n}){const[i,r]=e.useState(a),[o,d]=e.useState(!1),{downloading:c,onDownload:u}=yo(),[p,m]=e.useState(null),[g,f]=e.useState(0),h=e.useRef(null),E=Td(),S=l.useTranslations("common"),{success:T}=Vt(),{msgId:_,selectedBot:b,widgetInfo:I}=e.useContext(Sd),x=e=>{const t=h.current;t&&t.slideTo(e),r(e)},w=()=>{d(!0)},N=()=>{d(!1)};return t.jsxs("div",{className:"flex flex-col w-full h-[100svh] bg-black overflow-hidden ease-in-out",style:{transform:`translateY(${g>0?g:0}px)`},children:[t.jsxs("div",{className:"flex px-[6px] py-[10px] justify-between shrink-0",onTouchStart:e=>{e.stopPropagation(),e.touches.length>1||m(e.touches[0].clientY)},onTouchMove:e=>{if(e.stopPropagation(),null===p)return;const t=e.touches[0].clientY;f(t-p)},onTouchEnd:()=>{g>100&&n(),f(0)},children:[t.jsx(v.IconButton,{variant:"unstyled","aria-label":"close modal",onClick:n,className:"min-w-fit w-9 h-9 rounded-full flex justify-center items-center",children:t.jsx(ms,{className:"w-6 h-6 text-white"})}),t.jsx(v.IconButton,{variant:"unstyled","aria-label":"download file",isLoading:c,onClick:()=>{var e,t;u(s[i].url,s[i].title||`Myshell_${null==b?void 0:b.name}_${Ee.default().format("YYMMDD_HHmmss")}`,(()=>{T({content:S("download_success")})})),E&&E.track&&(null==E||E.track("MessageAction",Object.assign(Object.assign({action_type:"Save Image",message_id:_},(null==I?void 0:I.id)?{widget_id:null==I?void 0:I.id,widget_name:null==I?void 0:I.name}:{bot_id:null==b?void 0:b.id,bot_name:null==b?void 0:b.name}),{image_model:null===(t=null===(e=s[i])||void 0===e?void 0:e.mediaFileMetadata)||void 0===t?void 0:t.generateModel})))},className:"min-w-fit w-9 h-9 rounded-full flex justify-center items-center data-[loading]:text-white",children:t.jsx(tl,{className:"w-6 h-6 text-white"})})]}),t.jsx("div",{style:{height:s.length>1?"calc(100% - 120px)":"calc(100% - 56px)"},children:t.jsx(vd,{spaceBetween:100,slidesPerView:1,initialSlide:a,onSwiper:e=>{h.current=e},onSlideChange:e=>{(e=>{r(e)})(e.realIndex)},className:"grow w-full h-full",enabled:!o,loop:s.length>1,children:s.map(((e,s)=>t.jsx(Ed,{children:t.jsx("div",{className:de.default("touch-none",e.type===Yn.VIDEO?"w-full h-full overflow-hidden justify-center items-center relative z-10":"absolute w-full h-full flex justify-center items-center z-10",s===i?"visible":" invisible w-0 h-0"),children:e.type===Yn.VIDEO?t.jsx(bd,{src:e.url,triggerPlay:s===i}):t.jsx(_d,{imgObj:e,onPinchStart:w,onPinchEnd:N})})},e.url)))})}),s.length>1&&t.jsx("div",{className:"flex justify-center items-center px-[6px] py-3 space-x-2 shrink-0",children:s.length<=4?s.map(((s,a)=>t.jsx(e.Fragment,{children:s.type===Yn.VIDEO?t.jsx("div",{className:de.default("rounded-md overflow-hidden h-10 object-cover cursor-pointer ease-linear duration-200 transition-[width] select-none",i===a?"w-10":"w-7"),onClick:()=>x(a),children:t.jsx(Id,{url:s.url,showPlayBtn:!1,showRadius:!1,showLoading:!1},s.url)}):t.jsx(me.default,{alt:"thumbnail image",src:s.url,width:56,height:56,className:de.default("rounded-md h-10 object-cover cursor-pointer ease-linear duration-200 transition-[width] select-none",i===a?"w-10":"w-7"),onClick:()=>x(a)})},s.url))):t.jsx("div",{className:"flex space-x-2",children:s.map(((e,s)=>t.jsx("div",{className:de.default("rounded-full w-2 h-2",i===s?"bg-white":"bg-[#FFFFFF33]"),onClick:()=>x(s)},e.url)))})})]})}});function wd({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Nd=oe.forwardRef(wd);function yd({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Od=oe.forwardRef(yd);function Cd({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 12H6"}))}const Md=oe.forwardRef(Cd);function Ad({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"}))}const Pd=oe.forwardRef(Ad);function Ld({imgObj:s,handleZoomIn:a,handleZoomOut:n,resetScaleValue:i,onClose:r}){var o,l;const c=e.useRef(null),[u,p]=e.useState(!1),[m,g]=e.useState({x:0,y:0}),[f,h]=e.useState({x:0,y:0}),[v,E]=e.useState(!1),{width:S,height:T}=d.useWindowSize(),_=e.useRef(null),[b,I]=e.useState(!1),x=()=>{E(!0)};e.useEffect((()=>{const e=c.current,t=e=>{if(!u)return;const t=e.clientX-f.x,s=e.clientY-f.y;g({x:t,y:s}),I(!0)},s=()=>{p(!1)};return e&&e.addEventListener("load",x,{once:!0}),document.addEventListener("mousemove",t),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",s)}}),[u,f]);const w=e.useMemo((()=>{var e,t,a,n;return function(e,t){let s=t.width,a=t.height;if(0===t.width||0===t.height)return e;if(t.width<=e.width&&t.height<=e.height)return t;const n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return s=t.width*r,a=t.height*r,{width:s,height:a}}({width:S,height:T-80},{width:null!==(t=null===(e=s.mediaFileMetadata)||void 0===e?void 0:e.width)&&void 0!==t?t:0,height:null!==(n=null===(a=s.mediaFileMetadata)||void 0===a?void 0:a.height)&&void 0!==n?n:0})}),[T,null===(o=s.mediaFileMetadata)||void 0===o?void 0:o.height,null===(l=s.mediaFileMetadata)||void 0===l?void 0:l.width,S]);return t.jsxs("div",{className:de.default("w-full h-full relative flex justify-center items-center"),children:[!v&&t.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center z-10",children:t.jsx("div",{className:"flex justify-center items-center bg-[#00000033] backdrop-blur-2xl",style:Object.assign({},w),children:t.jsx("div",{className:"w-10 h-10 p-[6px] flex justify-center items-center",children:t.jsx(Os,{size:"md",speed:"slow",className:"text-white"})})})}),t.jsx("div",{className:"absolute w-full h-full top-0 left-0 z-[1]",onClick:r}),t.jsx("img",{ref:c,alt:"image",src:s.url,width:w.width||9999,height:w.height||9999,draggable:!0,className:de.default("object-scale-down z-20",u?"cursor-grabbing":"cursor-grab"),style:{transform:`translate(${m.x}px, ${m.y}px)`,maxHeight:w.height||"80vh"},onMouseDown:e=>{2!==e.button&&(e.stopPropagation(),p(!0),I(!1),h({x:e.clientX-m.x,y:e.clientY-m.y}))},onDragStart:e=>e.preventDefault(),onWheel:e=>{0!==e.deltaY&&(e.deltaY<0?a():n())},onClick:()=>{b?I(!1):(_.current&&clearTimeout(_.current),_.current=setTimeout((()=>{r()}),200))},onDoubleClick:()=>{_.current&&(clearTimeout(_.current),i())}})]})}function Dd({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 0 0 1.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06ZM18.584 5.106a.75.75 0 0 1 1.06 0c3.808 3.807 3.808 9.98 0 13.788a.75.75 0 0 1-1.06-1.06 8.25 8.25 0 0 0 0-11.668.75.75 0 0 1 0-1.06Z"}),oe.createElement("path",{d:"M15.932 7.757a.75.75 0 0 1 1.061 0 6 6 0 0 1 0 8.486.75.75 0 0 1-1.06-1.061 4.5 4.5 0 0 0 0-6.364.75.75 0 0 1 0-1.06Z"}))}const Rd=oe.forwardRef(Dd);function jd({title:e,titleId:t,...s},a){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?oe.createElement("title",{id:t},e):null,oe.createElement("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 0 0 1.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06ZM17.78 9.22a.75.75 0 1 0-1.06 1.06L18.44 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 1 0 1.06-1.06L20.56 12l1.72-1.72a.75.75 0 1 0-1.06-1.06l-1.72 1.72-1.72-1.72Z"}))}const kd=oe.forwardRef(jd);const Bd=e.memo((function({videoObj:s,onClose:a,triggerPlay:n}){var i,r,o,l;const c=e.useRef(null),[u,p]=e.useState(0),[m,g]=e.useState(!1),[f,h]=e.useState(0),[E,S]=e.useState(!1),[T,_]=e.useState(!1),[b,I]=e.useState(.5),{isMobile:x}=po(),[w,N]=e.useState(.5),[y,O]=e.useState(!1),{width:C,height:M}=d.useWindowSize(),A=e.useRef(null),P=d.useHover(A);e.useEffect((()=>{g(!1),h(0),p(0)}),[null==s?void 0:s.url]),d.useEffectOnce((()=>{const e=c.current;e&&(e.volume=.5)}));const L=()=>{const e=c.current;e&&(h(e.currentTime),e.paused||requestAnimationFrame(L))},D=e=>{_(e);const t=c.current;e&&t&&(N(b),I(0),t.volume=0),e||(0!==w?t&&(I(w),t.volume=w):t&&(I(.1),t.volume=.1))},R=()=>{g(!0)},j=()=>{(()=>{const e=c.current;p(e.duration)})(),O(!0)};e.useEffect((()=>{const e=c.current;return null==e||e.addEventListener("play",R),null==e||e.addEventListener("canplay",j),null==e||e.addEventListener("canplaythrough",j),(null==e?void 0:e.readyState)&&(null==e?void 0:e.readyState)>=2&&j(),()=>{null==e||e.removeEventListener("play",R),null==e||e.removeEventListener("canplay",j),null==e||e.removeEventListener("canplaythrough",j)}}),[]),e.useEffect((()=>{const e=c.current;e&&(n?e.readyState>=4?e.paused&&e.play().catch((e=>{console.error(e,null==e?void 0:e.stack)})):e.addEventListener("canplaythrough",(()=>{e.paused&&e.play().catch((e=>{console.error(e,null==e?void 0:e.stack)}))}),{once:!0}):(e.pause(),e.currentTime=0,h(0)))}),[n]);const k=e.useMemo((()=>{var e,t,a,n;return function(e,t){let s=t.width,a=t.height;if(0===t.width||0===t.height)return e;if(t.width<=e.width&&t.height<=e.height)return t;const n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return s=t.width*r,a=t.height*r,{width:s,height:a}}({width:C,height:M-80},{width:null!==(t=null===(e=s.mediaFileMetadata)||void 0===e?void 0:e.width)&&void 0!==t?t:0,height:null!==(n=null===(a=s.mediaFileMetadata)||void 0===a?void 0:a.height)&&void 0!==n?n:0})}),[M,null===(i=s.mediaFileMetadata)||void 0===i?void 0:i.height,null===(r=s.mediaFileMetadata)||void 0===r?void 0:r.width,C]);return t.jsxs("div",{className:"w-full h-full relative flex justify-center items-center",ref:A,children:[!y&&t.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center z-10",children:t.jsx("div",{className:"flex justify-center items-center bg-[#00000033] backdrop-blur-2xl",style:Object.assign({},k),children:t.jsx("div",{className:"w-10 h-10 p-[6px] flex justify-center items-center",children:t.jsx(Os,{size:"md",speed:"slow",className:"text-white"})})})}),t.jsx("div",{className:"absolute w-full h-full top-0 left-0 z-[1]",onClick:a}),t.jsx("video",{src:s.url,className:"object-scale-down",width:null!==(o=k.width)&&void 0!==o?o:9999,height:null!==(l=k.height)&&void 0!==l?l:9999,ref:c,onEnded:function(){c.current&&(c.current.currentTime=0,c.current.pause(),g(!1)),h(0)},onTimeUpdate:L,onError:()=>{S(!0)},muted:T,style:Object.assign({},k)}),P&&y&&t.jsx("div",{className:"absolute bottom-9 w-full flex justify-center z-10",children:t.jsxs("div",{className:"w-[480px] h-[56px] flex space-x-2 justify-center items-center border border-outline rounded-xl p-4 bg-surface text-on-surface shadow-[0_0_2px_0_#0000001A]",children:[t.jsx(v.Button,{variant:"unstyled",onClick:()=>{const e=c.current;e&&(e.paused?e.play().catch((e=>{console.error(e,null==e?void 0:e.stack)})):(e.pause(),g(!1)))},borderRadius:"full","aria-label":"audio control button",isDisabled:!s.url||!y,_disabled:{opacity:.3,cursor:"not-allowed"},size:"sm",className:"!flex !items-center !justify-center text-on-surface w-9 h-9",children:m?t.jsx(Qt,{className:"w-6 h-6"}):t.jsx(ts,{className:"w-6 h-6"})}),t.jsx("span",{className:"text-secondary text-xs shrink-0",children:Bt(f)}),t.jsxs(v.Slider,{min:0,max:u,value:f,onChangeStart:()=>{const e=c.current;e&&(e.paused||(e.pause(),g(!1)))},onChange:e=>(e=>{const t=c.current;t&&(t.currentTime=e,h(t.currentTime))})(e),onChangeEnd:()=>{const e=c.current;e&&e.paused&&e.play().catch((e=>{console.error(e,null==e?void 0:e.stack)}))},focusThumbOnChange:!1,isDisabled:!y,className:"flex items-center w-full h-6 cursor-pointer",children:[t.jsx(v.SliderTrack,{className:"bg-[#EDF0F5] dark:bg-[#22242E]",children:t.jsx(v.SliderFilledTrack,{className:"bg-primary"})}),t.jsx(v.SliderThumb,{className:"bg-primary border-[2px] border-white"})]}),t.jsx("span",{className:"text-secondary text-xs shrink-0",children:Bt(u)}),t.jsxs(v.Popover,{placement:"top",trigger:x?"click":"hover",offset:[0,8],closeOnBlur:!0,openDelay:100,children:[t.jsx(v.PopoverTrigger,{children:t.jsx("div",{children:T?t.jsx(kd,{className:"w-5 h-5 text-on-surface cursor-pointer",onClick:()=>D(!1)}):t.jsx(Rd,{className:"w-5 h-5 text-on-surface cursor-pointer",onClick:()=>D(!0)})})}),t.jsx(v.PopoverContent,{className:"rounded-lg p-3 border border-outline w-8 h-[121px] bg-surface text-on-surface shadow-lg",children:t.jsx(v.PopoverBody,{className:"p-0 flex justify-center items-center",children:t.jsxs(v.Slider,{orientation:"vertical",min:0,max:1,step:.01,value:b,onChange:e=>{const t=c.current;t&&(I(e),t.volume=e,0===e?(_(!0),N(0)):T&&_(!1))},focusThumbOnChange:!1,className:"h-[97px]",children:[t.jsx(v.SliderTrack,{className:"bg-[#EDF0F5] dark:bg-[#22242E] w-[2px]",children:t.jsx(v.SliderFilledTrack,{className:"bg-primary"})}),t.jsx(v.SliderThumb,{className:"bg-primary border-[2px] border-surface"})]})})})]})]})})]})}));var Ud=Bd;var Gd=Object.freeze({__proto__:null,default:function({imgVideoList:s,activeIndex:a,onClose:n}){const[i,r]=e.useState(a),[o,d]=e.useState(1);l.useTranslations("common");const c=Td(),{downloading:u,onDownload:p}=yo();Vt();const{msgId:m,selectedBot:g,widgetInfo:f}=e.useContext(Sd),h=e.useMemo((()=>s[i]),[s,i]);e.useEffect((()=>{const e=e=>{switch(e.key){case"ArrowLeft":_();break;case"ArrowRight":b();break;case"ArrowUp":S();break;case"ArrowDown":T()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]);const E=()=>{d(1)};e.useEffect((()=>{d(1)}),[i]);const S=e.useCallback((()=>{o>=3||d(o+.1)}),[o]),T=e.useCallback((()=>{o<=.5||d(o-.1)}),[o]),_=e.useCallback((()=>{r(i<1?s.length-1:i-1)}),[s.length,i]),b=e.useCallback((()=>{r(i===s.length-1?0:i+1)}),[s.length,i]);return t.jsxs("div",{className:"w-full h-screen overflow-hidden flex flex-col bg-surface-container-low",children:[t.jsxs("div",{className:"relative flex justify-center w-full",style:{height:"calc(100vh - 80px)"},children:[t.jsx("div",{className:"flex justify-center items-center w-9 h-9 absolute top-6 right-6 z-50 cursor-pointer rounded-full border border-default bg-surface-default cursor-pointer",onClick:n,children:t.jsx(ms,{className:"w-6 h-6 rounded-full"})}),t.jsx("div",{className:"absolute w-full h-full top-0 left-0 z-[1]",onClick:n}),s.length>1&&t.jsx("div",{onClick:_,className:"flex justify-center items-center w-9 h-9 rounded-full absolute left-6 md:left-6 top-1/2 -translate-y-1/2 bg-surface cursor-pointer z-20 shadow-button-basic border border-outline",children:t.jsx(Nd,{className:"text-[var(--on-surface-btn-text)] w-6 h-6"})}),t.jsx(V.AnimatePresence,{mode:"popLayout",children:s.map(((e,s)=>t.jsx(V.motion.div,{initial:{opacity:0},animate:{opacity:s===i?1:0},exit:{opacity:0},transition:{duration:.2},className:de.default(e.type===Yn.VIDEO?"max-w-3/4 h-full overflow-hidden justify-center items-center relative z-10":"absolute w-full h-full flex justify-center items-center z-10",s===i?"visible":" invisible w-0 h-0"),style:{scale:o},children:e.type===Yn.VIDEO?t.jsx(Ud,{videoObj:e,triggerPlay:s===i,onClose:n}):t.jsx(Ld,{imgObj:e,handleZoomIn:S,handleZoomOut:T,resetScaleValue:E,onClose:n})},e.url)))}),s.length>1&&t.jsx("div",{onClick:b,className:"flex justify-center items-center w-9 h-9 rounded-full absolute right-6 md:right-11 top-1/2 -translate-y-1/2 bg-surface cursor-pointer z-20 shadow-button-basic border border-outline",children:t.jsx(Od,{className:"text-[var(--on-surface-btn-text)] w-6 h-6"})})]}),t.jsxs("div",{className:"h-20 w-full px-6 py-3 flex justify-between items-center shrink-0 relative z-20",children:[t.jsx("div",{className:"absolute w-full h-full top-0 left-0 z-30",onClick:n}),h.type===Yn.IMAGE?t.jsxs("div",{className:"rounded-xl border border-outline bg-surface px-3 flex space-x-[6px] items-center h-[38px] relative z-50",children:[t.jsx(Md,{className:"w-5 h-5 text-secondary cursor-pointer",onClick:T}),t.jsxs(v.Slider,{width:"72px",value:o,min:.5,max:3,step:.1,onChange:e=>{d(e)},focusThumbOnChange:!1,children:[t.jsx(v.SliderTrack,{className:"bg-[#EDF0F5] dark:bg-[#22242E]",children:t.jsx(v.SliderFilledTrack,{className:"bg-primary"})}),t.jsx(v.SliderThumb,{className:"bg-primary border-[2px] border-surface",zIndex:0})]}),t.jsx(Pd,{className:"w-5 h-5 text-secondary cursor-pointer",onClick:S})]}):t.jsx("div",{className:"w-[150px]",onClick:n}),t.jsx("div",{className:"flex space-x-2 relative z-50",children:s.length>1&&s.map(((s,a)=>t.jsx(e.Fragment,{children:s.type===Yn.VIDEO?t.jsx("div",{className:de.default("rounded-md overflow-hidden h-14 object-cover cursor-pointer ease-linear duration-200 transition-[width] select-none",i===a?"w-14":"w-7"),onClick:()=>r(a),children:t.jsx(Id,{url:s.url,showPlayBtn:!1,showRadius:!1,showLoading:!1},s.url)}):t.jsx(me.default,{alt:"thumbnail image",src:s.url,width:56,height:56,className:de.default("rounded-md h-14 object-cover cursor-pointer ease-linear duration-200 transition-[width] select-none",i===a?"w-14":"w-7"),onClick:()=>r(a)})},s.url)))}),t.jsxs("div",{className:"w-[150px] flex justify-end relative z-50",children:[t.jsx("div",{className:"absolute w-full h-full top-0 left-0",onClick:n}),t.jsx(v.IconButton,{variant:"unstyled","aria-label":"download file",isLoading:u,onClick:()=>{var e;const t=s[i].url;if(p(t,s[i].title||`Myshell_${(null==g?void 0:g.name)||(null==f?void 0:f.name)}_${Ee.default().format("YYMMDD_HHmmss")}`),c&&c.track){const n=null===(e=s[i].mediaFileMetadata)||void 0===e?void 0:e.generateModel;n?null==c||c.track("MessageAction",Object.assign(Object.assign({action_type:"Save Image",message_id:m},(null==f?void 0:f.id)?{widget_id:null==f?void 0:f.id,widget_name:null==f?void 0:f.name}:{bot_id:null==g?void 0:g.id,bot_name:null==g?void 0:g.name}),{image_model:n})):(a={media_file_url:t},Vs.post("/v1/bot/im/media_file_metadata",{body:a,isGoLang:!0}).then((e=>null==e?void 0:e.data))).then((e=>{var t;null==c||c.track("MessageAction",Object.assign(Object.assign({action_type:"Save Image",message_id:m},(null==f?void 0:f.id)?{widget_id:null==f?void 0:f.id,widget_name:null==f?void 0:f.name}:{bot_id:null==g?void 0:g.id,bot_name:null==g?void 0:g.name}),{image_model:null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.generateModel}))})).catch((()=>{null==c||c.track("MessageAction",Object.assign(Object.assign({action_type:"Save Image",message_id:m},(null==f?void 0:f.id)?{widget_id:null==f?void 0:f.id,widget_name:null==f?void 0:f.name}:{bot_id:null==g?void 0:g.id,bot_name:null==g?void 0:g.name}),{image_model:""}))}))}var a},className:"min-w-fit text-[var(--on-surface-btn-text)] bg-surface w-9 h-9 rounded-full flex justify-center items-center relative z-[60]",children:t.jsx(tl,{className:"w-[18px] h-[18px]"})})]})]})]})}});exports.ChatModule=function({bgUrl:e,editorAnchorRef:s,editorContainerRef:a,textareaRef:n,topActionsSlot:i,customMenuIconSlot:r,scrollLayoutToTop:o,showMobileDetail:l}){return t.jsxs("div",{className:de.default("w-full h-full flex flex-col bg-cover bg-no-repeat bg-center bg-origin-border relative",!e&&"bg-surface-default"),style:{backgroundImage:null!=e?e:"none"},children:[i,t.jsx("div",{className:"renderer-container grow h-full overflow-y-auto no-scrollbar scroll-smooth px-4 md:px-6 py-0",children:t.jsx(Ho,{})}),t.jsx(qt,{className:"w-full bg-[var(--border)] hidden md:block"}),t.jsx("div",{ref:s,className:"shrink-0 h-fit w-full overflow-hidden",children:t.jsx(Ha,{editorContainerRef:a,textareaRef:n,scrollLayoutToTop:o,showMobileDetail:l,customMenuIconSlot:r})})]})},exports.MessageContext=Pe,exports.MessageToDisplayParser=function(e,t,s,a=!1,n){return Object.assign(Object.assign({},e),{avatar:qo(e,s),name:Xo(e,s,n),replyTo:a?Jo(e,s):void 0,source:Ko(e.userId,t,e.type),msgDisplayType:Wo(e.type),contextMenuItems:[re.Copy_Message]})},exports.RunningError=({errorMessage:s})=>{const[a,i]=e.useState(!1),{onCopy:r}=$t(s||"");return t.jsxs("div",{className:"mt-4 md:mt-6 md:mx-10",children:[t.jsxs(ke,{variant:"error",children:[t.jsx(Ue,{children:s}),t.jsx("div",{className:"w-full gap-x-2 md:w-auto flex justify-center",children:t.jsx(We,{className:"flex-1 md:flex-none",color:"error",size:"md",onClick:()=>{i(!0)},children:"View Detail"})})]}),t.jsx(qe,{open:a,children:t.jsxs(Qe,{className:"w-310px md:w-[380px]",onClose:()=>{i(!1)},maskClosable:!1,children:[t.jsx(et,{className:"px-5 h-[68px] flex justify-center",children:t.jsx(st,{children:t.jsx(ht,{size:"h2",children:"Error Detail"})})}),t.jsx(at,{className:"px-5 pt-1 pb-3 grid gap-y-1.5 overflow-y-auto",children:t.jsx(Et,{className:"break-all",children:t.jsx("div",{children:s})})}),t.jsx(tt,{className:"gap-x-5 min-h-[76px]",children:t.jsxs(We,{className:"w-full",onClick:()=>{r(),i(!1)},color:"error",children:[t.jsx(n.Copy,{className:"w-[20px] h-[20px] mr-1.5 mt-0.5"}),"Copy Error Message"]})})]})})]})},exports.StaticContext=Me,exports.useMessageParams=function(t,s,a,n=!1){const i=`${t}-${s}`,r=e.useRef(Date.now()),o=Gn((e=>e.userId)),l=Qo((e=>e.messageMap)),d=Qo((e=>e.messageIdListMap)),c=Qo((e=>e.localDraftMessageMap)),u=Qo((e=>e.lastMsgIdMap)),p=Qo((e=>e.lastUserInteractionMsgIdMap)),m=Qo((e=>e.setLocalDraftMessage)),g=Qo((e=>e.sendDraftMessage)),f=Qo((e=>e.replaceDraftMessage)),h=Qo((e=>e.addMessage)),v=Qo((e=>e.clearMessageList)),E=e.useMemo((()=>{var e;return null!==(e=d.get(i))&&void 0!==e?e:[]}),[i,d]),S=e.useMemo((()=>l.get(i)),[i,l]),T=e.useMemo((()=>c.get(i)),[c,i]),_=e.useMemo((()=>{var e;return null!==(e=u.get(i))&&void 0!==e?e:""}),[u,i]),b=e.useMemo((()=>{var e;return null!==(e=p.get(i))&&void 0!==e?e:""}),[p,i]),I=e.useMemo((()=>null==S?void 0:S.get(_)),[_,S]),x=e.useMemo((()=>"DRAFT"===(null==I?void 0:I.status)),[null==I?void 0:I.status]),w=e.useMemo((()=>x||"PENDING"===(null==I?void 0:I.status)||"PROCESSING"===(null==I?void 0:I.status)),[null==I?void 0:I.status,x]),[N,y]=e.useState([]),O=e.useCallback((e=>{m(t,s,e)}),[s,m,t]),C=e.useCallback((e=>{if(g(t,s,e),n){const e={id:kt(),userId:null!=o?o:"",entityId:a||s,type:"PENDING_FOR_RESPONSE",status:"PENDING",createdDateUnix:Date.now().toString(),updatedDateUnix:Date.now().toString()};h(t,s,e)}r.current=Date.now()}),[g,t,s,n,o,a,h]),M=e.useCallback((e=>{const t={id:kt(),entityId:a||s,text:e,userId:null!=o?o:"",type:"TEXT",status:"DRAFT",createdDateUnix:Date.now().toString(),updatedDateUnix:Date.now().toString()};C(t)}),[a,s,C,o]),A=e.useCallback((e=>{const t={id:kt(),entityId:a||s,audioBlobDataURI:e,userId:null!=o?o:"",type:"VOICE",status:"DRAFT",createdDateUnix:Date.now().toString(),updatedDateUnix:Date.now().toString()};C(t)}),[a,s,C,o]),P=e.useCallback((()=>{}),[]),L=e.useCallback((e=>{f(t,s,e)}),[s,f,t]),D=e.useCallback((e=>{h(t,s,e)}),[h,s,t]);return{messageIdList:E,messageMap:null!=S?S:new Map,autoPlayIdQueue:N,lastMessageInfo:I,lastUserInteractionMsgId:b,draftMessage:T,sending:x,interacting:w,scrollToBottom:r.current,setDraftMessage:O,sendTextMessage:M,sendAudioMessage:A,sendButtonInteractionMessage:P,replaceDraftMessage:L,addMessage:D,clearMessageList:v}};
